import{a as ms}from"./chunk-V2FNYRFO.js";import{a as Gi,b as He,c as Wt,d as Ji,e as Qi,f as zt,g as Vr,h as es,i as ts,j as rs,k as is,l as ss,m as ns,n as os,o as $e,q as as,r as ls,s as ys,t as _s,u as Ss,v as ws}from"./chunk-PTF5TADV.js";import{A as pt,B as Ze,C as vs,D as Br,E as V,F as Hr,e as Yi,f as qi,k as Xi,l as oe,m as Lr,o as jr,p as Wr,q as cs,r as Bt,s as ds,t as hs,u as zr,v as us,w as fs,x as ps,y as gs,z as Ht}from"./chunk-5ZFBYULW.js";import{$a as ee,$b as jt,A as Ue,Aa as Ui,Ab as Pr,B as At,Ba as Vi,C as Ve,Cb as ht,D as Ir,Db as ye,E as j,Eb as Vt,F as O,Fb as Or,Gb as Lt,Hb as Wi,I as at,Ib as Mr,J as Er,Jb as ut,K as Oi,Kb as ft,Mb as Be,Nb as zi,O as Le,Oa as Li,Ob as _e,P as Pt,Pb as Bi,Ra as Ee,Ta as fe,U,Ua as xr,Ub as Hi,V as ue,W as X,Wa as dt,X as Dr,Xa as ji,Yb as $i,Z as g,_ as Q,_a as G,_b as te,a as u,aa as ve,ab as De,b as w,bc as Fr,c as Zn,ca as c,cc as Nr,d as H,da as Mi,e as Et,ec as Zi,fa as Ot,fb as K,fc as Ur,g as Re,gb as xe,ha as lt,ia as ct,j as z,k as Dt,ka as Z,kb as Tr,kc as Ki,l as Ti,la as F,ma as Mt,n as xt,na as Fi,o as y,p as b,pa as Ni,qa as je,qb as Nt,rb as Ut,s as Tt,t as Ai,u as Pi,ua as Ft,v as P,vb as We,wa as se,wb as ne,x as Ie,xb as pe,yb as ze,zb as Ar}from"./chunk-JDXFMK5Q.js";var W={};Zn(W,{BRAND:()=>_o,DIRTY:()=>Te,EMPTY_PATH:()=>Xn,INVALID:()=>k,NEVER:()=>ia,OK:()=>$,ParseStatus:()=>B,Schema:()=>D,ZodAny:()=>Kt,ZodArray:()=>vt,ZodBigInt:()=>Yr,ZodBoolean:()=>qr,ZodBranded:()=>yt,ZodCatch:()=>ni,ZodDate:()=>Xr,ZodDefault:()=>si,ZodDiscriminatedUnion:()=>Yt,ZodEffects:()=>Je,ZodEnum:()=>Jt,ZodError:()=>de,ZodFirstPartyTypeKind:()=>R,ZodFunction:()=>Xt,ZodIntersection:()=>ei,ZodIssueCode:()=>p,ZodLazy:()=>ti,ZodLiteral:()=>ri,ZodMap:()=>As,ZodNaN:()=>Ms,ZodNativeEnum:()=>ii,ZodNever:()=>Ae,ZodNull:()=>Jr,ZodNullable:()=>Qe,ZodNumber:()=>Kr,ZodObject:()=>Xe,ZodOptional:()=>we,ZodParsedType:()=>v,ZodPipeline:()=>_t,ZodPromise:()=>Qt,ZodReadonly:()=>oi,ZodRecord:()=>qt,ZodSchema:()=>D,ZodSet:()=>Ps,ZodString:()=>Gt,ZodSymbol:()=>xs,ZodTransformer:()=>Je,ZodTuple:()=>Ge,ZodType:()=>D,ZodUndefined:()=>Gr,ZodUnion:()=>Qr,ZodUnknown:()=>mt,ZodVoid:()=>Ts,addIssueToContext:()=>m,any:()=>Do,array:()=>Po,bigint:()=>ko,boolean:()=>Vs,coerce:()=>ra,custom:()=>Fs,date:()=>Co,datetimeRegex:()=>Ds,defaultErrorMap:()=>ge,discriminatedUnion:()=>No,effect:()=>Yo,enum:()=>$o,function:()=>zo,getErrorMap:()=>Ke,getParsedType:()=>ce,instanceof:()=>wo,intersection:()=>Uo,isAborted:()=>$t,isAsync:()=>Ye,isDirty:()=>Zt,isValid:()=>Se,late:()=>So,lazy:()=>Bo,literal:()=>Ho,makeIssue:()=>gt,map:()=>jo,nan:()=>bo,nativeEnum:()=>Zo,never:()=>To,null:()=>Eo,nullable:()=>Xo,number:()=>Us,object:()=>Oo,objectUtil:()=>bs,oboolean:()=>ta,onumber:()=>ea,optional:()=>qo,ostring:()=>Qo,pipeline:()=>Jo,preprocess:()=>Go,promise:()=>Ko,quotelessJson:()=>Kn,record:()=>Lo,set:()=>Wo,setErrorMap:()=>qn,strictObject:()=>Mo,string:()=>Ns,symbol:()=>Ro,transformer:()=>Yo,tuple:()=>Vo,undefined:()=>Io,union:()=>Fo,unknown:()=>xo,util:()=>x,void:()=>Ao});var x;(function(s){s.assertEqual=t=>{};function r(t){}s.assertIs=r;function i(t){throw new Error}s.assertNever=i,s.arrayToEnum=t=>{let n={};for(let o of t)n[o]=o;return n},s.getValidEnumValues=t=>{let n=s.objectKeys(t).filter(a=>typeof t[t[a]]!="number"),o={};for(let a of n)o[a]=t[a];return s.objectValues(o)},s.objectValues=t=>s.objectKeys(t).map(function(n){return t[n]}),s.objectKeys=typeof Object.keys=="function"?t=>Object.keys(t):t=>{let n=[];for(let o in t)Object.prototype.hasOwnProperty.call(t,o)&&n.push(o);return n},s.find=(t,n)=>{for(let o of t)if(n(o))return o},s.isInteger=typeof Number.isInteger=="function"?t=>Number.isInteger(t):t=>typeof t=="number"&&Number.isFinite(t)&&Math.floor(t)===t;function e(t,n=" | "){return t.map(o=>typeof o=="string"?`'${o}'`:o).join(n)}s.joinValues=e,s.jsonStringifyReplacer=(t,n)=>typeof n=="bigint"?n.toString():n})(x||(x={}));var bs=(function(s){return s.mergeShapes=(r,i)=>u(u({},r),i),s})(bs||{}),v=x.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ce=s=>{switch(typeof s){case"undefined":return v.undefined;case"string":return v.string;case"number":return Number.isNaN(s)?v.nan:v.number;case"boolean":return v.boolean;case"function":return v.function;case"bigint":return v.bigint;case"symbol":return v.symbol;case"object":return Array.isArray(s)?v.array:s===null?v.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?v.promise:typeof Map<"u"&&s instanceof Map?v.map:typeof Set<"u"&&s instanceof Set?v.set:typeof Date<"u"&&s instanceof Date?v.date:v.object;default:return v.unknown}};var p=x.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Kn=s=>JSON.stringify(s,null,2).replace(/"([^"]+)":/g,"$1:"),de=(()=>{class s extends Error{get errors(){return this.issues}constructor(i){super(),this.issues=[],this.addIssue=t=>{this.issues=[...this.issues,t]},this.addIssues=(t=[])=>{this.issues=[...this.issues,...t]};let e=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,e):this.__proto__=e,this.name="ZodError",this.issues=i}format(i){let e=i||function(o){return o.message},t={_errors:[]},n=o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(n);else if(a.code==="invalid_return_type")n(a.returnTypeError);else if(a.code==="invalid_arguments")n(a.argumentsError);else if(a.path.length===0)t._errors.push(e(a));else{let l=t,d=0;for(;d<a.path.length;){let h=a.path[d];d===a.path.length-1?(l[h]=l[h]||{_errors:[]},l[h]._errors.push(e(a))):l[h]=l[h]||{_errors:[]},l=l[h],d++}}};return n(this),t}static assert(i){if(!(i instanceof s))throw new Error(`Not a ZodError: ${i}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,x.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(i=e=>e.message){let e={},t=[];for(let n of this.issues)if(n.path.length>0){let o=n.path[0];e[o]=e[o]||[],e[o].push(i(n))}else t.push(i(n));return{formErrors:t,fieldErrors:e}}get formErrors(){return this.flatten()}}return s.create=r=>new s(r),s})();var Yn=(s,r)=>{let i;switch(s.code){case p.invalid_type:s.received===v.undefined?i="Required":i=`Expected ${s.expected}, received ${s.received}`;break;case p.invalid_literal:i=`Invalid literal value, expected ${JSON.stringify(s.expected,x.jsonStringifyReplacer)}`;break;case p.unrecognized_keys:i=`Unrecognized key(s) in object: ${x.joinValues(s.keys,", ")}`;break;case p.invalid_union:i="Invalid input";break;case p.invalid_union_discriminator:i=`Invalid discriminator value. Expected ${x.joinValues(s.options)}`;break;case p.invalid_enum_value:i=`Invalid enum value. Expected ${x.joinValues(s.options)}, received '${s.received}'`;break;case p.invalid_arguments:i="Invalid function arguments";break;case p.invalid_return_type:i="Invalid function return type";break;case p.invalid_date:i="Invalid date";break;case p.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(i=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(i=`${i} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?i=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?i=`Invalid input: must end with "${s.validation.endsWith}"`:x.assertNever(s.validation):s.validation!=="regex"?i=`Invalid ${s.validation}`:i="Invalid";break;case p.too_small:s.type==="array"?i=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?i=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?i=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="bigint"?i=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?i=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:i="Invalid input";break;case p.too_big:s.type==="array"?i=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?i=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?i=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?i=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?i=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:i="Invalid input";break;case p.custom:i="Invalid input";break;case p.invalid_intersection_types:i="Intersection results could not be merged";break;case p.not_multiple_of:i=`Number must be a multiple of ${s.multipleOf}`;break;case p.not_finite:i="Number must be finite";break;default:i=r.defaultError,x.assertNever(s)}return{message:i}},ge=Yn;var ks=ge;function qn(s){ks=s}function Ke(){return ks}var gt=s=>{let{data:r,path:i,errorMaps:e,issueData:t}=s,n=[...i,...t.path||[]],o=w(u({},t),{path:n});if(t.message!==void 0)return w(u({},t),{path:n,message:t.message});let a="",l=e.filter(d=>!!d).slice().reverse();for(let d of l)a=d(o,{data:r,defaultError:a}).message;return w(u({},t),{path:n,message:a})},Xn=[];function m(s,r){let i=Ke(),e=gt({issueData:r,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,i,i===ge?void 0:ge].filter(t=>!!t)});s.common.issues.push(e)}var B=class s{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(r,i){let e=[];for(let t of i){if(t.status==="aborted")return k;t.status==="dirty"&&r.dirty(),e.push(t.value)}return{status:r.value,value:e}}static mergeObjectAsync(r,i){return H(this,null,function*(){let e=[];for(let t of i){let n=yield t.key,o=yield t.value;e.push({key:n,value:o})}return s.mergeObjectSync(r,e)})}static mergeObjectSync(r,i){let e={};for(let t of i){let{key:n,value:o}=t;if(n.status==="aborted"||o.status==="aborted")return k;n.status==="dirty"&&r.dirty(),o.status==="dirty"&&r.dirty(),n.value!=="__proto__"&&(typeof o.value<"u"||t.alwaysSet)&&(e[n.value]=o.value)}return{status:r.value,value:e}}},k=Object.freeze({status:"aborted"}),Te=s=>({status:"dirty",value:s}),$=s=>({status:"valid",value:s}),$t=s=>s.status==="aborted",Zt=s=>s.status==="dirty",Se=s=>s.status==="valid",Ye=s=>typeof Promise<"u"&&s instanceof Promise;var S=(function(s){return s.errToObj=r=>typeof r=="string"?{message:r}:r||{},s.toString=r=>typeof r=="string"?r:r?.message,s})(S||{});var re=class{constructor(r,i,e,t){this._cachedPath=[],this.parent=r,this.data=i,this._path=e,this._key=t}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Cs=(s,r)=>{if(Se(r))return{success:!0,data:r.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let i=new de(s.common.issues);return this._error=i,this._error}}};function E(s){if(!s)return{};let{errorMap:r,invalid_type_error:i,required_error:e,description:t}=s;if(r&&(i||e))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return r?{errorMap:r,description:t}:{errorMap:(o,a)=>{let{message:l}=s;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??e??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??i??a.defaultError}},description:t}}var D=class{get description(){return this._def.description}_getType(r){return ce(r.data)}_getOrReturnCtx(r,i){return i||{common:r.parent.common,data:r.data,parsedType:ce(r.data),schemaErrorMap:this._def.errorMap,path:r.path,parent:r.parent}}_processInputParams(r){return{status:new B,ctx:{common:r.parent.common,data:r.data,parsedType:ce(r.data),schemaErrorMap:this._def.errorMap,path:r.path,parent:r.parent}}}_parseSync(r){let i=this._parse(r);if(Ye(i))throw new Error("Synchronous parse encountered promise.");return i}_parseAsync(r){let i=this._parse(r);return Promise.resolve(i)}parse(r,i){let e=this.safeParse(r,i);if(e.success)return e.data;throw e.error}safeParse(r,i){let e={common:{issues:[],async:i?.async??!1,contextualErrorMap:i?.errorMap},path:i?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:ce(r)},t=this._parseSync({data:r,path:e.path,parent:e});return Cs(e,t)}"~validate"(r){let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:ce(r)};if(!this["~standard"].async)try{let e=this._parseSync({data:r,path:[],parent:i});return Se(e)?{value:e.value}:{issues:i.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:r,path:[],parent:i}).then(e=>Se(e)?{value:e.value}:{issues:i.common.issues})}parseAsync(r,i){return H(this,null,function*(){let e=yield this.safeParseAsync(r,i);if(e.success)return e.data;throw e.error})}safeParseAsync(r,i){return H(this,null,function*(){let e={common:{issues:[],contextualErrorMap:i?.errorMap,async:!0},path:i?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:ce(r)},t=this._parse({data:r,path:e.path,parent:e}),n=yield Ye(t)?t:Promise.resolve(t);return Cs(e,n)})}refine(r,i){let e=t=>typeof i=="string"||typeof i>"u"?{message:i}:typeof i=="function"?i(t):i;return this._refinement((t,n)=>{let o=r(t),a=()=>n.addIssue(u({code:p.custom},e(t)));return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(r,i){return this._refinement((e,t)=>r(e)?!0:(t.addIssue(typeof i=="function"?i(e,t):i),!1))}_refinement(r){return new Je({schema:this,typeName:R.ZodEffects,effect:{type:"refinement",refinement:r}})}superRefine(r){return this._refinement(r)}constructor(r){this.spa=this.safeParseAsync,this._def=r,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:i=>this["~validate"](i)}}optional(){return we.create(this,this._def)}nullable(){return Qe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return vt.create(this)}promise(){return Qt.create(this,this._def)}or(r){return Qr.create([this,r],this._def)}and(r){return ei.create(this,r,this._def)}transform(r){return new Je(w(u({},E(this._def)),{schema:this,typeName:R.ZodEffects,effect:{type:"transform",transform:r}}))}default(r){let i=typeof r=="function"?r:()=>r;return new si(w(u({},E(this._def)),{innerType:this,defaultValue:i,typeName:R.ZodDefault}))}brand(){return new yt(u({typeName:R.ZodBranded,type:this},E(this._def)))}catch(r){let i=typeof r=="function"?r:()=>r;return new ni(w(u({},E(this._def)),{innerType:this,catchValue:i,typeName:R.ZodCatch}))}describe(r){let i=this.constructor;return new i(w(u({},this._def),{description:r}))}pipe(r){return _t.create(this,r)}readonly(){return oi.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Gn=/^c[^\s-]{8,}$/i,Jn=/^[0-9a-z]+$/,Qn=/^[0-9A-HJKMNP-TV-Z]{26}$/i,eo=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,to=/^[a-z0-9_-]{21}$/i,ro=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,io=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,so=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,no="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",$r,oo=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ao=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,lo=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,co=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ho=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,uo=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Is="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",fo=new RegExp(`^${Is}$`);function Es(s){let r="[0-5]\\d";s.precision?r=`${r}\\.\\d{${s.precision}}`:s.precision==null&&(r=`${r}(\\.\\d+)?`);let i=s.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${r})${i}`}function po(s){return new RegExp(`^${Es(s)}$`)}function Ds(s){let r=`${Is}T${Es(s)}`,i=[];return i.push(s.local?"Z?":"Z"),s.offset&&i.push("([+-]\\d{2}:?\\d{2})"),r=`${r}(${i.join("|")})`,new RegExp(`^${r}$`)}function go(s,r){return!!((r==="v4"||!r)&&oo.test(s)||(r==="v6"||!r)&&lo.test(s))}function mo(s,r){if(!ro.test(s))return!1;try{let[i]=s.split(".");if(!i)return!1;let e=i.replace(/-/g,"+").replace(/_/g,"/").padEnd(i.length+(4-i.length%4)%4,"="),t=JSON.parse(atob(e));return!(typeof t!="object"||t===null||"typ"in t&&t?.typ!=="JWT"||!t.alg||r&&t.alg!==r)}catch{return!1}}function vo(s,r){return!!((r==="v4"||!r)&&ao.test(s)||(r==="v6"||!r)&&co.test(s))}var Gt=(()=>{class s extends D{_parse(i){if(this._def.coerce&&(i.data=String(i.data)),this._getType(i)!==v.string){let o=this._getOrReturnCtx(i);return m(o,{code:p.invalid_type,expected:v.string,received:o.parsedType}),k}let t=new B,n;for(let o of this._def.checks)if(o.kind==="min")i.data.length<o.value&&(n=this._getOrReturnCtx(i,n),m(n,{code:p.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),t.dirty());else if(o.kind==="max")i.data.length>o.value&&(n=this._getOrReturnCtx(i,n),m(n,{code:p.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),t.dirty());else if(o.kind==="length"){let a=i.data.length>o.value,l=i.data.length<o.value;(a||l)&&(n=this._getOrReturnCtx(i,n),a?m(n,{code:p.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&m(n,{code:p.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),t.dirty())}else if(o.kind==="email")so.test(i.data)||(n=this._getOrReturnCtx(i,n),m(n,{validation:"email",code:p.invalid_string,message:o.message}),t.dirty());else if(o.kind==="emoji")$r||($r=new RegExp(no,"u")),$r.test(i.data)||(n=this._getOrReturnCtx(i,n),m(n,{validation:"emoji",code:p.invalid_string,message:o.message}),t.dirty());else if(o.kind==="uuid")eo.test(i.data)||(n=this._getOrReturnCtx(i,n),m(n,{validation:"uuid",code:p.invalid_string,message:o.message}),t.dirty());else if(o.kind==="nanoid")to.test(i.data)||(n=this._getOrReturnCtx(i,n),m(n,{validation:"nanoid",code:p.invalid_string,message:o.message}),t.dirty());else if(o.kind==="cuid")Gn.test(i.data)||(n=this._getOrReturnCtx(i,n),m(n,{validation:"cuid",code:p.invalid_string,message:o.message}),t.dirty());else if(o.kind==="cuid2")Jn.test(i.data)||(n=this._getOrReturnCtx(i,n),m(n,{validation:"cuid2",code:p.invalid_string,message:o.message}),t.dirty());else if(o.kind==="ulid")Qn.test(i.data)||(n=this._getOrReturnCtx(i,n),m(n,{validation:"ulid",code:p.invalid_string,message:o.message}),t.dirty());else if(o.kind==="url")try{new URL(i.data)}catch{n=this._getOrReturnCtx(i,n),m(n,{validation:"url",code:p.invalid_string,message:o.message}),t.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(i.data)||(n=this._getOrReturnCtx(i,n),m(n,{validation:"regex",code:p.invalid_string,message:o.message}),t.dirty())):o.kind==="trim"?i.data=i.data.trim():o.kind==="includes"?i.data.includes(o.value,o.position)||(n=this._getOrReturnCtx(i,n),m(n,{code:p.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),t.dirty()):o.kind==="toLowerCase"?i.data=i.data.toLowerCase():o.kind==="toUpperCase"?i.data=i.data.toUpperCase():o.kind==="startsWith"?i.data.startsWith(o.value)||(n=this._getOrReturnCtx(i,n),m(n,{code:p.invalid_string,validation:{startsWith:o.value},message:o.message}),t.dirty()):o.kind==="endsWith"?i.data.endsWith(o.value)||(n=this._getOrReturnCtx(i,n),m(n,{code:p.invalid_string,validation:{endsWith:o.value},message:o.message}),t.dirty()):o.kind==="datetime"?Ds(o).test(i.data)||(n=this._getOrReturnCtx(i,n),m(n,{code:p.invalid_string,validation:"datetime",message:o.message}),t.dirty()):o.kind==="date"?fo.test(i.data)||(n=this._getOrReturnCtx(i,n),m(n,{code:p.invalid_string,validation:"date",message:o.message}),t.dirty()):o.kind==="time"?po(o).test(i.data)||(n=this._getOrReturnCtx(i,n),m(n,{code:p.invalid_string,validation:"time",message:o.message}),t.dirty()):o.kind==="duration"?io.test(i.data)||(n=this._getOrReturnCtx(i,n),m(n,{validation:"duration",code:p.invalid_string,message:o.message}),t.dirty()):o.kind==="ip"?go(i.data,o.version)||(n=this._getOrReturnCtx(i,n),m(n,{validation:"ip",code:p.invalid_string,message:o.message}),t.dirty()):o.kind==="jwt"?mo(i.data,o.alg)||(n=this._getOrReturnCtx(i,n),m(n,{validation:"jwt",code:p.invalid_string,message:o.message}),t.dirty()):o.kind==="cidr"?vo(i.data,o.version)||(n=this._getOrReturnCtx(i,n),m(n,{validation:"cidr",code:p.invalid_string,message:o.message}),t.dirty()):o.kind==="base64"?ho.test(i.data)||(n=this._getOrReturnCtx(i,n),m(n,{validation:"base64",code:p.invalid_string,message:o.message}),t.dirty()):o.kind==="base64url"?uo.test(i.data)||(n=this._getOrReturnCtx(i,n),m(n,{validation:"base64url",code:p.invalid_string,message:o.message}),t.dirty()):x.assertNever(o);return{status:t.value,value:i.data}}_regex(i,e,t){return this.refinement(n=>i.test(n),u({validation:e,code:p.invalid_string},S.errToObj(t)))}_addCheck(i){return new s(w(u({},this._def),{checks:[...this._def.checks,i]}))}email(i){return this._addCheck(u({kind:"email"},S.errToObj(i)))}url(i){return this._addCheck(u({kind:"url"},S.errToObj(i)))}emoji(i){return this._addCheck(u({kind:"emoji"},S.errToObj(i)))}uuid(i){return this._addCheck(u({kind:"uuid"},S.errToObj(i)))}nanoid(i){return this._addCheck(u({kind:"nanoid"},S.errToObj(i)))}cuid(i){return this._addCheck(u({kind:"cuid"},S.errToObj(i)))}cuid2(i){return this._addCheck(u({kind:"cuid2"},S.errToObj(i)))}ulid(i){return this._addCheck(u({kind:"ulid"},S.errToObj(i)))}base64(i){return this._addCheck(u({kind:"base64"},S.errToObj(i)))}base64url(i){return this._addCheck(u({kind:"base64url"},S.errToObj(i)))}jwt(i){return this._addCheck(u({kind:"jwt"},S.errToObj(i)))}ip(i){return this._addCheck(u({kind:"ip"},S.errToObj(i)))}cidr(i){return this._addCheck(u({kind:"cidr"},S.errToObj(i)))}datetime(i){return typeof i=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:i}):this._addCheck(u({kind:"datetime",precision:typeof i?.precision>"u"?null:i?.precision,offset:i?.offset??!1,local:i?.local??!1},S.errToObj(i?.message)))}date(i){return this._addCheck({kind:"date",message:i})}time(i){return typeof i=="string"?this._addCheck({kind:"time",precision:null,message:i}):this._addCheck(u({kind:"time",precision:typeof i?.precision>"u"?null:i?.precision},S.errToObj(i?.message)))}duration(i){return this._addCheck(u({kind:"duration"},S.errToObj(i)))}regex(i,e){return this._addCheck(u({kind:"regex",regex:i},S.errToObj(e)))}includes(i,e){return this._addCheck(u({kind:"includes",value:i,position:e?.position},S.errToObj(e?.message)))}startsWith(i,e){return this._addCheck(u({kind:"startsWith",value:i},S.errToObj(e)))}endsWith(i,e){return this._addCheck(u({kind:"endsWith",value:i},S.errToObj(e)))}min(i,e){return this._addCheck(u({kind:"min",value:i},S.errToObj(e)))}max(i,e){return this._addCheck(u({kind:"max",value:i},S.errToObj(e)))}length(i,e){return this._addCheck(u({kind:"length",value:i},S.errToObj(e)))}nonempty(i){return this.min(1,S.errToObj(i))}trim(){return new s(w(u({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new s(w(u({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new s(w(u({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(i=>i.kind==="datetime")}get isDate(){return!!this._def.checks.find(i=>i.kind==="date")}get isTime(){return!!this._def.checks.find(i=>i.kind==="time")}get isDuration(){return!!this._def.checks.find(i=>i.kind==="duration")}get isEmail(){return!!this._def.checks.find(i=>i.kind==="email")}get isURL(){return!!this._def.checks.find(i=>i.kind==="url")}get isEmoji(){return!!this._def.checks.find(i=>i.kind==="emoji")}get isUUID(){return!!this._def.checks.find(i=>i.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(i=>i.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(i=>i.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(i=>i.kind==="cuid2")}get isULID(){return!!this._def.checks.find(i=>i.kind==="ulid")}get isIP(){return!!this._def.checks.find(i=>i.kind==="ip")}get isCIDR(){return!!this._def.checks.find(i=>i.kind==="cidr")}get isBase64(){return!!this._def.checks.find(i=>i.kind==="base64")}get isBase64url(){return!!this._def.checks.find(i=>i.kind==="base64url")}get minLength(){let i=null;for(let e of this._def.checks)e.kind==="min"&&(i===null||e.value>i)&&(i=e.value);return i}get maxLength(){let i=null;for(let e of this._def.checks)e.kind==="max"&&(i===null||e.value<i)&&(i=e.value);return i}}return s.create=r=>new s(u({checks:[],typeName:R.ZodString,coerce:r?.coerce??!1},E(r))),s})();function yo(s,r){let i=(s.toString().split(".")[1]||"").length,e=(r.toString().split(".")[1]||"").length,t=i>e?i:e,n=Number.parseInt(s.toFixed(t).replace(".","")),o=Number.parseInt(r.toFixed(t).replace(".",""));return n%o/10**t}var Kr=(()=>{class s extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(i){if(this._def.coerce&&(i.data=Number(i.data)),this._getType(i)!==v.number){let o=this._getOrReturnCtx(i);return m(o,{code:p.invalid_type,expected:v.number,received:o.parsedType}),k}let t,n=new B;for(let o of this._def.checks)o.kind==="int"?x.isInteger(i.data)||(t=this._getOrReturnCtx(i,t),m(t,{code:p.invalid_type,expected:"integer",received:"float",message:o.message}),n.dirty()):o.kind==="min"?(o.inclusive?i.data<o.value:i.data<=o.value)&&(t=this._getOrReturnCtx(i,t),m(t,{code:p.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),n.dirty()):o.kind==="max"?(o.inclusive?i.data>o.value:i.data>=o.value)&&(t=this._getOrReturnCtx(i,t),m(t,{code:p.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),n.dirty()):o.kind==="multipleOf"?yo(i.data,o.value)!==0&&(t=this._getOrReturnCtx(i,t),m(t,{code:p.not_multiple_of,multipleOf:o.value,message:o.message}),n.dirty()):o.kind==="finite"?Number.isFinite(i.data)||(t=this._getOrReturnCtx(i,t),m(t,{code:p.not_finite,message:o.message}),n.dirty()):x.assertNever(o);return{status:n.value,value:i.data}}gte(i,e){return this.setLimit("min",i,!0,S.toString(e))}gt(i,e){return this.setLimit("min",i,!1,S.toString(e))}lte(i,e){return this.setLimit("max",i,!0,S.toString(e))}lt(i,e){return this.setLimit("max",i,!1,S.toString(e))}setLimit(i,e,t,n){return new s(w(u({},this._def),{checks:[...this._def.checks,{kind:i,value:e,inclusive:t,message:S.toString(n)}]}))}_addCheck(i){return new s(w(u({},this._def),{checks:[...this._def.checks,i]}))}int(i){return this._addCheck({kind:"int",message:S.toString(i)})}positive(i){return this._addCheck({kind:"min",value:0,inclusive:!1,message:S.toString(i)})}negative(i){return this._addCheck({kind:"max",value:0,inclusive:!1,message:S.toString(i)})}nonpositive(i){return this._addCheck({kind:"max",value:0,inclusive:!0,message:S.toString(i)})}nonnegative(i){return this._addCheck({kind:"min",value:0,inclusive:!0,message:S.toString(i)})}multipleOf(i,e){return this._addCheck({kind:"multipleOf",value:i,message:S.toString(e)})}finite(i){return this._addCheck({kind:"finite",message:S.toString(i)})}safe(i){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:S.toString(i)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:S.toString(i)})}get minValue(){let i=null;for(let e of this._def.checks)e.kind==="min"&&(i===null||e.value>i)&&(i=e.value);return i}get maxValue(){let i=null;for(let e of this._def.checks)e.kind==="max"&&(i===null||e.value<i)&&(i=e.value);return i}get isInt(){return!!this._def.checks.find(i=>i.kind==="int"||i.kind==="multipleOf"&&x.isInteger(i.value))}get isFinite(){let i=null,e=null;for(let t of this._def.checks){if(t.kind==="finite"||t.kind==="int"||t.kind==="multipleOf")return!0;t.kind==="min"?(e===null||t.value>e)&&(e=t.value):t.kind==="max"&&(i===null||t.value<i)&&(i=t.value)}return Number.isFinite(e)&&Number.isFinite(i)}}return s.create=r=>new s(u({checks:[],typeName:R.ZodNumber,coerce:r?.coerce||!1},E(r))),s})(),Yr=(()=>{class s extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(i){if(this._def.coerce)try{i.data=BigInt(i.data)}catch{return this._getInvalidInput(i)}if(this._getType(i)!==v.bigint)return this._getInvalidInput(i);let t,n=new B;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?i.data<o.value:i.data<=o.value)&&(t=this._getOrReturnCtx(i,t),m(t,{code:p.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),n.dirty()):o.kind==="max"?(o.inclusive?i.data>o.value:i.data>=o.value)&&(t=this._getOrReturnCtx(i,t),m(t,{code:p.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),n.dirty()):o.kind==="multipleOf"?i.data%o.value!==BigInt(0)&&(t=this._getOrReturnCtx(i,t),m(t,{code:p.not_multiple_of,multipleOf:o.value,message:o.message}),n.dirty()):x.assertNever(o);return{status:n.value,value:i.data}}_getInvalidInput(i){let e=this._getOrReturnCtx(i);return m(e,{code:p.invalid_type,expected:v.bigint,received:e.parsedType}),k}gte(i,e){return this.setLimit("min",i,!0,S.toString(e))}gt(i,e){return this.setLimit("min",i,!1,S.toString(e))}lte(i,e){return this.setLimit("max",i,!0,S.toString(e))}lt(i,e){return this.setLimit("max",i,!1,S.toString(e))}setLimit(i,e,t,n){return new s(w(u({},this._def),{checks:[...this._def.checks,{kind:i,value:e,inclusive:t,message:S.toString(n)}]}))}_addCheck(i){return new s(w(u({},this._def),{checks:[...this._def.checks,i]}))}positive(i){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:S.toString(i)})}negative(i){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:S.toString(i)})}nonpositive(i){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:S.toString(i)})}nonnegative(i){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:S.toString(i)})}multipleOf(i,e){return this._addCheck({kind:"multipleOf",value:i,message:S.toString(e)})}get minValue(){let i=null;for(let e of this._def.checks)e.kind==="min"&&(i===null||e.value>i)&&(i=e.value);return i}get maxValue(){let i=null;for(let e of this._def.checks)e.kind==="max"&&(i===null||e.value<i)&&(i=e.value);return i}}return s.create=r=>new s(u({checks:[],typeName:R.ZodBigInt,coerce:r?.coerce??!1},E(r))),s})(),qr=(()=>{class s extends D{_parse(i){if(this._def.coerce&&(i.data=!!i.data),this._getType(i)!==v.boolean){let t=this._getOrReturnCtx(i);return m(t,{code:p.invalid_type,expected:v.boolean,received:t.parsedType}),k}return $(i.data)}}return s.create=r=>new s(u({typeName:R.ZodBoolean,coerce:r?.coerce||!1},E(r))),s})(),Xr=(()=>{class s extends D{_parse(i){if(this._def.coerce&&(i.data=new Date(i.data)),this._getType(i)!==v.date){let o=this._getOrReturnCtx(i);return m(o,{code:p.invalid_type,expected:v.date,received:o.parsedType}),k}if(Number.isNaN(i.data.getTime())){let o=this._getOrReturnCtx(i);return m(o,{code:p.invalid_date}),k}let t=new B,n;for(let o of this._def.checks)o.kind==="min"?i.data.getTime()<o.value&&(n=this._getOrReturnCtx(i,n),m(n,{code:p.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),t.dirty()):o.kind==="max"?i.data.getTime()>o.value&&(n=this._getOrReturnCtx(i,n),m(n,{code:p.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),t.dirty()):x.assertNever(o);return{status:t.value,value:new Date(i.data.getTime())}}_addCheck(i){return new s(w(u({},this._def),{checks:[...this._def.checks,i]}))}min(i,e){return this._addCheck({kind:"min",value:i.getTime(),message:S.toString(e)})}max(i,e){return this._addCheck({kind:"max",value:i.getTime(),message:S.toString(e)})}get minDate(){let i=null;for(let e of this._def.checks)e.kind==="min"&&(i===null||e.value>i)&&(i=e.value);return i!=null?new Date(i):null}get maxDate(){let i=null;for(let e of this._def.checks)e.kind==="max"&&(i===null||e.value<i)&&(i=e.value);return i!=null?new Date(i):null}}return s.create=r=>new s(u({checks:[],coerce:r?.coerce||!1,typeName:R.ZodDate},E(r))),s})(),xs=(()=>{class s extends D{_parse(i){if(this._getType(i)!==v.symbol){let t=this._getOrReturnCtx(i);return m(t,{code:p.invalid_type,expected:v.symbol,received:t.parsedType}),k}return $(i.data)}}return s.create=r=>new s(u({typeName:R.ZodSymbol},E(r))),s})(),Gr=(()=>{class s extends D{_parse(i){if(this._getType(i)!==v.undefined){let t=this._getOrReturnCtx(i);return m(t,{code:p.invalid_type,expected:v.undefined,received:t.parsedType}),k}return $(i.data)}}return s.create=r=>new s(u({typeName:R.ZodUndefined},E(r))),s})(),Jr=(()=>{class s extends D{_parse(i){if(this._getType(i)!==v.null){let t=this._getOrReturnCtx(i);return m(t,{code:p.invalid_type,expected:v.null,received:t.parsedType}),k}return $(i.data)}}return s.create=r=>new s(u({typeName:R.ZodNull},E(r))),s})(),Kt=(()=>{class s extends D{constructor(){super(...arguments),this._any=!0}_parse(i){return $(i.data)}}return s.create=r=>new s(u({typeName:R.ZodAny},E(r))),s})(),mt=(()=>{class s extends D{constructor(){super(...arguments),this._unknown=!0}_parse(i){return $(i.data)}}return s.create=r=>new s(u({typeName:R.ZodUnknown},E(r))),s})(),Ae=(()=>{class s extends D{_parse(i){let e=this._getOrReturnCtx(i);return m(e,{code:p.invalid_type,expected:v.never,received:e.parsedType}),k}}return s.create=r=>new s(u({typeName:R.ZodNever},E(r))),s})(),Ts=(()=>{class s extends D{_parse(i){if(this._getType(i)!==v.undefined){let t=this._getOrReturnCtx(i);return m(t,{code:p.invalid_type,expected:v.void,received:t.parsedType}),k}return $(i.data)}}return s.create=r=>new s(u({typeName:R.ZodVoid},E(r))),s})(),vt=(()=>{class s extends D{_parse(i){let{ctx:e,status:t}=this._processInputParams(i),n=this._def;if(e.parsedType!==v.array)return m(e,{code:p.invalid_type,expected:v.array,received:e.parsedType}),k;if(n.exactLength!==null){let a=e.data.length>n.exactLength.value,l=e.data.length<n.exactLength.value;(a||l)&&(m(e,{code:a?p.too_big:p.too_small,minimum:l?n.exactLength.value:void 0,maximum:a?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),t.dirty())}if(n.minLength!==null&&e.data.length<n.minLength.value&&(m(e,{code:p.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),t.dirty()),n.maxLength!==null&&e.data.length>n.maxLength.value&&(m(e,{code:p.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),t.dirty()),e.common.async)return Promise.all([...e.data].map((a,l)=>n.type._parseAsync(new re(e,a,e.path,l)))).then(a=>B.mergeArray(t,a));let o=[...e.data].map((a,l)=>n.type._parseSync(new re(e,a,e.path,l)));return B.mergeArray(t,o)}get element(){return this._def.type}min(i,e){return new s(w(u({},this._def),{minLength:{value:i,message:S.toString(e)}}))}max(i,e){return new s(w(u({},this._def),{maxLength:{value:i,message:S.toString(e)}}))}length(i,e){return new s(w(u({},this._def),{exactLength:{value:i,message:S.toString(e)}}))}nonempty(i){return this.min(1,i)}}return s.create=(r,i)=>new s(u({type:r,minLength:null,maxLength:null,exactLength:null,typeName:R.ZodArray},E(i))),s})();function qe(s){if(s instanceof Xe){let r={};for(let i in s.shape){let e=s.shape[i];r[i]=we.create(qe(e))}return new Xe(w(u({},s._def),{shape:()=>r}))}else return s instanceof vt?new vt(w(u({},s._def),{type:qe(s.element)})):s instanceof we?we.create(qe(s.unwrap())):s instanceof Qe?Qe.create(qe(s.unwrap())):s instanceof Ge?Ge.create(s.items.map(r=>qe(r))):s}var Xe=(()=>{class s extends D{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let i=this._def.shape(),e=x.objectKeys(i);return this._cached={shape:i,keys:e},this._cached}_parse(i){if(this._getType(i)!==v.object){let h=this._getOrReturnCtx(i);return m(h,{code:p.invalid_type,expected:v.object,received:h.parsedType}),k}let{status:t,ctx:n}=this._processInputParams(i),{shape:o,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ae&&this._def.unknownKeys==="strip"))for(let h in n.data)a.includes(h)||l.push(h);let d=[];for(let h of a){let f=o[h],_=n.data[h];d.push({key:{status:"valid",value:h},value:f._parse(new re(n,_,n.path,h)),alwaysSet:h in n.data})}if(this._def.catchall instanceof Ae){let h=this._def.unknownKeys;if(h==="passthrough")for(let f of l)d.push({key:{status:"valid",value:f},value:{status:"valid",value:n.data[f]}});else if(h==="strict")l.length>0&&(m(n,{code:p.unrecognized_keys,keys:l}),t.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let h=this._def.catchall;for(let f of l){let _=n.data[f];d.push({key:{status:"valid",value:f},value:h._parse(new re(n,_,n.path,f)),alwaysSet:f in n.data})}}return n.common.async?Promise.resolve().then(()=>H(this,null,function*(){let h=[];for(let f of d){let _=yield f.key,C=yield f.value;h.push({key:_,value:C,alwaysSet:f.alwaysSet})}return h})).then(h=>B.mergeObjectSync(t,h)):B.mergeObjectSync(t,d)}get shape(){return this._def.shape()}strict(i){return S.errToObj,new s(u(w(u({},this._def),{unknownKeys:"strict"}),i!==void 0?{errorMap:(e,t)=>{let n=this._def.errorMap?.(e,t).message??t.defaultError;return e.code==="unrecognized_keys"?{message:S.errToObj(i).message??n}:{message:n}}}:{}))}strip(){return new s(w(u({},this._def),{unknownKeys:"strip"}))}passthrough(){return new s(w(u({},this._def),{unknownKeys:"passthrough"}))}extend(i){return new s(w(u({},this._def),{shape:()=>u(u({},this._def.shape()),i)}))}merge(i){return new s({unknownKeys:i._def.unknownKeys,catchall:i._def.catchall,shape:()=>u(u({},this._def.shape()),i._def.shape()),typeName:R.ZodObject})}setKey(i,e){return this.augment({[i]:e})}catchall(i){return new s(w(u({},this._def),{catchall:i}))}pick(i){let e={};for(let t of x.objectKeys(i))i[t]&&this.shape[t]&&(e[t]=this.shape[t]);return new s(w(u({},this._def),{shape:()=>e}))}omit(i){let e={};for(let t of x.objectKeys(this.shape))i[t]||(e[t]=this.shape[t]);return new s(w(u({},this._def),{shape:()=>e}))}deepPartial(){return qe(this)}partial(i){let e={};for(let t of x.objectKeys(this.shape)){let n=this.shape[t];i&&!i[t]?e[t]=n:e[t]=n.optional()}return new s(w(u({},this._def),{shape:()=>e}))}required(i){let e={};for(let t of x.objectKeys(this.shape))if(i&&!i[t])e[t]=this.shape[t];else{let o=this.shape[t];for(;o instanceof we;)o=o._def.innerType;e[t]=o}return new s(w(u({},this._def),{shape:()=>e}))}keyof(){return Os(x.objectKeys(this.shape))}}return s.create=(r,i)=>new s(u({shape:()=>r,unknownKeys:"strip",catchall:Ae.create(),typeName:R.ZodObject},E(i))),s.strictCreate=(r,i)=>new s(u({shape:()=>r,unknownKeys:"strict",catchall:Ae.create(),typeName:R.ZodObject},E(i))),s.lazycreate=(r,i)=>new s(u({shape:r,unknownKeys:"strip",catchall:Ae.create(),typeName:R.ZodObject},E(i))),s})(),Qr=(()=>{class s extends D{_parse(i){let{ctx:e}=this._processInputParams(i),t=this._def.options;function n(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return e.common.issues.push(...l.ctx.common.issues),l.result;let a=o.map(l=>new de(l.ctx.common.issues));return m(e,{code:p.invalid_union,unionErrors:a}),k}if(e.common.async)return Promise.all(t.map(o=>H(this,null,function*(){let a=w(u({},e),{common:w(u({},e.common),{issues:[]}),parent:null});return{result:yield o._parseAsync({data:e.data,path:e.path,parent:a}),ctx:a}}))).then(n);{let o,a=[];for(let d of t){let h=w(u({},e),{common:w(u({},e.common),{issues:[]}),parent:null}),f=d._parseSync({data:e.data,path:e.path,parent:h});if(f.status==="valid")return f;f.status==="dirty"&&!o&&(o={result:f,ctx:h}),h.common.issues.length&&a.push(h.common.issues)}if(o)return e.common.issues.push(...o.ctx.common.issues),o.result;let l=a.map(d=>new de(d));return m(e,{code:p.invalid_union,unionErrors:l}),k}}get options(){return this._def.options}}return s.create=(r,i)=>new s(u({options:r,typeName:R.ZodUnion},E(i))),s})(),me=s=>s instanceof ti?me(s.schema):s instanceof Je?me(s.innerType()):s instanceof ri?[s.value]:s instanceof Jt?s.options:s instanceof ii?x.objectValues(s.enum):s instanceof si?me(s._def.innerType):s instanceof Gr?[void 0]:s instanceof Jr?[null]:s instanceof we?[void 0,...me(s.unwrap())]:s instanceof Qe?[null,...me(s.unwrap())]:s instanceof yt||s instanceof oi?me(s.unwrap()):s instanceof ni?me(s._def.innerType):[],Yt=class s extends D{_parse(r){let{ctx:i}=this._processInputParams(r);if(i.parsedType!==v.object)return m(i,{code:p.invalid_type,expected:v.object,received:i.parsedType}),k;let e=this.discriminator,t=i.data[e],n=this.optionsMap.get(t);return n?i.common.async?n._parseAsync({data:i.data,path:i.path,parent:i}):n._parseSync({data:i.data,path:i.path,parent:i}):(m(i,{code:p.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[e]}),k)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(r,i,e){let t=new Map;for(let n of i){let o=me(n.shape[r]);if(!o.length)throw new Error(`A discriminator value for key \`${r}\` could not be extracted from all schema options`);for(let a of o){if(t.has(a))throw new Error(`Discriminator property ${String(r)} has duplicate value ${String(a)}`);t.set(a,n)}}return new s(u({typeName:R.ZodDiscriminatedUnion,discriminator:r,options:i,optionsMap:t},E(e)))}};function Zr(s,r){let i=ce(s),e=ce(r);if(s===r)return{valid:!0,data:s};if(i===v.object&&e===v.object){let t=x.objectKeys(r),n=x.objectKeys(s).filter(a=>t.indexOf(a)!==-1),o=u(u({},s),r);for(let a of n){let l=Zr(s[a],r[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(i===v.array&&e===v.array){if(s.length!==r.length)return{valid:!1};let t=[];for(let n=0;n<s.length;n++){let o=s[n],a=r[n],l=Zr(o,a);if(!l.valid)return{valid:!1};t.push(l.data)}return{valid:!0,data:t}}else return i===v.date&&e===v.date&&+s==+r?{valid:!0,data:s}:{valid:!1}}var ei=(()=>{class s extends D{_parse(i){let{status:e,ctx:t}=this._processInputParams(i),n=(o,a)=>{if($t(o)||$t(a))return k;let l=Zr(o.value,a.value);return l.valid?((Zt(o)||Zt(a))&&e.dirty(),{status:e.value,value:l.data}):(m(t,{code:p.invalid_intersection_types}),k)};return t.common.async?Promise.all([this._def.left._parseAsync({data:t.data,path:t.path,parent:t}),this._def.right._parseAsync({data:t.data,path:t.path,parent:t})]).then(([o,a])=>n(o,a)):n(this._def.left._parseSync({data:t.data,path:t.path,parent:t}),this._def.right._parseSync({data:t.data,path:t.path,parent:t}))}}return s.create=(r,i,e)=>new s(u({left:r,right:i,typeName:R.ZodIntersection},E(e))),s})(),Ge=(()=>{class s extends D{_parse(i){let{status:e,ctx:t}=this._processInputParams(i);if(t.parsedType!==v.array)return m(t,{code:p.invalid_type,expected:v.array,received:t.parsedType}),k;if(t.data.length<this._def.items.length)return m(t,{code:p.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),k;!this._def.rest&&t.data.length>this._def.items.length&&(m(t,{code:p.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),e.dirty());let o=[...t.data].map((a,l)=>{let d=this._def.items[l]||this._def.rest;return d?d._parse(new re(t,a,t.path,l)):null}).filter(a=>!!a);return t.common.async?Promise.all(o).then(a=>B.mergeArray(e,a)):B.mergeArray(e,o)}get items(){return this._def.items}rest(i){return new s(w(u({},this._def),{rest:i}))}}return s.create=(r,i)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new s(u({items:r,typeName:R.ZodTuple,rest:null},E(i)))},s})(),qt=class s extends D{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(r){let{status:i,ctx:e}=this._processInputParams(r);if(e.parsedType!==v.object)return m(e,{code:p.invalid_type,expected:v.object,received:e.parsedType}),k;let t=[],n=this._def.keyType,o=this._def.valueType;for(let a in e.data)t.push({key:n._parse(new re(e,a,e.path,a)),value:o._parse(new re(e,e.data[a],e.path,a)),alwaysSet:a in e.data});return e.common.async?B.mergeObjectAsync(i,t):B.mergeObjectSync(i,t)}get element(){return this._def.valueType}static create(r,i,e){return i instanceof D?new s(u({keyType:r,valueType:i,typeName:R.ZodRecord},E(e))):new s(u({keyType:Gt.create(),valueType:r,typeName:R.ZodRecord},E(i)))}},As=(()=>{class s extends D{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(i){let{status:e,ctx:t}=this._processInputParams(i);if(t.parsedType!==v.map)return m(t,{code:p.invalid_type,expected:v.map,received:t.parsedType}),k;let n=this._def.keyType,o=this._def.valueType,a=[...t.data.entries()].map(([l,d],h)=>({key:n._parse(new re(t,l,t.path,[h,"key"])),value:o._parse(new re(t,d,t.path,[h,"value"]))}));if(t.common.async){let l=new Map;return Promise.resolve().then(()=>H(this,null,function*(){for(let d of a){let h=yield d.key,f=yield d.value;if(h.status==="aborted"||f.status==="aborted")return k;(h.status==="dirty"||f.status==="dirty")&&e.dirty(),l.set(h.value,f.value)}return{status:e.value,value:l}}))}else{let l=new Map;for(let d of a){let h=d.key,f=d.value;if(h.status==="aborted"||f.status==="aborted")return k;(h.status==="dirty"||f.status==="dirty")&&e.dirty(),l.set(h.value,f.value)}return{status:e.value,value:l}}}}return s.create=(r,i,e)=>new s(u({valueType:i,keyType:r,typeName:R.ZodMap},E(e))),s})(),Ps=(()=>{class s extends D{_parse(i){let{status:e,ctx:t}=this._processInputParams(i);if(t.parsedType!==v.set)return m(t,{code:p.invalid_type,expected:v.set,received:t.parsedType}),k;let n=this._def;n.minSize!==null&&t.data.size<n.minSize.value&&(m(t,{code:p.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),e.dirty()),n.maxSize!==null&&t.data.size>n.maxSize.value&&(m(t,{code:p.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),e.dirty());let o=this._def.valueType;function a(d){let h=new Set;for(let f of d){if(f.status==="aborted")return k;f.status==="dirty"&&e.dirty(),h.add(f.value)}return{status:e.value,value:h}}let l=[...t.data.values()].map((d,h)=>o._parse(new re(t,d,t.path,h)));return t.common.async?Promise.all(l).then(d=>a(d)):a(l)}min(i,e){return new s(w(u({},this._def),{minSize:{value:i,message:S.toString(e)}}))}max(i,e){return new s(w(u({},this._def),{maxSize:{value:i,message:S.toString(e)}}))}size(i,e){return this.min(i,e).max(i,e)}nonempty(i){return this.min(1,i)}}return s.create=(r,i)=>new s(u({valueType:r,minSize:null,maxSize:null,typeName:R.ZodSet},E(i))),s})(),Xt=class s extends D{constructor(){super(...arguments),this.validate=this.implement}_parse(r){let{ctx:i}=this._processInputParams(r);if(i.parsedType!==v.function)return m(i,{code:p.invalid_type,expected:v.function,received:i.parsedType}),k;function e(a,l){return gt({data:a,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,Ke(),ge].filter(d=>!!d),issueData:{code:p.invalid_arguments,argumentsError:l}})}function t(a,l){return gt({data:a,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,Ke(),ge].filter(d=>!!d),issueData:{code:p.invalid_return_type,returnTypeError:l}})}let n={errorMap:i.common.contextualErrorMap},o=i.data;if(this._def.returns instanceof Qt){let a=this;return $(function(...l){return H(this,null,function*(){let d=new de([]),h=yield a._def.args.parseAsync(l,n).catch(C=>{throw d.addIssue(e(l,C)),d}),f=yield Reflect.apply(o,this,h);return yield a._def.returns._def.type.parseAsync(f,n).catch(C=>{throw d.addIssue(t(f,C)),d})})})}else{let a=this;return $(function(...l){let d=a._def.args.safeParse(l,n);if(!d.success)throw new de([e(l,d.error)]);let h=Reflect.apply(o,this,d.data),f=a._def.returns.safeParse(h,n);if(!f.success)throw new de([t(h,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...r){return new s(w(u({},this._def),{args:Ge.create(r).rest(mt.create())}))}returns(r){return new s(w(u({},this._def),{returns:r}))}implement(r){return this.parse(r)}strictImplement(r){return this.parse(r)}static create(r,i,e){return new s(u({args:r||Ge.create([]).rest(mt.create()),returns:i||mt.create(),typeName:R.ZodFunction},E(e)))}},ti=(()=>{class s extends D{get schema(){return this._def.getter()}_parse(i){let{ctx:e}=this._processInputParams(i);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}}return s.create=(r,i)=>new s(u({getter:r,typeName:R.ZodLazy},E(i))),s})(),ri=(()=>{class s extends D{_parse(i){if(i.data!==this._def.value){let e=this._getOrReturnCtx(i);return m(e,{received:e.data,code:p.invalid_literal,expected:this._def.value}),k}return{status:"valid",value:i.data}}get value(){return this._def.value}}return s.create=(r,i)=>new s(u({value:r,typeName:R.ZodLiteral},E(i))),s})();function Os(s,r){return new Jt(u({values:s,typeName:R.ZodEnum},E(r)))}var Jt=(()=>{class s extends D{_parse(i){if(typeof i.data!="string"){let e=this._getOrReturnCtx(i),t=this._def.values;return m(e,{expected:x.joinValues(t),received:e.parsedType,code:p.invalid_type}),k}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(i.data)){let e=this._getOrReturnCtx(i),t=this._def.values;return m(e,{received:e.data,code:p.invalid_enum_value,options:t}),k}return $(i.data)}get options(){return this._def.values}get enum(){let i={};for(let e of this._def.values)i[e]=e;return i}get Values(){let i={};for(let e of this._def.values)i[e]=e;return i}get Enum(){let i={};for(let e of this._def.values)i[e]=e;return i}extract(i,e=this._def){return s.create(i,u(u({},this._def),e))}exclude(i,e=this._def){return s.create(this.options.filter(t=>!i.includes(t)),u(u({},this._def),e))}}return s.create=Os,s})(),ii=(()=>{class s extends D{_parse(i){let e=x.getValidEnumValues(this._def.values),t=this._getOrReturnCtx(i);if(t.parsedType!==v.string&&t.parsedType!==v.number){let n=x.objectValues(e);return m(t,{expected:x.joinValues(n),received:t.parsedType,code:p.invalid_type}),k}if(this._cache||(this._cache=new Set(x.getValidEnumValues(this._def.values))),!this._cache.has(i.data)){let n=x.objectValues(e);return m(t,{received:t.data,code:p.invalid_enum_value,options:n}),k}return $(i.data)}get enum(){return this._def.values}}return s.create=(r,i)=>new s(u({values:r,typeName:R.ZodNativeEnum},E(i))),s})(),Qt=(()=>{class s extends D{unwrap(){return this._def.type}_parse(i){let{ctx:e}=this._processInputParams(i);if(e.parsedType!==v.promise&&e.common.async===!1)return m(e,{code:p.invalid_type,expected:v.promise,received:e.parsedType}),k;let t=e.parsedType===v.promise?e.data:Promise.resolve(e.data);return $(t.then(n=>this._def.type.parseAsync(n,{path:e.path,errorMap:e.common.contextualErrorMap})))}}return s.create=(r,i)=>new s(u({type:r,typeName:R.ZodPromise},E(i))),s})(),Je=(()=>{class s extends D{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===R.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(i){let{status:e,ctx:t}=this._processInputParams(i),n=this._def.effect||null,o={addIssue:a=>{m(t,a),a.fatal?e.abort():e.dirty()},get path(){return t.path}};if(o.addIssue=o.addIssue.bind(o),n.type==="preprocess"){let a=n.transform(t.data,o);if(t.common.async)return Promise.resolve(a).then(l=>H(this,null,function*(){if(e.value==="aborted")return k;let d=yield this._def.schema._parseAsync({data:l,path:t.path,parent:t});return d.status==="aborted"?k:d.status==="dirty"?Te(d.value):e.value==="dirty"?Te(d.value):d}));{if(e.value==="aborted")return k;let l=this._def.schema._parseSync({data:a,path:t.path,parent:t});return l.status==="aborted"?k:l.status==="dirty"?Te(l.value):e.value==="dirty"?Te(l.value):l}}if(n.type==="refinement"){let a=l=>{let d=n.refinement(l,o);if(t.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(t.common.async===!1){let l=this._def.schema._parseSync({data:t.data,path:t.path,parent:t});return l.status==="aborted"?k:(l.status==="dirty"&&e.dirty(),a(l.value),{status:e.value,value:l.value})}else return this._def.schema._parseAsync({data:t.data,path:t.path,parent:t}).then(l=>l.status==="aborted"?k:(l.status==="dirty"&&e.dirty(),a(l.value).then(()=>({status:e.value,value:l.value}))))}if(n.type==="transform")if(t.common.async===!1){let a=this._def.schema._parseSync({data:t.data,path:t.path,parent:t});if(!Se(a))return k;let l=n.transform(a.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:l}}else return this._def.schema._parseAsync({data:t.data,path:t.path,parent:t}).then(a=>Se(a)?Promise.resolve(n.transform(a.value,o)).then(l=>({status:e.value,value:l})):k);x.assertNever(n)}}return s.create=(r,i,e)=>new s(u({schema:r,typeName:R.ZodEffects,effect:i},E(e))),s.createWithPreprocess=(r,i,e)=>new s(u({schema:i,effect:{type:"preprocess",transform:r},typeName:R.ZodEffects},E(e))),s})();var we=(()=>{class s extends D{_parse(i){return this._getType(i)===v.undefined?$(void 0):this._def.innerType._parse(i)}unwrap(){return this._def.innerType}}return s.create=(r,i)=>new s(u({innerType:r,typeName:R.ZodOptional},E(i))),s})(),Qe=(()=>{class s extends D{_parse(i){return this._getType(i)===v.null?$(null):this._def.innerType._parse(i)}unwrap(){return this._def.innerType}}return s.create=(r,i)=>new s(u({innerType:r,typeName:R.ZodNullable},E(i))),s})(),si=(()=>{class s extends D{_parse(i){let{ctx:e}=this._processInputParams(i),t=e.data;return e.parsedType===v.undefined&&(t=this._def.defaultValue()),this._def.innerType._parse({data:t,path:e.path,parent:e})}removeDefault(){return this._def.innerType}}return s.create=(r,i)=>new s(u({innerType:r,typeName:R.ZodDefault,defaultValue:typeof i.default=="function"?i.default:()=>i.default},E(i))),s})(),ni=(()=>{class s extends D{_parse(i){let{ctx:e}=this._processInputParams(i),t=w(u({},e),{common:w(u({},e.common),{issues:[]})}),n=this._def.innerType._parse({data:t.data,path:t.path,parent:u({},t)});return Ye(n)?n.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new de(t.common.issues)},input:t.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new de(t.common.issues)},input:t.data})}}removeCatch(){return this._def.innerType}}return s.create=(r,i)=>new s(u({innerType:r,typeName:R.ZodCatch,catchValue:typeof i.catch=="function"?i.catch:()=>i.catch},E(i))),s})(),Ms=(()=>{class s extends D{_parse(i){if(this._getType(i)!==v.nan){let t=this._getOrReturnCtx(i);return m(t,{code:p.invalid_type,expected:v.nan,received:t.parsedType}),k}return{status:"valid",value:i.data}}}return s.create=r=>new s(u({typeName:R.ZodNaN},E(r))),s})(),_o=Symbol("zod_brand"),yt=class extends D{_parse(r){let{ctx:i}=this._processInputParams(r),e=i.data;return this._def.type._parse({data:e,path:i.path,parent:i})}unwrap(){return this._def.type}},_t=class s extends D{_parse(r){let{status:i,ctx:e}=this._processInputParams(r);if(e.common.async)return H(this,null,function*(){let n=yield this._def.in._parseAsync({data:e.data,path:e.path,parent:e});return n.status==="aborted"?k:n.status==="dirty"?(i.dirty(),Te(n.value)):this._def.out._parseAsync({data:n.value,path:e.path,parent:e})});{let t=this._def.in._parseSync({data:e.data,path:e.path,parent:e});return t.status==="aborted"?k:t.status==="dirty"?(i.dirty(),{status:"dirty",value:t.value}):this._def.out._parseSync({data:t.value,path:e.path,parent:e})}}static create(r,i){return new s({in:r,out:i,typeName:R.ZodPipeline})}},oi=(()=>{class s extends D{_parse(i){let e=this._def.innerType._parse(i),t=n=>(Se(n)&&(n.value=Object.freeze(n.value)),n);return Ye(e)?e.then(n=>t(n)):t(e)}unwrap(){return this._def.innerType}}return s.create=(r,i)=>new s(u({innerType:r,typeName:R.ZodReadonly},E(i))),s})();function Rs(s,r){let i=typeof s=="function"?s(r):typeof s=="string"?{message:s}:s;return typeof i=="string"?{message:i}:i}function Fs(s,r={},i){return s?Kt.create().superRefine((e,t)=>{let n=s(e);if(n instanceof Promise)return n.then(o=>{if(!o){let a=Rs(r,e),l=a.fatal??i??!0;t.addIssue(w(u({code:"custom"},a),{fatal:l}))}});if(!n){let o=Rs(r,e),a=o.fatal??i??!0;t.addIssue(w(u({code:"custom"},o),{fatal:a}))}}):Kt.create()}var So={object:Xe.lazycreate},R=(function(s){return s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly",s})(R||{});var wo=(s,r={message:`Input not instance of ${s.name}`})=>Fs(i=>i instanceof s,r),Ns=Gt.create,Us=Kr.create,bo=Ms.create,ko=Yr.create,Vs=qr.create,Co=Xr.create,Ro=xs.create,Io=Gr.create,Eo=Jr.create,Do=Kt.create,xo=mt.create,To=Ae.create,Ao=Ts.create,Po=vt.create,Oo=Xe.create,Mo=Xe.strictCreate,Fo=Qr.create,No=Yt.create,Uo=ei.create,Vo=Ge.create,Lo=qt.create,jo=As.create,Wo=Ps.create,zo=Xt.create,Bo=ti.create,Ho=ri.create,$o=Jt.create,Zo=ii.create,Ko=Qt.create,Yo=Je.create,qo=we.create,Xo=Qe.create,Go=Je.createWithPreprocess,Jo=_t.create,Qo=()=>Ns().optional(),ea=()=>Us().optional(),ta=()=>Vs().optional(),ra={string:s=>Gt.create(w(u({},s),{coerce:!0})),number:s=>Kr.create(w(u({},s),{coerce:!0})),boolean:s=>qr.create(w(u({},s),{coerce:!0})),bigint:s=>Yr.create(w(u({},s),{coerce:!0})),date:s=>Xr.create(w(u({},s),{coerce:!0}))};var ia=k;var Pe={production:!0,serviceUrl:"https://d-cap-blog-backend---v2.whitepond-b96fee4b.westeurope.azurecontainerapps.io"};var sa=W.object({id:W.number(),title:W.string(),contentPreview:W.string(),author:W.string(),likes:W.number(),comments:W.number(),likedByMe:W.boolean(),createdByMe:W.boolean(),headerImageUrl:W.string().optional()}),na=W.array(sa),oa=W.object({data:na,pageIndex:W.number(),pageSize:W.number(),totalCount:W.number(),maxPageSize:W.number()}),er=class s{#e=c(zt);getBlogPosts(){return this.#e.get(`${Pe.serviceUrl}/entries`).pipe(P(r=>oa.parse(r)))}static \u0275fac=function(i){return new(i||s)};static \u0275prov=g({token:s,factory:s.\u0275fac,providedIn:"root"})};var tr=class s{handleError(r){let i=r.message?r.message:r.toString();this.postCustomData(r,i),Pe.production?window.location.href="/error":console.log("ERROR ->",r)}postCustomData(r,i){return H(this,null,function*(){try{yield fetch(`${Pe.serviceUrl}/api/report-error/client-fatal`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({"client-message":i||"","client-error":r.stack||""})})}catch(e){console.error("Failed to report error:",e)}})}static \u0275fac=function(i){return new(i||s)};static \u0275prov=g({token:s,factory:s.\u0275fac})};var Ls=()=>({provide:Fi,useClass:tr});var js=[{path:"error",component:Error}];var rr=class s{static \u0275fac=function(i){return new(i||s)};static \u0275cmp=G({type:s,selectors:[["PageNotFound"]],decls:2,vars:0,template:function(i,e){i&1&&(Ar(0,"h1"),_e(1,"Diese Seite konnte leider nicht gefunden werden."),Pr())},encapsulation:2,changeDetection:0})};var zs=[{path:"**",component:rr}];var Bs={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bits:6};var Hs={parse:function(r,i){return aa(r,Bs,i)},stringify:function(r,i){return la(r,Bs,i)}};function aa(s,r,i){var e;if(i===void 0&&(i={}),!r.codes){r.codes={};for(var t=0;t<r.chars.length;++t)r.codes[r.chars[t]]=t}if(!i.loose&&s.length*r.bits&7)throw new SyntaxError("Invalid padding");for(var n=s.length;s[n-1]==="=";)if(--n,!i.loose&&!((s.length-n)*r.bits&7))throw new SyntaxError("Invalid padding");for(var o=new((e=i.out)!=null?e:Uint8Array)(n*r.bits/8|0),a=0,l=0,d=0,h=0;h<n;++h){var f=r.codes[s[h]];if(f===void 0)throw new SyntaxError("Invalid character "+s[h]);l=l<<r.bits|f,a+=r.bits,a>=8&&(a-=8,o[d++]=255&l>>a)}if(a>=r.bits||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return o}function la(s,r,i){i===void 0&&(i={});for(var e=i,t=e.pad,n=t===void 0?!0:t,o=(1<<r.bits)-1,a="",l=0,d=0,h=0;h<s.length;++h)for(d=d<<8|255&s[h],l+=8;l>r.bits;)l-=r.bits,a+=r.chars[o&d>>l];if(l&&(a+=r.chars[o&d<<r.bits-l]),n)for(;a.length*r.bits&7;)a+="=";return a}function St(s,r){let e=!r?.manualCleanup?r?.injector?.get(Mt)??c(Mt):null,t=da(r?.equal),n;r?.requireSync?n=je({kind:0},{equal:t}):n=je({kind:1,value:r?.initialValue},{equal:t});let o,a=s.subscribe({next:l=>n.set({kind:1,value:l}),error:l=>{n.set({kind:2,error:l}),o?.()},complete:()=>{o?.()}});if(r?.requireSync&&n().kind===0)throw new Dr(601,!1);return o=e?.onDestroy(a.unsubscribe.bind(a)),te(()=>{let l=n();switch(l.kind){case 1:return l.value;case 2:throw l.error;case 0:throw new Dr(601,!1)}},{equal:r?.equal})}function da(s=Object.is){return(r,i)=>r.kind===1&&i.kind===1&&s(r.value,i.value)}var ir=class{},li=class{constructor(r){this.passedConfigs=r}loadConfigs(){return Array.isArray(this.passedConfigs)?y(this.passedConfigs):y([this.passedConfigs])}};function ha(s){if(!s?.config)throw new Error("No config provided!");return new li(s.config)}var $s=new ve("PASSED_CONFIG"),qs=(()=>{let r=class r{};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),ua=(()=>{let r=class r{logError(e,...t){console.error(e,...t)}logWarning(e,...t){console.warn(e,...t)}logDebug(e,...t){console.debug(e,...t)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),wt=(function(s){return s[s.None=0]="None",s[s.Debug=1]="Debug",s[s.Warn=2]="Warn",s[s.Error=3]="Error",s})(wt||{}),T=(()=>{let r=class r{constructor(){this.abstractLoggerService=c(qs)}logError(e,t,...n){if(this.loggingIsTurnedOff(e))return;let{configId:o}=e,a=this.isObject(t)?JSON.stringify(t):t;n&&n.length?this.abstractLoggerService.logError(`[ERROR] ${o} - ${a}`,...n):this.abstractLoggerService.logError(`[ERROR] ${o} - ${a}`)}logWarning(e,t,...n){if(!this.logLevelIsSet(e)||this.loggingIsTurnedOff(e)||!this.currentLogLevelIsEqualOrSmallerThan(e,wt.Warn))return;let{configId:o}=e,a=this.isObject(t)?JSON.stringify(t):t;n&&n.length?this.abstractLoggerService.logWarning(`[WARN] ${o} - ${a}`,...n):this.abstractLoggerService.logWarning(`[WARN] ${o} - ${a}`)}logDebug(e,t,...n){if(!e||!this.logLevelIsSet(e)||this.loggingIsTurnedOff(e)||!this.currentLogLevelIsEqualOrSmallerThan(e,wt.Debug))return;let{configId:o}=e,a=this.isObject(t)?JSON.stringify(t):t;n&&n.length?this.abstractLoggerService.logDebug(`[DEBUG] ${o} - ${a}`,...n):this.abstractLoggerService.logDebug(`[DEBUG] ${o} - ${a}`)}currentLogLevelIsEqualOrSmallerThan(e,t){let{logLevel:n}=e||{};return n?n<=t:!1}logLevelIsSet(e){let{logLevel:t}=e||{};return t===null?!1:t!==void 0}loggingIsTurnedOff(e){let{logLevel:t}=e||{};return t===wt.None}isObject(e){return Object.prototype.toString.call(e)==="[object Object]"}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Y=(function(s){return s[s.ConfigLoaded=0]="ConfigLoaded",s[s.CheckingAuth=1]="CheckingAuth",s[s.CheckingAuthFinished=2]="CheckingAuthFinished",s[s.CheckingAuthFinishedWithError=3]="CheckingAuthFinishedWithError",s[s.ConfigLoadingFailed=4]="ConfigLoadingFailed",s[s.CheckSessionReceived=5]="CheckSessionReceived",s[s.UserDataChanged=6]="UserDataChanged",s[s.NewAuthenticationResult=7]="NewAuthenticationResult",s[s.TokenExpired=8]="TokenExpired",s[s.IdTokenExpired=9]="IdTokenExpired",s[s.SilentRenewStarted=10]="SilentRenewStarted",s[s.SilentRenewFailed=11]="SilentRenewFailed",s})(Y||{}),Oe=(()=>{let r=class r{constructor(){this.notify=new Ti(1)}fireEvent(e,t){this.notify.next({type:e,value:t})}registerForEvents(){return this.notify.asObservable()}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Xs=(()=>{let r=class r{};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),fa=(()=>{let r=class r{constructor(){this.loggerService=c(T),this.abstractSecurityStorage=c(Xs)}read(e,t){let{configId:n}=t;if(!n)return this.loggerService.logDebug(t,`Wanted to read '${e}' but configId was '${n}'`),null;if(!this.hasStorage())return this.loggerService.logDebug(t,`Wanted to read '${e}' but Storage was undefined`),null;let o=this.abstractSecurityStorage.read(n);return o?JSON.parse(o):null}write(e,t){let{configId:n}=t;return n?this.hasStorage()?(e=e||null,this.abstractSecurityStorage.write(n,JSON.stringify(e)),!0):(this.loggerService.logDebug(t,"Wanted to write but Storage was falsy"),!1):(this.loggerService.logDebug(t,`Wanted to write but configId was '${n}'`),!1)}remove(e,t){return this.hasStorage()?(this.abstractSecurityStorage.remove(e),!0):(this.loggerService.logDebug(t,`Wanted to remove '${e}' but Storage was falsy`),!1)}clear(e){return this.hasStorage()?(this.abstractSecurityStorage.clear(),!0):(this.loggerService.logDebug(e,"Wanted to clear storage but Storage was falsy"),!1)}hasStorage(){return typeof Storage<"u"}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),L=(()=>{let r=class r{constructor(){this.browserStorageService=c(fa)}read(e,t){return(this.browserStorageService.read(e,t)||{})[e]}write(e,t,n){let o=this.browserStorageService.read(e,n)||{};return o[e]=t,this.browserStorageService.write(o,n)}remove(e,t){let n=this.browserStorageService.read(e,t)||{};delete n[e],this.browserStorageService.write(n,t)}clear(e){this.browserStorageService.clear(e)}resetStorageFlowData(e){this.remove("session_state",e),this.remove("storageSilentRenewRunning",e),this.remove("storageCodeFlowInProgress",e),this.remove("codeVerifier",e),this.remove("userData",e),this.remove("storageCustomParamsAuthRequest",e),this.remove("access_token_expires_at",e),this.remove("storageCustomParamsRefresh",e),this.remove("storageCustomParamsEndSession",e),this.remove("reusable_refresh_token",e)}resetAuthStateInStorage(e){this.remove("authzData",e),this.remove("reusable_refresh_token",e),this.remove("authnResult",e)}getAccessToken(e){return this.read("authzData",e)}getIdToken(e){return this.read("authnResult",e)?.id_token}getRefreshToken(e){let t=this.read("authnResult",e)?.refresh_token;return!t&&e.allowUnsafeReuseRefreshToken?this.read("reusable_refresh_token",e):t}getAuthenticationResult(e){return this.read("authnResult",e)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Gs=(()=>{let r=class r{extractJwk(e,t,n=!0){if(e.length===0)throw pa;let o=e.filter(a=>t?.kid?a.kid===t.kid:!0).filter(a=>t?.use?a.use===t.use:!0).filter(a=>t?.kty?a.kty===t.kty:!0);if(o.length===0&&n)throw ga;if(o.length>1&&t==null)throw ma;return o}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();function di(s){return Gs.name+": "+s}var pa={name:di("InvalidArgumentError"),message:"Array of keys was empty. Unable to extract"},ga={name:di("NoMatchingKeysError"),message:"No key found matching the spec"},ma={name:di("SeveralMatchingKeysError"),message:"More than one key found. Please use spec to filter"},Zs=3,nr=(()=>{let r=class r{constructor(){this.loggerService=c(T),this.document=c(F)}getTokenExpirationDate(e){if(!Object.prototype.hasOwnProperty.call(e,"exp"))return new Date(new Date().toUTCString());let t=new Date(0);return t.setUTCSeconds(e.exp),t}getSigningInputFromToken(e,t,n){if(!this.tokenIsValid(e,n))return"";let o=this.getHeaderFromToken(e,t,n),a=this.getPayloadFromToken(e,t,n);return[o,a].join(".")}getHeaderFromToken(e,t,n){return this.tokenIsValid(e,n)?this.getPartOfToken(e,0,t):{}}getPayloadFromToken(e,t,n){return n?this.tokenIsValid(e,n)?this.getPartOfToken(e,1,t):{}:{}}getSignatureFromToken(e,t,n){return this.tokenIsValid(e,n)?this.getPartOfToken(e,2,t):{}}getPartOfToken(e,t,n){let o=this.extractPartOfToken(e,t);if(n)return o;let a=this.urlBase64Decode(o);return JSON.parse(a)}urlBase64Decode(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("Illegal base64url string!")}let n=typeof this.document.defaultView<"u"?this.document.defaultView?.atob(t):Buffer.from(t,"base64").toString("binary");if(!n)return"";try{return decodeURIComponent(n.split("").map(o=>"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)).join(""))}catch{return n}}tokenIsValid(e,t){return e?e.includes(".")?e.split(".").length!==Zs?(this.loggerService.logError(t,`token '${e}' is not valid --> token has to have exactly ${Zs-1} dots`),!1):!0:(this.loggerService.logError(t,`token '${e}' is not valid --> no dots included`),!1):(this.loggerService.logError(t,`token '${e}' is not valid --> token falsy`),!1)}extractPartOfToken(e,t){return e.split(".")[t]}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),hi=(()=>{let r=class r{constructor(){this.document=c(F)}getCrypto(){return this.document.defaultView?.crypto||this.document.defaultView?.msCrypto}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),va=(()=>{let r=class r{constructor(){this.cryptoService=c(hi)}importVerificationKey(e,t){return this.cryptoService.getCrypto().subtle.importKey("jwk",e,t,!1,["verify"])}verifyKey(e,t,n,o){return this.cryptoService.getCrypto().subtle.verify(e,t,n,new TextEncoder().encode(o))}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Js=(()=>{let r=class r{constructor(){this.cryptoService=c(hi)}generateCodeChallenge(e){return this.calcHash(e).pipe(P(t=>this.base64UrlEncode(t)))}generateAtHash(e,t){return this.calcHash(e,t).pipe(P(n=>{let o=n.substr(0,n.length/2);return btoa(o).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}))}calcHash(e,t="SHA-256"){let n=new TextEncoder().encode(e);return xt(this.cryptoService.getCrypto().subtle.digest(t,n)).pipe(P(o=>{let a=o,l=Array.from(new Uint8Array(a));return this.toHashString(l)}))}toHashString(e){let t="";for(let n of e)t+=String.fromCharCode(n);return t}base64UrlEncode(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();function ya(s){switch(s.charAt(0)){case"R":return{name:"RSASSA-PKCS1-v1_5",hash:"SHA-256"};case"E":return s.includes("256")?{name:"ECDSA",hash:"SHA-256"}:s.includes("384")?{name:"ECDSA",hash:"SHA-384"}:null;default:return null}}function _a(s){switch(s.charAt(0)){case"R":return"RSA";case"E":return"EC";default:throw new Error("Cannot infer kty from alg: "+s)}}function Sa(s){switch(s.charAt(0)){case"R":return s.includes("256")?{name:"RSASSA-PKCS1-v1_5",hash:"SHA-256"}:s.includes("384")?{name:"RSASSA-PKCS1-v1_5",hash:"SHA-384"}:s.includes("512")?{name:"RSASSA-PKCS1-v1_5",hash:"SHA-512"}:null;case"E":return s.includes("256")?{name:"ECDSA",namedCurve:"P-256"}:s.includes("384")?{name:"ECDSA",namedCurve:"P-384"}:null;default:return null}}var or=(()=>{let r=class r{constructor(){this.keyAlgorithms=["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","PS256","PS384","PS512"],this.tokenHelperService=c(nr),this.loggerService=c(T),this.jwkExtractor=c(Gs),this.jwkWindowCryptoService=c(va),this.jwtWindowCryptoService=c(Js)}hasIdTokenExpired(e,t,n){let o=this.tokenHelperService.getPayloadFromToken(e,!1,t);return!this.validateIdTokenExpNotExpired(o,t,n)}validateIdTokenExpNotExpired(e,t,n){let o=this.tokenHelperService.getTokenExpirationDate(e);if(n=n||0,!o)return!1;let a=o.valueOf(),l=this.calculateNowWithOffset(n),d=a>l;return this.loggerService.logDebug(t,`Has idToken expired: ${!d} --> expires in ${this.millisToMinutesAndSeconds(a-l)} , ${new Date(a).toLocaleTimeString()} > ${new Date(l).toLocaleTimeString()}`),d}validateAccessTokenNotExpired(e,t,n){if(!e)return!0;n=n||0;let o=e.valueOf(),a=this.calculateNowWithOffset(n),l=o>a;return this.loggerService.logDebug(t,`Has accessToken expired: ${!l} --> expires in ${this.millisToMinutesAndSeconds(o-a)} , ${new Date(o).toLocaleTimeString()} > ${new Date(a).toLocaleTimeString()}`),l}validateRequiredIdToken(e,t){let n=!0;return Object.prototype.hasOwnProperty.call(e,"iss")||(n=!1,this.loggerService.logWarning(t,"iss is missing, this is required in the id_token")),Object.prototype.hasOwnProperty.call(e,"sub")||(n=!1,this.loggerService.logWarning(t,"sub is missing, this is required in the id_token")),Object.prototype.hasOwnProperty.call(e,"aud")||(n=!1,this.loggerService.logWarning(t,"aud is missing, this is required in the id_token")),Object.prototype.hasOwnProperty.call(e,"exp")||(n=!1,this.loggerService.logWarning(t,"exp is missing, this is required in the id_token")),Object.prototype.hasOwnProperty.call(e,"iat")||(n=!1,this.loggerService.logWarning(t,"iat is missing, this is required in the id_token")),n}validateIdTokenIatMaxOffset(e,t,n,o){if(n)return!0;if(!Object.prototype.hasOwnProperty.call(e,"iat"))return!1;let a=new Date(0);a.setUTCSeconds(e.iat),t=t||0;let d=new Date(new Date().toUTCString()).valueOf()-a.valueOf(),h=t*1e3;return this.loggerService.logDebug(o,`validate id token iat max offset ${d} < ${h}`),d>0?d<h:-d<h}validateIdTokenNonce(e,t,n,o){return!((e.nonce===void 0||n)&&t===r.refreshTokenNoncePlaceholder)&&e.nonce!==t?(this.loggerService.logDebug(o,"Validate_id_token_nonce failed, dataIdToken.nonce: "+e.nonce+" local_nonce:"+t),!1):!0}validateIdTokenIss(e,t,n){return e.iss!==t?(this.loggerService.logDebug(n,"Validate_id_token_iss failed, dataIdToken.iss: "+e.iss+" authWellKnownEndpoints issuer:"+t),!1):!0}validateIdTokenAud(e,t,n){return Array.isArray(e.aud)?e.aud.includes(t)?!0:(this.loggerService.logDebug(n,"Validate_id_token_aud array failed, dataIdToken.aud: "+e.aud+" client_id:"+t),!1):e.aud!==t?(this.loggerService.logDebug(n,"Validate_id_token_aud failed, dataIdToken.aud: "+e.aud+" client_id:"+t),!1):!0}validateIdTokenAzpExistsIfMoreThanOneAud(e){return e?!(Array.isArray(e.aud)&&e.aud.length>1&&!e.azp):!1}validateIdTokenAzpValid(e,t){return e?.azp?e.azp===t:!0}validateStateFromHashCallback(e,t,n){return e!==t?(this.loggerService.logDebug(n,"ValidateStateFromHashCallback failed, state: "+e+" local_state:"+t),!1):!0}validateSignatureIdToken(e,t,n){if(!e)return y(!0);if(!t||!t.keys)return y(!1);let o=this.tokenHelperService.getHeaderFromToken(e,!1,n);if(Object.keys(o).length===0&&o.constructor===Object)return this.loggerService.logWarning(n,"id token has no header data"),y(!1);let a=o.kid,l=o.alg,d=t.keys,h,f;if(!this.keyAlgorithms.includes(l))return this.loggerService.logWarning(n,"alg not supported",l),y(!1);let _=_a(l),C="sig";try{h=a?this.jwkExtractor.extractJwk(d,{kid:a,kty:_,use:C},!1):this.jwkExtractor.extractJwk(d,{kty:_,use:C},!1),h.length===0&&(h=a?this.jwkExtractor.extractJwk(d,{kid:a,kty:_}):this.jwkExtractor.extractJwk(d,{kty:_})),f=h[0]}catch(ie){return this.loggerService.logError(n,ie),y(!1)}let A=Sa(l),I=this.tokenHelperService.getSigningInputFromToken(e,!0,n),le=this.tokenHelperService.getSignatureFromToken(e,!0,n);return xt(this.jwkWindowCryptoService.importVerificationKey(f,A)).pipe(Ie(ie=>{let Ce=Hs.parse(le,{loose:!0}),ot=ya(l);return xt(this.jwkWindowCryptoService.verifyKey(ot,ie,Ce,I))}),X(ie=>{ie||this.loggerService.logWarning(n,"incorrect Signature, validation failed for id_token")}))}validateIdTokenAtHash(e,t,n,o){this.loggerService.logDebug(o,"at_hash from the server:"+t);let a="SHA-256";return n.includes("384")?a="SHA-384":n.includes("512")&&(a="SHA-512"),this.jwtWindowCryptoService.generateAtHash(""+e,a).pipe(Ie(l=>(this.loggerService.logDebug(o,"at_hash client validation not decoded:"+l),l===t?y(!0):this.jwtWindowCryptoService.generateAtHash(""+decodeURIComponent(e),a).pipe(P(d=>(this.loggerService.logDebug(o,"-gen access--"+l),d===t))))))}millisToMinutesAndSeconds(e){let t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return t+":"+(+n<10?"0":"")+n}calculateNowWithOffset(e){return new Date(new Date().toUTCString()).valueOf()+e*1e3}};r.refreshTokenNoncePlaceholder="--RefreshToken--",r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),wa={isAuthenticated:!1,allConfigsAuthenticated:[]},ae=(()=>{let r=class r{constructor(){this.storagePersistenceService=c(L),this.loggerService=c(T),this.publicEventsService=c(Oe),this.tokenValidationService=c(or),this.authenticatedInternal$=new Dt(wa)}get authenticated$(){return this.authenticatedInternal$.asObservable().pipe(Er())}setAuthenticatedAndFireEvent(e){let t=this.composeAuthenticatedResult(e);this.authenticatedInternal$.next(t)}setUnauthenticatedAndFireEvent(e,t){this.storagePersistenceService.resetAuthStateInStorage(e);let n=this.composeUnAuthenticatedResult(t);this.authenticatedInternal$.next(n)}updateAndPublishAuthState(e){this.publicEventsService.fireEvent(Y.NewAuthenticationResult,e)}setAuthorizationData(e,t,n,o){this.loggerService.logDebug(n,`storing the accessToken '${e}'`),this.storagePersistenceService.write("authzData",e,n),this.persistAccessTokenExpirationTime(t,n),this.setAuthenticatedAndFireEvent(o)}getAccessToken(e){if(!e||!this.isAuthenticated(e))return"";let t=this.storagePersistenceService.getAccessToken(e);return this.decodeURIComponentSafely(t)}getIdToken(e){if(!e||!this.isAuthenticated(e))return"";let t=this.storagePersistenceService.getIdToken(e);return this.decodeURIComponentSafely(t)}getRefreshToken(e){if(!e||!this.isAuthenticated(e))return"";let t=this.storagePersistenceService.getRefreshToken(e);return this.decodeURIComponentSafely(t)}getAuthenticationResult(e){return!e||!this.isAuthenticated(e)?null:this.storagePersistenceService.getAuthenticationResult(e)}areAuthStorageTokensValid(e){return!e||!this.isAuthenticated(e)?!1:this.hasIdTokenExpiredAndRenewCheckIsEnabled(e)?(this.loggerService.logDebug(e,"persisted idToken is expired"),!1):this.hasAccessTokenExpiredIfExpiryExists(e)?(this.loggerService.logDebug(e,"persisted accessToken is expired"),!1):(this.loggerService.logDebug(e,"persisted idToken and accessToken are valid"),!0)}hasIdTokenExpiredAndRenewCheckIsEnabled(e){let{renewTimeBeforeTokenExpiresInSeconds:t,triggerRefreshWhenIdTokenExpired:n,disableIdTokenValidation:o}=e;if(!n||o)return!1;let a=this.storagePersistenceService.getIdToken(e),l=this.tokenValidationService.hasIdTokenExpired(a,e,t);return l&&this.publicEventsService.fireEvent(Y.IdTokenExpired,l),l}hasAccessTokenExpiredIfExpiryExists(e){let{renewTimeBeforeTokenExpiresInSeconds:t}=e,n=this.storagePersistenceService.read("access_token_expires_at",e),a=!this.tokenValidationService.validateAccessTokenNotExpired(n,e,t);return a&&this.publicEventsService.fireEvent(Y.TokenExpired,a),a}isAuthenticated(e){if(!e)return b(()=>new Error("Please provide a configuration before setting up the module")),!1;let t=!!this.storagePersistenceService.getAccessToken(e),n=!!this.storagePersistenceService.getIdToken(e);return t&&n}decodeURIComponentSafely(e){return e?decodeURIComponent(e):""}persistAccessTokenExpirationTime(e,t){if(e?.expires_in){let n=new Date(new Date().toUTCString()).valueOf()+e.expires_in*1e3;this.storagePersistenceService.write("access_token_expires_at",n,t)}}composeAuthenticatedResult(e){if(e.length===1){let{configId:t}=e[0];return{isAuthenticated:!0,allConfigsAuthenticated:[{configId:t??"",isAuthenticated:!0}]}}return this.checkAllConfigsIfTheyAreAuthenticated(e)}composeUnAuthenticatedResult(e){if(e.length===1){let{configId:t}=e[0];return{isAuthenticated:!1,allConfigsAuthenticated:[{configId:t??"",isAuthenticated:!1}]}}return this.checkAllConfigsIfTheyAreAuthenticated(e)}checkAllConfigsIfTheyAreAuthenticated(e){let t=e.map(o=>({configId:o.configId??"",isAuthenticated:this.isAuthenticated(o)})),n=t.every(o=>o.isAuthenticated);return{allConfigsAuthenticated:t,isAuthenticated:n}}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),ai="redirect",ba=(()=>{let r=class r{constructor(){this.storageService=c(L),this.router=c($e)}checkSavedRedirectRouteAndNavigate(e){if(!e)return;let t=this.getStoredRedirectRoute(e);t!=null&&(this.deleteStoredRedirectRoute(e),this.router.navigateByUrl(t))}saveRedirectRoute(e,t){e&&this.storageService.write(ai,t,e)}getStoredRedirectRoute(e){return this.storageService.read(ai,e)}deleteStoredRedirectRoute(e){this.storageService.remove(ai,e)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),be=(()=>{let r=class r{isCurrentFlowCodeFlow(e){return this.currentFlowIs("code",e)}isCurrentFlowAnyImplicitFlow(e){return this.isCurrentFlowImplicitFlowWithAccessToken(e)||this.isCurrentFlowImplicitFlowWithoutAccessToken(e)}isCurrentFlowCodeFlowWithRefreshTokens(e){if(!e)return!1;let{useRefreshToken:t}=e;return this.isCurrentFlowCodeFlow(e)&&!!t}isCurrentFlowImplicitFlowWithAccessToken(e){return this.currentFlowIs("id_token token",e)}currentFlowIs(e,t){let{responseType:n}=t;return Array.isArray(e)?e.some(o=>n===o):n===e}isCurrentFlowImplicitFlowWithoutAccessToken(e){return this.currentFlowIs("id_token",e)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),ka=(()=>{let r=class r{constructor(){this.loggerService=c(T),this.cryptoService=c(hi)}createRandom(e,t){if(e<=0)return"";e>0&&e<7&&(this.loggerService.logWarning(t,`RandomService called with ${e} but 7 chars is the minimum, returning 10 chars`),e=10);let n=e-6,o=new Uint8Array(Math.floor(n/2)),a=this.cryptoService.getCrypto();return a&&a.getRandomValues(o),Array.from(o,this.toHex).join("")+this.randomString(7)}toHex(e){return("0"+e.toString(16)).substr(-2)}randomString(e){let t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=new Uint32Array(e),a=this.cryptoService.getCrypto();if(a){a.getRandomValues(o);for(let l=0;l<e;l++)t+=n[o[l]%n.length]}return t}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),q=(()=>{let r=class r{constructor(){this.loggerService=c(T),this.storagePersistenceService=c(L),this.randomService=c(ka)}createNonce(e){let t=this.randomService.createRandom(40,e);return this.loggerService.logDebug(e,"Nonce created. nonce:"+t),this.setNonce(t,e),t}setNonce(e,t){this.storagePersistenceService.write("authNonce",e,t)}getAuthStateControl(e){return e?this.storagePersistenceService.read("authStateControl",e):""}setAuthStateControl(e,t){return t?this.storagePersistenceService.write("authStateControl",e,t):!1}getExistingOrCreateAuthStateControl(e){let t=this.storagePersistenceService.read("authStateControl",e);return t||(t=this.randomService.createRandom(40,e),this.storagePersistenceService.write("authStateControl",t,e)),t}setSessionState(e,t){this.storagePersistenceService.write("session_state",e,t)}resetStorageFlowData(e){this.storagePersistenceService.resetStorageFlowData(e)}getCodeVerifier(e){return this.storagePersistenceService.read("codeVerifier",e)}createCodeVerifier(e){let t=this.randomService.createRandom(67,e);return this.storagePersistenceService.write("codeVerifier",t,e),t}isCodeFlowInProgress(e){return!!this.storagePersistenceService.read("storageCodeFlowInProgress",e)}setCodeFlowInProgress(e){this.storagePersistenceService.write("storageCodeFlowInProgress",!0,e)}resetCodeFlowInProgress(e){this.storagePersistenceService.write("storageCodeFlowInProgress",!1,e)}isSilentRenewRunning(e){let{configId:t,silentRenewTimeoutInSeconds:n}=e,o=this.getSilentRenewRunningStorageEntry(e);if(!o||o.state==="not-running")return!1;let a=(n??0)*1e3,l=Date.parse(o.dateOfLaunchedProcessUtc),d=Date.parse(new Date().toISOString());return Math.abs(d-l)>a?(this.loggerService.logDebug(e,"silent renew process is probably stuck, state will be reset.",t),this.resetSilentRenewRunning(e),!1):o.state==="running"}setSilentRenewRunning(e){let t={state:"running",dateOfLaunchedProcessUtc:new Date().toISOString()};this.storagePersistenceService.write("storageSilentRenewRunning",JSON.stringify(t),e)}resetSilentRenewRunning(e){e&&this.storagePersistenceService.write("storageSilentRenewRunning","",e)}getSilentRenewRunningStorageEntry(e){let t=this.storagePersistenceService.read("storageSilentRenewRunning",e);return t?JSON.parse(t):{dateOfLaunchedProcessUtc:"",state:"not-running"}}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),ci=class{encodeKey(r){return encodeURIComponent(r)}encodeValue(r){return encodeURIComponent(r)}decodeKey(r){return decodeURIComponent(r)}decodeValue(r){return decodeURIComponent(r)}},Ca=["code","state","token","id_token"],Ra="auth0.com",he=(()=>{let r=class r{constructor(){this.loggerService=c(T),this.flowsDataService=c(q),this.flowHelper=c(be),this.storagePersistenceService=c(L),this.jwtWindowCryptoService=c(Js)}getUrlParameter(e,t){if(!e||!t)return"";t=t.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");let o=new RegExp("[\\?&#]"+t+"=([^&#]*)").exec(e);return o===null?"":decodeURIComponent(o[1])}getUrlWithoutQueryParameters(e){let t=new URL(e.toString()),n=[];for(let o of t.searchParams.keys())n.push(o);return n.forEach(o=>{t.searchParams.delete(o)}),t}queryParametersExist(e,t){let n=!0;return e.forEach((o,a)=>{t.has(a)||(n=!1)}),n}isCallbackFromSts(e,t){if(t&&t.checkRedirectUrlWhenCheckingIfIsCallback){let n=new URL(e),o=this.getRedirectUrl(t);if(!o)return this.loggerService.logError(t,"UrlService.isCallbackFromSts: could not get redirectUrl from config, was: ",o),!1;let a=new URL(o),l=this.getUrlWithoutQueryParameters(a).toString(),d=this.getUrlWithoutQueryParameters(n).toString(),h=this.queryParametersExist(a.searchParams,n.searchParams);if(l!==d||!h)return this.loggerService.logDebug(t,"UrlService.isCallbackFromSts: configured redirectUrl does not match with the current url"),!1}return Ca.some(n=>!!this.getUrlParameter(e,n))}getRefreshSessionSilentRenewUrl(e,t){return this.flowHelper.isCurrentFlowCodeFlow(e)?this.createUrlCodeFlowWithSilentRenew(e,t):y(this.createUrlImplicitFlowWithSilentRenew(e,t))}getAuthorizeParUrl(e,t){let n=this.storagePersistenceService.read("authWellKnownEndPoints",t);if(!n)return this.loggerService.logError(t,"authWellKnownEndpoints is undefined"),null;let o=n.authorizationEndpoint;if(!o)return this.loggerService.logError(t,`Can not create an authorize URL when authorizationEndpoint is '${o}'`),null;let{clientId:a}=t;if(!a)return this.loggerService.logError(t,"getAuthorizeParUrl could not add clientId because it was: ",a),null;let l=o.split("?"),d=l[0],h=l[1],f=this.createHttpParams(h);return f=f.set("request_uri",e),f=f.append("client_id",a),`${d}?${f}`}getAuthorizeUrl(e,t){return e?this.flowHelper.isCurrentFlowCodeFlow(e)?this.createUrlCodeFlowAuthorize(e,t):y(this.createUrlImplicitFlowAuthorize(e,t)||""):y(null)}getEndSessionEndpoint(e){let n=this.storagePersistenceService.read("authWellKnownEndPoints",e)?.endSessionEndpoint;if(!n)return{url:"",existingParams:""};let o=n.split("?"),a=o[0],l=o[1]??"";return{url:a,existingParams:l}}getEndSessionUrl(e,t){if(!e)return null;let n=this.storagePersistenceService.getIdToken(e),{customParamsEndSessionRequest:o}=e,a=u(u({},o),t);return this.createEndSessionUrl(n,e,a)}createRevocationEndpointBodyAccessToken(e,t){let n=this.getClientId(t);if(!n)return null;let o=this.createHttpParams();return o=o.set("client_id",n),o=o.set("token",e),o=o.set("token_type_hint","access_token"),o.toString()}createRevocationEndpointBodyRefreshToken(e,t){let n=this.getClientId(t);if(!n)return null;let o=this.createHttpParams();return o=o.set("client_id",n),o=o.set("token",e),o=o.set("token_type_hint","refresh_token"),o.toString()}getRevocationEndpointUrl(e){let n=this.storagePersistenceService.read("authWellKnownEndPoints",e)?.revocationEndpoint;return n?n.split("?")[0]:null}createBodyForCodeFlowCodeRequest(e,t,n){let o=this.getClientId(t);if(!o)return null;let a=this.createHttpParams();if(a=a.set("grant_type","authorization_code"),a=a.set("client_id",o),!t.disablePkce){let h=this.flowsDataService.getCodeVerifier(t);if(!h)return this.loggerService.logError(t,"CodeVerifier is not set ",h),null;a=a.set("code_verifier",h)}a=a.set("code",e),n&&(a=this.appendCustomParams(u({},n),a));let l=this.getSilentRenewUrl(t);if(this.flowsDataService.isSilentRenewRunning(t)&&l)return a=a.set("redirect_uri",l),a.toString();let d=this.getRedirectUrl(t);return d?(a=a.set("redirect_uri",d),a.toString()):null}createBodyForCodeFlowRefreshTokensRequest(e,t,n){let o=this.getClientId(t);if(!o)return null;let a=this.createHttpParams();return a=a.set("grant_type","refresh_token"),a=a.set("client_id",o),a=a.set("refresh_token",e),n&&(a=this.appendCustomParams(u({},n),a)),a.toString()}createBodyForParCodeFlowRequest(e,t){let n=this.getRedirectUrl(e,t);if(!n)return y(null);let o=this.flowsDataService.getExistingOrCreateAuthStateControl(e),a=this.flowsDataService.createNonce(e);this.loggerService.logDebug(e,"Authorize created. adding myautostate: "+o);let l=this.flowsDataService.createCodeVerifier(e);return this.jwtWindowCryptoService.generateCodeChallenge(l).pipe(P(d=>{let{clientId:h,responseType:f,scope:_,hdParam:C,customParamsAuthRequest:A}=e,I=this.createHttpParams("");return I=I.set("client_id",h??""),I=I.append("redirect_uri",n),I=I.append("response_type",f??""),I=I.append("scope",_??""),I=I.append("nonce",a),I=I.append("state",o),I=I.append("code_challenge",d),I=I.append("code_challenge_method","S256"),C&&(I=I.append("hd",C)),A&&(I=this.appendCustomParams(u({},A),I)),t?.customParams&&(I=this.appendCustomParams(u({},t.customParams),I)),I.toString()}))}getPostLogoutRedirectUrl(e){let{postLogoutRedirectUri:t}=e;return t||(this.loggerService.logError(e,"could not get postLogoutRedirectUri, was: ",t),null)}createEndSessionUrl(e,t,n){if(this.isAuth0Endpoint(t))return this.composeAuth0Endpoint(t);let{url:o,existingParams:a}=this.getEndSessionEndpoint(t);if(!o)return null;let l=this.createHttpParams(a);e&&(l=l.set("id_token_hint",e));let d=this.getPostLogoutRedirectUrl(t);return d&&(l=l.append("post_logout_redirect_uri",d)),n&&(l=this.appendCustomParams(u({},n),l)),`${o}?${l}`}createAuthorizeUrl(e,t,n,o,a,l,d){let f=this.storagePersistenceService.read("authWellKnownEndPoints",a)?.authorizationEndpoint;if(!f)return this.loggerService.logError(a,`Can not create an authorize URL when authorizationEndpoint is '${f}'`),"";let{clientId:_,responseType:C,scope:A,hdParam:I,customParamsAuthRequest:le}=a;if(!_)return this.loggerService.logError(a,"createAuthorizeUrl could not add clientId because it was: ",_),"";if(!C)return this.loggerService.logError(a,"createAuthorizeUrl could not add responseType because it was: ",C),"";if(!A)return this.loggerService.logError(a,"createAuthorizeUrl could not add scope because it was: ",A),"";let ie=f.split("?"),Ce=ie[0],ot=ie[1],M=this.createHttpParams(ot);M=M.set("client_id",_),M=M.append("redirect_uri",t),M=M.append("response_type",C),M=M.append("scope",A),M=M.append("nonce",n),M=M.append("state",o),this.flowHelper.isCurrentFlowCodeFlow(a)&&(M=M.append("code_challenge",e),M=M.append("code_challenge_method","S256"));let xi=u(u({},le),d);return Object.keys(xi).length>0&&(M=this.appendCustomParams(u({},xi),M)),l&&(M=this.overWriteParam(M,"prompt",l)),I&&(M=M.append("hd",I)),`${Ce}?${M}`}createUrlImplicitFlowWithSilentRenew(e,t){let n=this.flowsDataService.getExistingOrCreateAuthStateControl(e),o=this.flowsDataService.createNonce(e),a=this.getSilentRenewUrl(e);return a?(this.loggerService.logDebug(e,"RefreshSession created. adding myautostate: ",n),this.storagePersistenceService.read("authWellKnownEndPoints",e)?this.createAuthorizeUrl("",a,o,n,e,"none",t):(this.loggerService.logError(e,"authWellKnownEndpoints is undefined"),null)):null}createUrlCodeFlowWithSilentRenew(e,t){let n=this.flowsDataService.getExistingOrCreateAuthStateControl(e),o=this.flowsDataService.createNonce(e);this.loggerService.logDebug(e,"RefreshSession created. adding myautostate: "+n);let a=this.flowsDataService.createCodeVerifier(e);return this.jwtWindowCryptoService.generateCodeChallenge(a).pipe(P(l=>{let d=this.getSilentRenewUrl(e);return d?this.storagePersistenceService.read("authWellKnownEndPoints",e)?this.createAuthorizeUrl(l,d,o,n,e,"none",t):(this.loggerService.logWarning(e,"authWellKnownEndpoints is undefined"),""):""}))}createUrlImplicitFlowAuthorize(e,t){let n=this.flowsDataService.getExistingOrCreateAuthStateControl(e),o=this.flowsDataService.createNonce(e);this.loggerService.logDebug(e,"Authorize created. adding myautostate: "+n);let a=this.getRedirectUrl(e,t);if(!a)return null;if(this.storagePersistenceService.read("authWellKnownEndPoints",e)){let{customParams:d}=t||{};return this.createAuthorizeUrl("",a,o,n,e,"",d)}return this.loggerService.logError(e,"authWellKnownEndpoints is undefined"),null}createUrlCodeFlowAuthorize(e,t){let n=this.flowsDataService.getExistingOrCreateAuthStateControl(e),o=this.flowsDataService.createNonce(e);this.loggerService.logDebug(e,"Authorize created. adding myautostate: "+n);let a=this.getRedirectUrl(e,t);return a?this.getCodeChallenge(e).pipe(P(l=>{if(this.storagePersistenceService.read("authWellKnownEndPoints",e)){let{customParams:h}=t||{};return this.createAuthorizeUrl(l,a,o,n,e,"",h)}return this.loggerService.logError(e,"authWellKnownEndpoints is undefined"),""})):y(null)}getCodeChallenge(e){if(e.disablePkce)return y("");let t=this.flowsDataService.createCodeVerifier(e);return this.jwtWindowCryptoService.generateCodeChallenge(t)}getRedirectUrl(e,t){let{redirectUrl:n}=e;return t?.redirectUrl&&(n=t.redirectUrl),n||(this.loggerService.logError(e,"could not get redirectUrl, was: ",n),null)}getSilentRenewUrl(e){let{silentRenewUrl:t}=e;return t||(this.loggerService.logError(e,"could not get silentRenewUrl, was: ",t),null)}getClientId(e){let{clientId:t}=e;return t||(this.loggerService.logError(e,"could not get clientId, was: ",t),null)}appendCustomParams(e,t){for(let[n,o]of Object.entries(u({},e)))t=t.append(n,o.toString());return t}overWriteParam(e,t,n){return e.set(t,n)}createHttpParams(e){return e=e??"",new Wt({fromString:e,encoder:new ci})}isAuth0Endpoint(e){let{authority:t,useCustomAuth0Domain:n}=e;return t?t.endsWith(Ra)||!!n:!1}composeAuth0Endpoint(e){let{authority:t,clientId:n}=e,o=this.getPostLogoutRedirectUrl(e);return`${t}/v2/logout?client_id=${n}&returnTo=${o}`}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Ia=(()=>{let r=class r{constructor(){this.http=c(zt)}get(e,t){return this.http.get(e,t)}post(e,t,n){return this.http.post(e,t,n)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Ea="ngsw-bypass",Me=(()=>{let r=class r{constructor(){this.httpClient=c(Ia)}get(e,t,n){let o=this.prepareHeaders(n),a=this.prepareParams(t);return this.httpClient.get(e,{headers:o,params:a})}post(e,t,n,o){let a=o||this.prepareHeaders(),l=this.prepareParams(n);return this.httpClient.post(e??"",t,{headers:a,params:l})}prepareHeaders(e){let t=new He;return t=t.set("Accept","application/json"),e&&(t=t.set("Authorization","Bearer "+decodeURIComponent(e))),t}prepareParams(e){let t=new Wt,{ngswBypass:n}=e;return n&&(t=t.set(Ea,"")),t}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Qs=s=>!!s&&s instanceof Qi&&(s.error instanceof ProgressEvent&&s.error.type==="error"||s.status===0&&!!s.error),Da=(()=>{let r=class r{constructor(){this.urlService=c(he),this.loggerService=c(T),this.tokenValidationService=c(or),this.flowsDataService=c(q),this.storagePersistenceService=c(L),this.dataService=c(Me)}codeFlowCallback(e,t){let n=this.urlService.getUrlParameter(e,"code"),o=this.urlService.getUrlParameter(e,"state"),a=this.urlService.getUrlParameter(e,"session_state");return o?n?(this.loggerService.logDebug(t,"running validation for callback",e),y({code:n,refreshToken:"",state:o,sessionState:a,authResult:null,isRenewProcess:!1,jwtKeys:null,validationResult:null,existingIdToken:null})):(this.loggerService.logDebug(t,"no code in url"),b(()=>new Error("no code in url"))):(this.loggerService.logDebug(t,"no state in url"),b(()=>new Error("no state in url")))}codeFlowCodeRequest(e,t){let n=this.flowsDataService.getAuthStateControl(t);if(!this.tokenValidationService.validateStateFromHashCallback(e.state,n,t))return b(()=>new Error("codeFlowCodeRequest incorrect state"));let l=this.storagePersistenceService.read("authWellKnownEndPoints",t)?.tokenEndpoint;if(!l)return b(()=>new Error("Token Endpoint not defined"));let d=new He;d=d.set("Content-Type","application/x-www-form-urlencoded");let h=this.urlService.createBodyForCodeFlowCodeRequest(e.code,t,t?.customParamsCodeRequest);return this.dataService.post(l,h,t,d).pipe(U(f=>{if(f){let _=w(u({},f),{state:e.state,session_state:e.sessionState});e.authResult=_}return y(e)}),Pt(f=>this.handleRefreshRetry(f,t)),j(f=>{let{authority:_}=t,C=`OidcService code request ${_}`;return this.loggerService.logError(t,C,f),b(()=>new Error(C))}))}handleRefreshRetry(e,t){return e.pipe(Ie(n=>{if(Qs(n)){let{authority:o,refreshTokenRetryInSeconds:a}=t,l=`OidcService code request ${o} - no internet connection`;return this.loggerService.logWarning(t,l,n),At((a??0)*1e3)}return b(()=>n)}))}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),N=(function(s){return s.NotSet="NotSet",s.StatesDoNotMatch="StatesDoNotMatch",s.SignatureFailed="SignatureFailed",s.IncorrectNonce="IncorrectNonce",s.RequiredPropertyMissing="RequiredPropertyMissing",s.MaxOffsetExpired="MaxOffsetExpired",s.IssDoesNotMatchIssuer="IssDoesNotMatchIssuer",s.NoAuthWellKnownEndPoints="NoAuthWellKnownEndPoints",s.IncorrectAud="IncorrectAud",s.IncorrectIdTokenClaimsAfterRefresh="IncorrectIdTokenClaimsAfterRefresh",s.IncorrectAzp="IncorrectAzp",s.TokenExpired="TokenExpired",s.IncorrectAtHash="IncorrectAtHash",s.Ok="Ok",s.LoginRequired="LoginRequired",s.SecureTokenServerError="SecureTokenServerError",s})(N||{}),xa={userData:null,allUserData:[]},et=(()=>{let r=class r{constructor(){this.userDataInternal$=new Dt(xa),this.loggerService=c(T),this.tokenHelperService=c(nr),this.flowHelper=c(be),this.oidcDataService=c(Me),this.storagePersistenceService=c(L),this.eventService=c(Oe)}get userData$(){return this.userDataInternal$.asObservable()}getAndPersistUserDataInStore(e,t,n=!1,o,a){o=o||this.storagePersistenceService.getIdToken(e),a=a||this.tokenHelperService.getPayloadFromToken(o,!1,e);let l=this.getUserDataFromStore(e),d=!!l,h=this.flowHelper.isCurrentFlowImplicitFlowWithAccessToken(e),f=this.flowHelper.isCurrentFlowCodeFlow(e),_=this.storagePersistenceService.getAccessToken(e);if(!(h||f))return this.loggerService.logDebug(e,`authCallback idToken flow with accessToken ${_}`),this.setUserDataToStore(a,e,t),y(a);let{renewUserInfoAfterTokenRenew:C}=e;return!n||C||!d?this.getUserDataOidcFlowAndSave(a.sub,e,t).pipe(U(A=>(this.loggerService.logDebug(e,"Received user data: ",A),A?(this.loggerService.logDebug(e,"accessToken: ",_),y(A)):b(()=>new Error("Received no user data, request failed"))))):y(l)}getUserDataFromStore(e){return e?this.storagePersistenceService.read("userData",e)||null:b(()=>new Error("Please provide a configuration before setting up the module"))}publishUserDataIfExists(e,t){let n=this.getUserDataFromStore(e);n&&this.fireUserDataEvent(e,t,n)}setUserDataToStore(e,t,n){this.storagePersistenceService.write("userData",e,t),this.fireUserDataEvent(t,n,e)}resetUserDataInStore(e,t){this.storagePersistenceService.remove("userData",e),this.fireUserDataEvent(e,t,null)}getUserDataOidcFlowAndSave(e,t,n){return this.getIdentityUserData(t).pipe(P(o=>this.validateUserDataSubIdToken(t,e,o?.sub)?(this.setUserDataToStore(o,t,n),o):(this.loggerService.logWarning(t,"User data sub does not match sub in id_token, resetting"),this.resetUserDataInStore(t,n),null)))}getIdentityUserData(e){let t=this.storagePersistenceService.getAccessToken(e),n=this.storagePersistenceService.read("authWellKnownEndPoints",e);if(!n)return this.loggerService.logWarning(e,"init check session: authWellKnownEndpoints is undefined"),b(()=>new Error("authWellKnownEndpoints is undefined"));let o=n.userInfoEndpoint;return o?this.oidcDataService.get(o,e,t).pipe(Le(2)):(this.loggerService.logError(e,"init check session: authWellKnownEndpoints.userinfo_endpoint is undefined; set auto_userinfo = false in config"),b(()=>new Error("authWellKnownEndpoints.userinfo_endpoint is undefined")))}validateUserDataSubIdToken(e,t,n){return!t||!n?!1:t.toString()!==n.toString()?(this.loggerService.logDebug(e,"validateUserDataSubIdToken failed",t,n),!1):!0}fireUserDataEvent(e,t,n){let o=this.composeSingleOrMultipleUserDataObject(e,t,n);this.userDataInternal$.next(o);let{configId:a}=e;this.eventService.fireEvent(Y.UserDataChanged,{configId:a,userData:n})}composeSingleOrMultipleUserDataObject(e,t,n){if(!(t.length>1)){let{configId:l}=e;return this.composeSingleUserDataResult(l??"",n)}return{userData:null,allUserData:t.map(l=>{let d=e.configId??"",h=l.configId??"";if(this.currentConfigIsToUpdate(d,l))return{configId:h,userData:n};let f=this.storagePersistenceService.read("userData",l)||null;return{configId:h,userData:f}})}}composeSingleUserDataResult(e,t){return{userData:t,allUserData:[{configId:e,userData:t}]}}currentConfigIsToUpdate(e,t){return t.configId===e}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),ke=(()=>{let r=class r{constructor(){this.loggerService=c(T),this.userService=c(et),this.flowsDataService=c(q),this.authStateService=c(ae)}resetAuthorizationData(e,t){e&&(this.userService.resetUserDataInStore(e,t),this.flowsDataService.resetStorageFlowData(e),this.authStateService.setUnauthenticatedAndFireEvent(e,t),this.loggerService.logDebug(e,"Local Login information cleaned up and event fired"))}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Ta=(()=>{let r=class r{constructor(){this.loggerService=c(T),this.storagePersistenceService=c(L),this.dataService=c(Me)}getSigningKeys(e){let n=this.storagePersistenceService.read("authWellKnownEndPoints",e)?.jwksUri;if(!n){let o=`getSigningKeys: authWellKnownEndpoints.jwksUri is: '${n}'`;return this.loggerService.logWarning(e,o),b(()=>new Error(o))}return this.loggerService.logDebug(e,"Getting signinkeys from ",n),this.dataService.get(n,e).pipe(Le(2),j(o=>this.handleErrorGetSigningKeys(o,e)))}handleErrorGetSigningKeys(e,t){let n="";if(e instanceof Ji){let o=e.body||{},a=JSON.stringify(o),{status:l,statusText:d}=e;n=`${l||""} - ${d||""} ${a||""}`}else{let{message:o}=e;n=o||`${e}`}return this.loggerService.logError(t,n),b(()=>new Error(n))}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Ks="jwtKeys",Aa=(()=>{let r=class r{constructor(){this.loggerService=c(T),this.authStateService=c(ae),this.flowsDataService=c(q),this.signInKeyDataService=c(Ta),this.storagePersistenceService=c(L),this.resetAuthDataService=c(ke),this.document=c(F)}callbackHistoryAndResetJwtKeys(e,t,n){let o=u({},e.authResult);if(!this.responseHasIdToken(e)){let a=this.storagePersistenceService.getIdToken(t);o=w(u({},o),{id_token:a})}if(this.storagePersistenceService.write("authnResult",o,t),t.allowUnsafeReuseRefreshToken&&e.authResult?.refresh_token&&this.storagePersistenceService.write("reusable_refresh_token",e.authResult.refresh_token,t),this.historyCleanUpTurnedOn(t)&&!e.isRenewProcess?this.resetBrowserHistory():this.loggerService.logDebug(t,"history clean up inactive"),e.authResult?.error){let a=`AuthCallback AuthResult came with error: ${e.authResult.error}`;return this.loggerService.logDebug(t,a),this.resetAuthDataService.resetAuthorizationData(t,n),this.flowsDataService.setNonce("",t),this.handleResultErrorFromCallback(e.authResult,e.isRenewProcess,t.configId),b(()=>new Error(a))}return this.loggerService.logDebug(t,`AuthResult '${JSON.stringify(e.authResult,null,2)}'.
      AuthCallback created, begin token validation`),this.signInKeyDataService.getSigningKeys(t).pipe(X(a=>this.storeSigningKeys(a,t)),j(a=>{let l=this.readSigningKeys(t);return l?(this.loggerService.logWarning(t,"Failed to retrieve signing keys, fallback to stored keys"),y(l)):b(()=>new Error(a))}),U(a=>{if(a)return e.jwtKeys=a,y(e);let l="Failed to retrieve signing key";return this.loggerService.logWarning(t,l),b(()=>new Error(l))}),j(a=>{let l=`Failed to retrieve signing key with error: ${a}`;return this.loggerService.logWarning(t,l),b(()=>new Error(l))}))}responseHasIdToken(e){return!!e?.authResult?.id_token}handleResultErrorFromCallback(e,t,n){let o=N.SecureTokenServerError;e&&typeof e=="object"&&"error"in e&&e.error==="login_required"&&(o=N.LoginRequired),this.authStateService.updateAndPublishAuthState({isAuthenticated:!1,validationResult:o,isRenewProcess:t,configId:n})}historyCleanUpTurnedOn(e){let{historyCleanupOff:t}=e;return!t}resetBrowserHistory(){this.document.defaultView?.history.replaceState({},this.document.title,this.document.defaultView.location.origin+this.document.defaultView.location.pathname)}storeSigningKeys(e,t){this.storagePersistenceService.write(Ks,e,t)}readSigningKeys(e){return this.storagePersistenceService.read(Ks,e)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Pa=(()=>{let r=class r{constructor(){this.loggerService=c(T),this.resetAuthDataService=c(ke),this.flowsDataService=c(q),this.document=c(F)}implicitFlowCallback(e,t,n){let o=this.flowsDataService.isSilentRenewRunning(e);this.loggerService.logDebug(e,"BEGIN callback, no auth data"),o||this.resetAuthDataService.resetAuthorizationData(e,t),n=n||this.document.location.hash.substring(1);let l={code:"",refreshToken:"",state:"",sessionState:null,authResult:n.split("&").reduce((d,h)=>{let f=h.split("=");return d[f.shift()]=f.join("="),d},{}),isRenewProcess:o,jwtKeys:null,validationResult:null,existingIdToken:null};return y(l)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Oa=(()=>{let r=class r{constructor(){this.loggerService=c(T),this.authStateService=c(ae),this.flowsDataService=c(q)}refreshSessionWithRefreshTokens(e){let t=this.flowsDataService.getExistingOrCreateAuthStateControl(e);this.loggerService.logDebug(e,"RefreshSession created. Adding myautostate: "+t);let n=this.authStateService.getRefreshToken(e),o=this.authStateService.getIdToken(e);if(n){let a={code:"",refreshToken:n,state:t,sessionState:null,authResult:null,isRenewProcess:!0,jwtKeys:null,validationResult:null,existingIdToken:o};return this.loggerService.logDebug(e,"found refresh code, obtaining new credentials with refresh code"),this.flowsDataService.setNonce(or.refreshTokenNoncePlaceholder,e),y(a)}else{let a="no refresh token found, please login";return this.loggerService.logError(e,a),b(()=>new Error(a))}}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Ma=(()=>{let r=class r{constructor(){this.urlService=c(he),this.loggerService=c(T),this.dataService=c(Me),this.storagePersistenceService=c(L)}refreshTokensRequestTokens(e,t,n){let o=new He;o=o.set("Content-Type","application/x-www-form-urlencoded");let l=this.storagePersistenceService.read("authWellKnownEndPoints",t)?.tokenEndpoint;if(!l)return b(()=>new Error("Token Endpoint not defined"));let d=this.urlService.createBodyForCodeFlowRefreshTokensRequest(e.refreshToken,t,n);return this.dataService.post(l,d,t,o).pipe(U(h=>(this.loggerService.logDebug(t,`token refresh response: ${h}`),h&&(h.state=e.state),e.authResult=h,y(e))),Pt(h=>this.handleRefreshRetry(h,t)),j(h=>{let{authority:f}=t,_=`OidcService code request ${f}`;return this.loggerService.logError(t,_,h),b(()=>new Error(_))}))}handleRefreshRetry(e,t){return e.pipe(Ie(n=>{if(Qs(n)){let{authority:o,refreshTokenRetryInSeconds:a}=t,l=`OidcService code request ${o} - no internet connection`;return this.loggerService.logWarning(t,l,n),At((a??0)*1e3)}return b(()=>n)}))}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Fa=(()=>{let r=class r{isStringEqualOrNonOrderedArrayEqual(e,t){return this.isNullOrUndefined(e)||this.isNullOrUndefined(t)||this.oneValueIsStringAndTheOtherIsArray(e,t)?!1:this.bothValuesAreStrings(e,t)?e===t:this.arraysHaveEqualContent(e,t)}areEqual(e,t){if(!e||!t)return!1;if(this.bothValuesAreArrays(e,t))return this.arraysStrictEqual(e,t);if(this.bothValuesAreStrings(e,t))return e===t;if(this.bothValuesAreObjects(e,t))return JSON.stringify(e).toLowerCase()===JSON.stringify(t).toLowerCase();if(this.oneValueIsStringAndTheOtherIsArray(e,t)){if(Array.isArray(e)&&this.valueIsString(t))return e[0]===t;if(Array.isArray(t)&&this.valueIsString(e))return t[0]===e}return e===t}oneValueIsStringAndTheOtherIsArray(e,t){return Array.isArray(e)&&this.valueIsString(t)||Array.isArray(t)&&this.valueIsString(e)}bothValuesAreObjects(e,t){return this.valueIsObject(e)&&this.valueIsObject(t)}bothValuesAreStrings(e,t){return this.valueIsString(e)&&this.valueIsString(t)}bothValuesAreArrays(e,t){return Array.isArray(e)&&Array.isArray(t)}valueIsString(e){return typeof e=="string"||e instanceof String}valueIsObject(e){return typeof e=="object"}arraysStrictEqual(e,t){if(e.length!==t.length)return!1;for(let n=e.length;n--;)if(e[n]!==t[n])return!1;return!0}arraysHaveEqualContent(e,t){return e.length!==t.length?!1:e.some(n=>t.includes(n))}isNullOrUndefined(e){return e==null}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),sr=class{constructor(r="",i="",e=!1,t={at_hash:""},n=N.NotSet){this.accessToken=r,this.idToken=i,this.authResponseIsValid=e,this.decodedIdToken=t,this.state=n}},Na=(()=>{let r=class r{constructor(){this.storagePersistenceService=c(L),this.tokenValidationService=c(or),this.tokenHelperService=c(nr),this.loggerService=c(T),this.equalityService=c(Fa),this.flowHelper=c(be)}getValidatedStateResult(e,t){let n=!!e.authResult?.error;return!!!e||n?y(new sr("","",!1,{})):this.validateState(e,t)}validateState(e,t){let n=new sr,o=this.storagePersistenceService.read("authStateControl",t);if(!this.tokenValidationService.validateStateFromHashCallback(e.authResult?.state,o,t))return this.loggerService.logWarning(t,"authCallback incorrect state"),n.state=N.StatesDoNotMatch,this.handleUnsuccessfulValidation(t),y(n);let a=this.flowHelper.isCurrentFlowImplicitFlowWithAccessToken(t),l=this.flowHelper.isCurrentFlowCodeFlow(t);if((a||l)&&(n.accessToken=e.authResult?.access_token??""),t.disableIdTokenValidation)return n.state=N.Ok,n.authResponseIsValid=!0,y(n);let h=e.isRenewProcess&&!!e.refreshToken,f=!!e.authResult?.id_token;if(h&&!f)return n.state=N.Ok,n.authResponseIsValid=!0,y(n);if(f){let{clientId:_,issValidationOff:C,maxIdTokenIatOffsetAllowedInSeconds:A,disableIatOffsetValidation:I,ignoreNonceAfterRefresh:le,renewTimeBeforeTokenExpiresInSeconds:ie}=t;return n.idToken=e.authResult?.id_token??"",n.decodedIdToken=this.tokenHelperService.getPayloadFromToken(n.idToken,!1,t),this.tokenValidationService.validateSignatureIdToken(n.idToken,e.jwtKeys,t).pipe(Ie(Ce=>{if(!Ce)return this.loggerService.logDebug(t,"authCallback Signature validation failed id_token"),n.state=N.SignatureFailed,this.handleUnsuccessfulValidation(t),y(n);let ot=this.storagePersistenceService.read("authNonce",t);if(!this.tokenValidationService.validateIdTokenNonce(n.decodedIdToken,ot,!!le,t))return this.loggerService.logWarning(t,"authCallback incorrect nonce, did you call the checkAuth() method multiple times?"),n.state=N.IncorrectNonce,this.handleUnsuccessfulValidation(t),y(n);if(!this.tokenValidationService.validateRequiredIdToken(n.decodedIdToken,t))return this.loggerService.logDebug(t,"authCallback Validation, one of the REQUIRED properties missing from id_token"),n.state=N.RequiredPropertyMissing,this.handleUnsuccessfulValidation(t),y(n);if(!h&&!this.tokenValidationService.validateIdTokenIatMaxOffset(n.decodedIdToken,A??120,!!I,t))return this.loggerService.logWarning(t,"authCallback Validation, iat rejected id_token was issued too far away from the current time"),n.state=N.MaxOffsetExpired,this.handleUnsuccessfulValidation(t),y(n);let M=this.storagePersistenceService.read("authWellKnownEndPoints",t);if(M){if(C)this.loggerService.logDebug(t,"iss validation is turned off, this is not recommended!");else if(!C&&!this.tokenValidationService.validateIdTokenIss(n.decodedIdToken,M.issuer,t))return this.loggerService.logWarning(t,"authCallback incorrect iss does not match authWellKnownEndpoints issuer"),n.state=N.IssDoesNotMatchIssuer,this.handleUnsuccessfulValidation(t),y(n)}else return this.loggerService.logWarning(t,"authWellKnownEndpoints is undefined"),n.state=N.NoAuthWellKnownEndPoints,this.handleUnsuccessfulValidation(t),y(n);return this.tokenValidationService.validateIdTokenAud(n.decodedIdToken,_,t)?this.tokenValidationService.validateIdTokenAzpExistsIfMoreThanOneAud(n.decodedIdToken)?this.tokenValidationService.validateIdTokenAzpValid(n.decodedIdToken,_)?this.isIdTokenAfterRefreshTokenRequestValid(e,n.decodedIdToken,t)?!h&&!this.tokenValidationService.validateIdTokenExpNotExpired(n.decodedIdToken,t,ie)?(this.loggerService.logWarning(t,"authCallback id token expired"),n.state=N.TokenExpired,this.handleUnsuccessfulValidation(t),y(n)):this.validateDefault(a,l,n,t,e):(this.loggerService.logWarning(t,"authCallback pre, post id_token claims do not match in refresh"),n.state=N.IncorrectIdTokenClaimsAfterRefresh,this.handleUnsuccessfulValidation(t),y(n)):(this.loggerService.logWarning(t,"authCallback incorrect azp"),n.state=N.IncorrectAzp,this.handleUnsuccessfulValidation(t),y(n)):(this.loggerService.logWarning(t,"authCallback missing azp"),n.state=N.IncorrectAzp,this.handleUnsuccessfulValidation(t),y(n)):(this.loggerService.logWarning(t,"authCallback incorrect aud"),n.state=N.IncorrectAud,this.handleUnsuccessfulValidation(t),y(n))}))}else this.loggerService.logDebug(t,"No id_token found, skipping id_token validation");return this.validateDefault(a,l,n,t,e)}validateDefault(e,t,n,o,a){if(!e&&!t)return n.authResponseIsValid=!0,n.state=N.Ok,this.handleSuccessfulValidation(o),this.handleUnsuccessfulValidation(o),y(n);if(a.authResult?.id_token){let l=this.tokenHelperService.getHeaderFromToken(n.idToken,!1,o);if(t&&!n.decodedIdToken.at_hash)this.loggerService.logDebug(o,"Code Flow active, and no at_hash in the id_token, skipping check!");else return this.tokenValidationService.validateIdTokenAtHash(n.accessToken,n.decodedIdToken.at_hash,l.alg,o).pipe(P(d=>!d||!n.accessToken?(this.loggerService.logWarning(o,"authCallback incorrect at_hash"),n.state=N.IncorrectAtHash,this.handleUnsuccessfulValidation(o),n):(n.authResponseIsValid=!0,n.state=N.Ok,this.handleSuccessfulValidation(o),n)))}return n.authResponseIsValid=!0,n.state=N.Ok,this.handleSuccessfulValidation(o),y(n)}isIdTokenAfterRefreshTokenRequestValid(e,t,n){let{useRefreshToken:o,disableRefreshIdTokenAuthTimeValidation:a}=n;if(!o||!e.existingIdToken)return!0;let l=this.tokenHelperService.getPayloadFromToken(e.existingIdToken,!1,n);return l.iss!==t.iss?(this.loggerService.logDebug(n,`iss do not match: ${l.iss} ${t.iss}`),!1):l.azp!==t.azp?(this.loggerService.logDebug(n,`azp do not match: ${l.azp} ${t.azp}`),!1):l.sub!==t.sub?(this.loggerService.logDebug(n,`sub do not match: ${l.sub} ${t.sub}`),!1):this.equalityService.isStringEqualOrNonOrderedArrayEqual(l?.aud,t?.aud)?a?!0:l.auth_time!==t.auth_time?(this.loggerService.logDebug(n,`auth_time do not match: ${l.auth_time} ${t.auth_time}`),!1):!0:(this.loggerService.logDebug(n,`aud in new id_token is not valid: '${l?.aud}' '${t.aud}'`),!1)}handleSuccessfulValidation(e){let{autoCleanStateAfterAuthentication:t}=e;this.storagePersistenceService.write("authNonce",null,e),t&&this.storagePersistenceService.write("authStateControl","",e),this.loggerService.logDebug(e,"authCallback token(s) validated, continue")}handleUnsuccessfulValidation(e){let{autoCleanStateAfterAuthentication:t}=e;this.storagePersistenceService.write("authNonce",null,e),t&&this.storagePersistenceService.write("authStateControl","",e),this.loggerService.logDebug(e,"authCallback token(s) invalid")}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Ua=(()=>{let r=class r{constructor(){this.loggerService=c(T),this.stateValidationService=c(Na),this.authStateService=c(ae),this.resetAuthDataService=c(ke),this.document=c(F)}callbackStateValidation(e,t,n){return this.stateValidationService.getValidatedStateResult(e,t).pipe(P(o=>{if(e.validationResult=o,o.authResponseIsValid)return this.authStateService.setAuthorizationData(o.accessToken,e.authResult,t,n),e;{let a=`authorizedCallback, token(s) validation failed, resetting. Hash: ${this.document.location.hash}`;throw this.loggerService.logWarning(t,a),this.resetAuthDataService.resetAuthorizationData(t,n),this.publishUnauthorizedState(e.validationResult,e.isRenewProcess,t.configId),new Error(a)}}))}publishUnauthorizedState(e,t,n){this.authStateService.updateAndPublishAuthState({isAuthenticated:!1,validationResult:e.state,isRenewProcess:t,configId:n})}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Va=(()=>{let r=class r{constructor(){this.loggerService=c(T),this.authStateService=c(ae),this.flowsDataService=c(q),this.userService=c(et),this.resetAuthDataService=c(ke)}callbackUser(e,t,n){let{isRenewProcess:o,validationResult:a,authResult:l,refreshToken:d}=e,{autoUserInfo:h,renewUserInfoAfterTokenRenew:f}=t;return h?this.userService.getAndPersistUserDataInStore(t,n,o,a?.idToken,a?.decodedIdToken).pipe(U(_=>{if(_)return d||this.flowsDataService.setSessionState(l?.session_state,t),this.publishAuthState(a,o,t.configId),y(e);{this.resetAuthDataService.resetAuthorizationData(t,n),this.publishUnauthenticatedState(a,o,t.configId);let C=`Called for userData but they were ${_}`;return this.loggerService.logWarning(t,C),b(()=>new Error(C))}}),j(_=>{let C=`Failed to retrieve user info with error:  ${_}`;return this.loggerService.logWarning(t,C),b(()=>new Error(C))})):((!o||f)&&a?.decodedIdToken&&this.userService.setUserDataToStore(a.decodedIdToken,t,n),!o&&!d&&this.flowsDataService.setSessionState(l?.session_state,t),this.publishAuthState(a,o,t.configId),y(e))}publishAuthState(e,t,n){e&&this.authStateService.updateAndPublishAuthState({isAuthenticated:!0,validationResult:e.state,isRenewProcess:t,configId:n})}publishUnauthenticatedState(e,t,n){e&&this.authStateService.updateAndPublishAuthState({isAuthenticated:!1,validationResult:e.state,isRenewProcess:t,configId:n})}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),ar=(()=>{let r=class r{constructor(){this.codeFlowCallbackHandlerService=c(Da),this.implicitFlowCallbackHandlerService=c(Pa),this.historyJwtKeysCallbackHandlerService=c(Aa),this.userHandlerService=c(Va),this.stateValidationCallbackHandlerService=c(Ua),this.refreshSessionCallbackHandlerService=c(Oa),this.refreshTokenCallbackHandlerService=c(Ma)}processCodeFlowCallback(e,t,n){return this.codeFlowCallbackHandlerService.codeFlowCallback(e,t).pipe(O(o=>this.codeFlowCallbackHandlerService.codeFlowCodeRequest(o,t)),O(o=>this.historyJwtKeysCallbackHandlerService.callbackHistoryAndResetJwtKeys(o,t,n)),O(o=>this.stateValidationCallbackHandlerService.callbackStateValidation(o,t,n)),O(o=>this.userHandlerService.callbackUser(o,t,n)))}processSilentRenewCodeFlowCallback(e,t,n){return this.codeFlowCallbackHandlerService.codeFlowCodeRequest(e,t).pipe(O(o=>this.historyJwtKeysCallbackHandlerService.callbackHistoryAndResetJwtKeys(o,t,n)),O(o=>this.stateValidationCallbackHandlerService.callbackStateValidation(o,t,n)),O(o=>this.userHandlerService.callbackUser(o,t,n)))}processImplicitFlowCallback(e,t,n){return this.implicitFlowCallbackHandlerService.implicitFlowCallback(e,t,n).pipe(O(o=>this.historyJwtKeysCallbackHandlerService.callbackHistoryAndResetJwtKeys(o,e,t)),O(o=>this.stateValidationCallbackHandlerService.callbackStateValidation(o,e,t)),O(o=>this.userHandlerService.callbackUser(o,e,t)))}processRefreshToken(e,t,n){return this.refreshSessionCallbackHandlerService.refreshSessionWithRefreshTokens(e).pipe(O(o=>this.refreshTokenCallbackHandlerService.refreshTokensRequestTokens(o,e,n)),O(o=>this.historyJwtKeysCallbackHandlerService.callbackHistoryAndResetJwtKeys(o,e,t)),O(o=>this.stateValidationCallbackHandlerService.callbackStateValidation(o,e,t)),O(o=>this.userHandlerService.callbackUser(o,e,t)))}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),bt=(()=>{let r=class r{constructor(){this.runTokenValidationRunning=null,this.zone=c(K),this.document=c(F)}isTokenValidationRunning(){return!!this.runTokenValidationRunning}stopPeriodicTokenCheck(){this.runTokenValidationRunning&&(this.runTokenValidationRunning.unsubscribe(),this.runTokenValidationRunning=null)}startPeriodicTokenCheck(e){let t=e*1e3;return new Re(n=>{let o;return this.zone.runOutsideAngular(()=>{o=this.document?.defaultView?.setInterval(()=>this.zone.run(()=>n.next()),t)}),()=>{clearInterval(o)}})}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),La=(()=>{let r=class r{constructor(){this.flowsService=c(ar),this.router=c($e),this.flowsDataService=c(q),this.intervalService=c(bt)}authenticatedCallbackWithCode(e,t,n){let o=this.flowsDataService.isSilentRenewRunning(t),{triggerAuthorizationResultEvent:a}=t,l=t.postLoginRoute||"/",d=t.unauthorizedRoute||"/";return this.flowsService.processCodeFlowCallback(e,t,n).pipe(X(h=>{this.flowsDataService.resetCodeFlowInProgress(t),!a&&!h.isRenewProcess&&this.router.navigateByUrl(l)}),j(h=>(this.flowsDataService.resetSilentRenewRunning(t),this.flowsDataService.resetCodeFlowInProgress(t),this.intervalService.stopPeriodicTokenCheck(),!a&&!o&&this.router.navigateByUrl(d),b(()=>new Error(h)))))}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),en=(()=>{let r=class r{constructor(){this.flowsService=c(ar),this.router=c($e),this.flowsDataService=c(q),this.intervalService=c(bt)}authenticatedImplicitFlowCallback(e,t,n){let o=this.flowsDataService.isSilentRenewRunning(e),a=!!e.triggerAuthorizationResultEvent,l=e.postLoginRoute??"",d=e.unauthorizedRoute??"";return this.flowsService.processImplicitFlowCallback(e,t,n).pipe(X(h=>{!a&&!h.isRenewProcess&&this.router.navigateByUrl(l)}),j(h=>(this.flowsDataService.resetSilentRenewRunning(e),this.intervalService.stopPeriodicTokenCheck(),!a&&!o&&this.router.navigateByUrl(d),b(()=>new Error(h)))))}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),tn=(()=>{let r=class r{constructor(){this.urlService=c(he),this.flowHelper=c(be),this.implicitFlowCallbackService=c(en),this.codeFlowCallbackService=c(La),this.stsCallbackInternal$=new z}get stsCallback$(){return this.stsCallbackInternal$.asObservable()}isCallback(e,t){return e?this.urlService.isCallbackFromSts(e,t):!1}handleCallbackAndFireEvents(e,t,n){let o=new Re;if(this.flowHelper.isCurrentFlowCodeFlow(t))o=this.codeFlowCallbackService.authenticatedCallbackWithCode(e,t,n);else if(this.flowHelper.isCurrentFlowAnyImplicitFlow(t))if(e?.includes("#")){let a=e.substring(e.indexOf("#")+1);o=this.implicitFlowCallbackService.authenticatedImplicitFlowCallback(t,n,a)}else o=this.implicitFlowCallbackService.authenticatedImplicitFlowCallback(t,n);return o.pipe(X(()=>this.stsCallbackInternal$.next()))}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),ja=(()=>{let r=class r{constructor(){this.platformId=c(Ui)}isBrowser(){return Xi(this.platformId)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Wa="/.well-known/openid-configuration",za=(()=>{let r=class r{constructor(){this.loggerService=c(T),this.http=c(Me)}getWellKnownEndPointsForConfig(e){let{authWellknownEndpointUrl:t,authWellknownEndpoints:n={}}=e;if(!t){let o="no authWellknownEndpoint given!";return this.loggerService.logError(e,o),b(()=>new Error(o))}return this.getWellKnownDocument(t,e).pipe(P(o=>({issuer:o.issuer,jwksUri:o.jwks_uri,authorizationEndpoint:o.authorization_endpoint,tokenEndpoint:o.token_endpoint,userInfoEndpoint:o.userinfo_endpoint,endSessionEndpoint:o.end_session_endpoint,checkSessionIframe:o.check_session_iframe,revocationEndpoint:o.revocation_endpoint,introspectionEndpoint:o.introspection_endpoint,parEndpoint:o.pushed_authorization_request_endpoint})),P(o=>u(u({},o),n)))}getWellKnownDocument(e,t){let n=e,o=t.authWellknownUrlSuffix||Wa;return e.includes(o)||(n=`${e}${o}`),this.http.get(n,t).pipe(Le(2))}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),tt=(()=>{let r=class r{constructor(){this.dataService=c(za),this.publicEventsService=c(Oe),this.storagePersistenceService=c(L)}storeWellKnownEndpoints(e,t){this.storagePersistenceService.write("authWellKnownEndPoints",t,e)}queryAndStoreAuthWellKnownEndPoints(e){return e?this.dataService.getWellKnownEndPointsForConfig(e).pipe(X(t=>this.storeWellKnownEndpoints(e,t)),j(t=>(this.publicEventsService.fireEvent(Y.ConfigLoadingFailed,null),b(()=>new Error(t))))):b(()=>new Error("Please provide a configuration before setting up the module"))}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Ba={authority:"https://please_set",authWellknownEndpointUrl:"",authWellknownEndpoints:void 0,redirectUrl:"https://please_set",checkRedirectUrlWhenCheckingIfIsCallback:!0,clientId:"please_set",responseType:"code",scope:"openid email profile",hdParam:"",postLogoutRedirectUri:"https://please_set",startCheckSession:!1,silentRenew:!1,silentRenewUrl:"https://please_set",silentRenewTimeoutInSeconds:20,renewTimeBeforeTokenExpiresInSeconds:0,useRefreshToken:!1,usePushedAuthorisationRequests:!1,ignoreNonceAfterRefresh:!1,postLoginRoute:"/",forbiddenRoute:"/forbidden",unauthorizedRoute:"/unauthorized",autoUserInfo:!0,autoCleanStateAfterAuthentication:!0,triggerAuthorizationResultEvent:!1,logLevel:wt.Warn,issValidationOff:!1,historyCleanupOff:!1,maxIdTokenIatOffsetAllowedInSeconds:120,disableIatOffsetValidation:!1,customParamsAuthRequest:{},customParamsRefreshTokenRequest:{},customParamsEndSessionRequest:{},customParamsCodeRequest:{},disableRefreshIdTokenAuthTimeValidation:!1,triggerRefreshWhenIdTokenExpired:!0,tokenRefreshInSeconds:4,refreshTokenRetryInSeconds:3,ngswBypass:!1},rt={result:!0,messages:[],level:"none"},Ha=s=>s.authority?rt:{result:!1,messages:["The authority URL MUST be provided in the configuration! "],level:"error"},$a=s=>s.clientId?rt:{result:!1,messages:["The clientId is required and missing from your config!"],level:"error"},Za=s=>{if(!s)return"";let{authority:r,clientId:i,scope:e}=s;return`${r}${i}${e}`},Ka=s=>new Set(s).size!==s.length,Ya=s=>{let r=s.map(t=>Za(t));return r.some(t=>t==="")?{result:!1,messages:["Please make sure you add an object with a 'config' property: ....({ config }) instead of ...(config)"],level:"error"}:Ka(r)?{result:!1,messages:["You added multiple configs with the same authority, clientId and scope"],level:"warning"}:rt},qa=s=>s.redirectUrl?rt:{result:!1,messages:["The redirectUrl is required and missing from your config"],level:"error"},Xa=s=>{let r=s.silentRenew,i=s.useRefreshToken,e=s.silentRenewUrl;return r&&!i&&!e?{result:!1,messages:["Please provide a silent renew URL if using renew and not refresh tokens"],level:"error"}:rt},Ga=s=>{let r=s.useRefreshToken,i=s.silentRenew,t=(s.scope||"").split(" ").includes("offline_access");return r&&i&&!t?{result:!1,messages:["When using silent renew and refresh tokens please set the `offline_access` scope"],level:"warning"}:rt},Ja=[Ha,Ga,qa,$a,Xa],Qa=[Ya],el=(()=>{let r=class r{constructor(){this.loggerService=c(T)}validateConfigs(e){return this.validateConfigsInternal(e??[],Qa)}validateConfig(e){return this.validateConfigInternal(e,Ja)}validateConfigsInternal(e,t){if(e.length===0)return!1;let n=t.map(a=>a(e)),o=0;return e.forEach(a=>{let l=this.processValidationResultsAndGetErrorCount(n,a);o+=l}),o===0}validateConfigInternal(e,t){let n=t.map(a=>a(e));return this.processValidationResultsAndGetErrorCount(n,e)===0}processValidationResultsAndGetErrorCount(e,t){let n=e.filter(l=>l.messages.length>0),o=this.getAllMessagesOfType("error",n),a=this.getAllMessagesOfType("warning",n);return o.forEach(l=>this.loggerService.logError(t,l)),a.forEach(l=>this.loggerService.logWarning(t,l)),o.length}getAllMessagesOfType(e,t){return t.filter(o=>o.level===e).map(o=>o.messages).reduce((o,a)=>o.concat(a),[])}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),ui=(()=>{let r=class r{constructor(){this.configsInternal={},this.loggerService=c(T),this.publicEventsService=c(Oe),this.storagePersistenceService=c(L),this.platformProvider=c(ja),this.authWellKnownService=c(tt),this.loader=c(ir),this.configValidationService=c(el)}hasManyConfigs(){return Object.keys(this.configsInternal).length>1}getAllConfigurations(){return Object.values(this.configsInternal)}getOpenIDConfiguration(e){return this.configsAlreadySaved()?y(this.getConfig(e)):this.getOpenIDConfigurations(e).pipe(P(t=>t.currentConfig))}getOpenIDConfigurations(e){return this.loadConfigs().pipe(O(t=>this.prepareAndSaveConfigs(t)),P(t=>({allConfigs:t,currentConfig:this.getConfig(e)})))}hasAtLeastOneConfig(){return Object.keys(this.configsInternal).length>0}saveConfig(e){let{configId:t}=e;this.configsInternal[t]=e}loadConfigs(){return this.loader.loadConfigs()}configsAlreadySaved(){return this.hasAtLeastOneConfig()}getConfig(e){if(e){let n=this.configsInternal[e];return!n&&Zi()&&console.warn(`[angular-auth-oidc-client] No configuration found for config id '${e}'.`),n||null}let[,t]=Object.entries(this.configsInternal)[0]||[[null,null]];return t||null}prepareAndSaveConfigs(e){if(!this.configValidationService.validateConfigs(e))return y([]);this.createUniqueIds(e);let t=e.map(n=>this.handleConfig(n));return Ue(t).pipe(P(n=>n.filter(o=>!!o)),P(n=>n))}createUniqueIds(e){e.forEach((t,n)=>{t.configId||(t.configId=`${n}-${t.clientId}`)})}handleConfig(e){if(!this.configValidationService.validateConfig(e))return this.loggerService.logError(e,"Validation of config rejected with errors. Config is NOT set."),y(null);e.authWellknownEndpointUrl||(e.authWellknownEndpointUrl=e.authority);let t=this.prepareConfig(e);this.saveConfig(t);let n=this.enhanceConfigWithWellKnownEndpoint(t);return this.publicEventsService.fireEvent(Y.ConfigLoaded,n),y(t)}enhanceConfigWithWellKnownEndpoint(e){let t=this.storagePersistenceService.read("authWellKnownEndPoints",e);if(t)return e.authWellknownEndpoints=t,e;let n=e.authWellknownEndpoints;return n&&(this.authWellKnownService.storeWellKnownEndpoints(e,n),e.authWellknownEndpoints=n),e}prepareConfig(e){let t=u(u({},Ba),e);return this.setSpecialCases(t),t}setSpecialCases(e){this.platformProvider.isBrowser()||(e.startCheckSession=!1,e.silentRenew=!1,e.useRefreshToken=!1,e.usePushedAuthorisationRequests=!1)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),rn=(()=>{let r=class r{constructor(){this.document=c(F),this.loggerService=c(T)}getExistingIFrame(e){let t=this.getIFrameFromParentWindow(e);if(this.isIFrameElement(t))return t;let n=this.getIFrameFromWindow(e);return this.isIFrameElement(n)?n:null}addIFrameToWindowBody(e,t){let n=this.document.createElement("iframe");return n.id=e,n.title=e,this.loggerService.logDebug(t,n),n.style.display="none",this.document.body.appendChild(n),n}getIFrameFromParentWindow(e){try{let t=this.document.defaultView?.parent.document.getElementById(e);return this.isIFrameElement(t)?t:null}catch{return null}}getIFrameFromWindow(e){let t=this.document.getElementById(e);return this.isIFrameElement(t)?t:null}isIFrameElement(e){return!!e&&e instanceof HTMLIFrameElement}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),tl="myiFrameForSilentRenew",sn=s=>`${tl}_${s}`,fi=(()=>{let r=class r{constructor(){this.refreshSessionWithIFrameCompletedInternal$=new z,this.loggerService=c(T),this.iFrameService=c(rn),this.flowsService=c(ar),this.resetAuthDataService=c(ke),this.flowsDataService=c(q),this.authStateService=c(ae),this.flowHelper=c(be),this.implicitFlowCallbackService=c(en),this.intervalService=c(bt)}get refreshSessionWithIFrameCompleted$(){return this.refreshSessionWithIFrameCompletedInternal$.asObservable()}getOrCreateIframe(e){let t=sn(e.configId),n=this.iFrameService.getExistingIFrame(t);return n?(this.loggerService.logDebug(e,`Using existing iframe: ${t}`),n):(this.loggerService.logDebug(e,`Creating new iframe: ${t}`),this.iFrameService.addIFrameToWindowBody(t,e))}isSilentRenewConfigured(e){let{useRefreshToken:t,silentRenew:n}=e;return!t&&!!n}codeFlowCallbackSilentRenewIframe(e,t,n){let o=new Wt({fromString:e[1]}),a=o.get("error");if(a)return this.authStateService.updateAndPublishAuthState({isAuthenticated:!1,validationResult:N.LoginRequired,isRenewProcess:!0,configId:t.configId}),this.resetAuthDataService.resetAuthorizationData(t,n),this.flowsDataService.setNonce("",t),this.intervalService.stopPeriodicTokenCheck(),b(()=>new Error(a));let l=o.get("code")??"",d=o.get("state")??"",h=o.get("session_state"),f={code:l,refreshToken:"",state:d,sessionState:h,authResult:null,isRenewProcess:!0,jwtKeys:null,validationResult:null,existingIdToken:null};return this.flowsService.processSilentRenewCodeFlowCallback(f,t,n).pipe(j(_=>(this.intervalService.stopPeriodicTokenCheck(),this.resetAuthDataService.resetAuthorizationData(t,n),b(()=>new Error(_)))))}silentRenewEventHandler(e,t,n){if(this.loggerService.logDebug(t,"silentRenewEventHandler"),!e.detail)return;let o;if(this.flowHelper.isCurrentFlowCodeFlow(t)){let l=e.detail.toString().split("?");o=this.codeFlowCallbackSilentRenewIframe(l,t,n)}else o=this.implicitFlowCallbackService.authenticatedImplicitFlowCallback(t,n,e.detail);o.subscribe({next:({authResult:l})=>{this.refreshSessionWithIFrameCompletedInternal$.next({authResult:l,configId:t.configId,success:!0}),this.flowsDataService.resetSilentRenewRunning(t)},error:l=>{this.loggerService.logError(t,"Error: "+l),this.refreshSessionWithIFrameCompletedInternal$.next({configId:t.configId,success:!1}),this.flowsDataService.resetSilentRenewRunning(t)}})}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),nn=(()=>{let r=class r{constructor(){this.renderer=c(fe).createRenderer(null,null),this.loggerService=c(T),this.urlService=c(he),this.silentRenewService=c(fi),this.document=c(F)}refreshSessionWithIframe(e,t,n){return this.loggerService.logDebug(e,"BEGIN refresh session Authorize Iframe renew"),this.urlService.getRefreshSessionSilentRenewUrl(e,n).pipe(U(o=>this.sendAuthorizeRequestUsingSilentRenew(o,e,t)))}sendAuthorizeRequestUsingSilentRenew(e,t,n){let o=this.silentRenewService.getOrCreateIframe(t);return this.initSilentRenewRequest(t,n),this.loggerService.logDebug(t,`sendAuthorizeRequestUsingSilentRenew for URL: ${e}`),new Re(a=>{let l=()=>{o.removeEventListener("load",l),this.loggerService.logDebug(t,"removed event listener from IFrame"),a.next(!0),a.complete()};o.addEventListener("load",l),o.contentWindow?.location.replace(e??"")})}initSilentRenewRequest(e,t){let n=Math.random();this.loggerService.logDebug(e,`Creating new silent renew handlers for config: ${e.configId}, instance: ${n}`);let o=this.renderer.listen("window","oidc-silent-renew-init",l=>{let d=l.detail;d.configId===e.configId&&d.instanceId!==n&&(this.loggerService.logDebug(e,`Destroying old handlers for config: ${e.configId} (old instance: ${n}, new instance: ${d.instanceId})`),o(),a())}),a=this.renderer.listen("window","oidc-silent-renew-message",l=>{if(this.shouldProcessRenewMessage(l,e)){let d=this.convertToLegacyEvent(l);this.silentRenewService.silentRenewEventHandler(d,e,t)}});this.document.defaultView?.dispatchEvent(new CustomEvent("oidc-silent-renew-init",{detail:{instanceId:n,configId:e.configId}}))}shouldProcessRenewMessage(e,t){if(!e?.detail)return this.loggerService.logDebug(t,`Silent renew event has no valid payload: ${e?.detail}`),!1;if(e.detail.srcFrameId){let n=sn(t.configId)===e.detail.srcFrameId;return this.loggerService.logDebug(t,`Silent renew event from frame: ${e.detail.srcFrameId}, current configId: ${t.configId}, processing: ${n}`),n}return this.loggerService.logDebug(t,"Silent renew event without srcFrameId - processing for backward compatibility"),!0}convertToLegacyEvent(e){return e?.detail?.url?new CustomEvent(e.type,{detail:e.detail.url}):e}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),on=(()=>{let r=class r{constructor(){this.loggerService=c(T),this.resetAuthDataService=c(ke),this.flowsService=c(ar),this.intervalService=c(bt)}refreshSessionWithRefreshTokens(e,t,n){this.loggerService.logDebug(e,"BEGIN refresh session Authorize");let o=!1;return this.flowsService.processRefreshToken(e,t,n).pipe(j(a=>(this.resetAuthDataService.resetAuthorizationData(e,t),o=!0,b(()=>new Error(a)))),Oi(()=>o&&this.intervalService.stopPeriodicTokenCheck()))}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),rl=(()=>{let r=class r{constructor(){this.resetAuthDataService=c(ke),this.flowHelper=c(be),this.flowsDataService=c(q),this.loggerService=c(T),this.userService=c(et),this.authStateService=c(ae),this.refreshSessionIframeService=c(nn),this.refreshSessionRefreshTokenService=c(on),this.intervalService=c(bt),this.storagePersistenceService=c(L),this.publicEventsService=c(Oe),this.configurationService=c(ui)}startTokenValidationPeriodically(e,t){let n=this.getConfigsWithSilentRenewEnabled(e);if(n.length<=0||this.intervalService.isTokenValidationRunning())return;let o=this.getSmallestRefreshTimeFromConfigs(n),a=this.intervalService.startPeriodicTokenCheck(o).pipe(U(()=>{let l={};return n.forEach(d=>{let h=d.configId;l[h]=this.getRefreshEvent(d,e)}),Ue(l)}));this.intervalService.runTokenValidationRunning=a.pipe(j(l=>b(()=>new Error(l)))).subscribe({next:l=>{for(let[d,h]of Object.entries(l))this.configurationService.getOpenIDConfiguration(d).subscribe(f=>{this.loggerService.logDebug(f,"silent renew, periodic check finished!"),this.flowHelper.isCurrentFlowCodeFlowWithRefreshTokens(f)&&this.flowsDataService.resetSilentRenewRunning(f)})},error:l=>{this.loggerService.logError(t,"silent renew failed!",l)}})}getRefreshEvent(e,t){if(!this.shouldStartPeriodicallyCheckForConfig(e))return y(null);let o=this.createRefreshEventForConfig(e,t);return this.publicEventsService.fireEvent(Y.SilentRenewStarted),o.pipe(j(a=>(this.loggerService.logError(e,"silent renew failed!",a),this.publicEventsService.fireEvent(Y.SilentRenewFailed,a),this.flowsDataService.resetSilentRenewRunning(e),b(()=>new Error(a)))))}getSmallestRefreshTimeFromConfigs(e){return e.reduce((n,o)=>(n.tokenRefreshInSeconds??0)<(o.tokenRefreshInSeconds??0)?n:o).tokenRefreshInSeconds??0}getConfigsWithSilentRenewEnabled(e){return e.filter(t=>t.silentRenew)}createRefreshEventForConfig(e,t){return this.loggerService.logDebug(e,"starting silent renew..."),this.configurationService.getOpenIDConfiguration(e.configId).pipe(U(n=>{if(!n?.silentRenew)return this.resetAuthDataService.resetAuthorizationData(n,t),y(null);if(this.flowsDataService.setSilentRenewRunning(n),this.flowHelper.isCurrentFlowCodeFlowWithRefreshTokens(n)){let a=this.storagePersistenceService.read("storageCustomParamsRefresh",n)||{},{customParamsRefreshTokenRequest:l}=n,d=u(u({},l),a);return this.refreshSessionRefreshTokenService.refreshSessionWithRefreshTokens(n,t,d)}let o=this.storagePersistenceService.read("storageCustomParamsAuthRequest",n);return this.refreshSessionIframeService.refreshSessionWithIframe(n,t,o)}))}shouldStartPeriodicallyCheckForConfig(e){let t=this.authStateService.getIdToken(e),n=this.flowsDataService.isSilentRenewRunning(e),o=this.flowsDataService.isCodeFlowInProgress(e),a=this.userService.getUserDataFromStore(e);if(this.loggerService.logDebug(e,`Checking: silentRenewRunning: ${n}, isCodeFlowInProgress: ${o} - has idToken: ${!!t} - has userData: ${!!a}`),!(!!a&&!n&&!!t&&!o))return!1;let d=this.authStateService.hasIdTokenExpiredAndRenewCheckIsEnabled(e),h=this.authStateService.hasAccessTokenExpiredIfExpiryExists(e);return d||h}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),il=3,an=(()=>{let r=class r{constructor(){this.flowHelper=c(be),this.flowsDataService=c(q),this.loggerService=c(T),this.silentRenewService=c(fi),this.authStateService=c(ae),this.authWellKnownService=c(tt),this.refreshSessionIframeService=c(nn),this.storagePersistenceService=c(L),this.refreshSessionRefreshTokenService=c(on),this.userService=c(et)}userForceRefreshSession(e,t,n){return e?(this.persistCustomParams(n,e),this.forceRefreshSession(e,t,n).pipe(X(()=>this.flowsDataService.resetSilentRenewRunning(e)))):b(()=>new Error("Please provide a configuration before setting up the module"))}forceRefreshSession(e,t,n){let{customParamsRefreshTokenRequest:o,configId:a}=e,l=u(u({},o),n);if(this.flowHelper.isCurrentFlowCodeFlowWithRefreshTokens(e))return this.startRefreshSession(e,t,l).pipe(P(()=>{let f=this.authStateService.areAuthStorageTokensValid(e);return f?{idToken:this.authStateService.getIdToken(e),accessToken:this.authStateService.getAccessToken(e),userData:this.userService.getUserDataFromStore(e),isAuthenticated:f,configId:a}:{isAuthenticated:!1,errorMessage:"",userData:null,idToken:"",accessToken:"",configId:a}}));let{silentRenewTimeoutInSeconds:d}=e,h=(d??0)*1e3;return Ue([this.startRefreshSession(e,t,n),this.silentRenewService.refreshSessionWithIFrameCompleted$.pipe(Ve(f=>f?.configId===e.configId),at(1))]).pipe(Pi(h),Pt(f=>f.pipe(Ie((_,C)=>{let I=C+1;return!(_ instanceof Ai)||I>il?b(()=>new Error(_)):(this.loggerService.logDebug(e,`forceRefreshSession timeout. Attempt #${I}`),this.flowsDataService.resetSilentRenewRunning(e),At(I*1e3))}))),P(([f,_])=>{let C=this.authStateService.areAuthStorageTokensValid(e);if(C){let A=_.success?_.authResult:null;return{idToken:A?.id_token??"",accessToken:A?.access_token??"",userData:this.userService.getUserDataFromStore(e),isAuthenticated:C,configId:a}}return{isAuthenticated:!1,errorMessage:"",userData:null,idToken:"",accessToken:"",configId:a}}))}persistCustomParams(e,t){let{useRefreshToken:n}=t;e&&(n?this.storagePersistenceService.write("storageCustomParamsRefresh",e,t):this.storagePersistenceService.write("storageCustomParamsAuthRequest",e,t))}startRefreshSession(e,t,n){let o=this.flowsDataService.isSilentRenewRunning(e);return this.loggerService.logDebug(e,`Checking: silentRenewRunning: ${o}`),!o?this.authWellKnownService.queryAndStoreAuthWellKnownEndPoints(e).pipe(U(()=>(this.flowsDataService.setSilentRenewRunning(e),this.flowHelper.isCurrentFlowCodeFlowWithRefreshTokens(e)?this.refreshSessionRefreshTokenService.refreshSessionWithRefreshTokens(e,t,n):this.refreshSessionIframeService.refreshSessionWithIframe(e,t,n)))):y(null)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),Ys="myiFrameForCheckSession",pi=(()=>{let r=class r{constructor(){this.checkSessionReceived=!1,this.scheduledHeartBeatRunning=null,this.lastIFrameRefresh=0,this.outstandingMessages=0,this.loggerService=c(T),this.storagePersistenceService=c(L),this.iFrameService=c(rn),this.eventService=c(Oe),this.zone=c(K),this.document=c(F),this.heartBeatInterval=3e3,this.iframeRefreshInterval=6e4,this.checkSessionChangedInternal$=new Dt(!1)}get checkSessionChanged$(){return this.checkSessionChangedInternal$.asObservable()}ngOnDestroy(){this.stop();let e=this.document.defaultView;e&&this.iframeMessageEventListener&&e.removeEventListener("message",this.iframeMessageEventListener,!1)}isCheckSessionConfigured(e){let{startCheckSession:t}=e;return!!t}start(e){if(this.scheduledHeartBeatRunning)return;let{clientId:t}=e;this.pollServerSession(t,e)}stop(){this.scheduledHeartBeatRunning&&(this.clearScheduledHeartBeat(),this.checkSessionReceived=!1)}serverStateChanged(e){let{startCheckSession:t}=e;return!!t&&this.checkSessionReceived}getExistingIframe(){return this.iFrameService.getExistingIFrame(Ys)}init(e){if(this.lastIFrameRefresh+this.iframeRefreshInterval>Date.now())return y();let t=this.storagePersistenceService.read("authWellKnownEndPoints",e);if(!t)return this.loggerService.logWarning(e,"CheckSession - init check session: authWellKnownEndpoints is undefined. Returning."),y();let n=this.getOrCreateIframe(e);this.bindMessageEventToIframe(e);let o=t.checkSessionIframe,a=n.contentWindow;return o?(a?a.location.replace(o):this.loggerService.logWarning(e,"CheckSession - init check session: IFrame contentWindow does not exist"),new Re(l=>{n.onload=()=>{this.lastIFrameRefresh=Date.now(),l.next(),l.complete()}})):(this.loggerService.logWarning(e,"CheckSession - init check session: checkSessionIframe is not configured to run"),y())}pollServerSession(e,t){this.outstandingMessages=0;let n=()=>{this.init(t).pipe(at(1)).subscribe(()=>{let o=this.getExistingIframe();if(o&&e){this.loggerService.logDebug(t,`CheckSession - clientId : '${e}' - existingIframe: '${o}'`);let a=this.storagePersistenceService.read("session_state",t),l=this.storagePersistenceService.read("authWellKnownEndPoints",t),d=o.contentWindow;if(a&&l?.checkSessionIframe&&d){let h=new URL(l.checkSessionIframe)?.origin;this.outstandingMessages++,d.postMessage(e+" "+a,h)}else this.loggerService.logDebug(t,`CheckSession - session_state is '${a}' - AuthWellKnownEndPoints is '${JSON.stringify(l,null,2)}'`),this.checkSessionChangedInternal$.next(!0)}else this.loggerService.logWarning(t,`CheckSession - OidcSecurityCheckSession pollServerSession checkSession IFrame does not exist:
               clientId : '${e}' - existingIframe: '${o}'`);this.outstandingMessages>3&&this.loggerService.logError(t,`CheckSession - OidcSecurityCheckSession not receiving check session response messages.
                            Outstanding messages: '${this.outstandingMessages}'. Server unreachable?`),this.zone.runOutsideAngular(()=>{this.scheduledHeartBeatRunning=this.document?.defaultView?.setTimeout(()=>this.zone.run(n),this.heartBeatInterval)??null})})};n()}clearScheduledHeartBeat(){this.scheduledHeartBeatRunning!==null&&(clearTimeout(this.scheduledHeartBeatRunning),this.scheduledHeartBeatRunning=null)}messageHandler(e,t){let n=this.getExistingIframe(),a=!!this.storagePersistenceService.read("authWellKnownEndPoints",e)?.checkSessionIframe?.startsWith(t.origin);this.outstandingMessages=0,n&&a&&t.source===n.contentWindow&&(t.data==="error"?this.loggerService.logWarning(e,"CheckSession - error from check session messageHandler"):t.data==="changed"?(this.loggerService.logDebug(e,`CheckSession - ${t} from check session messageHandler`),this.checkSessionReceived=!0,this.eventService.fireEvent(Y.CheckSessionReceived,t.data),this.checkSessionChangedInternal$.next(!0)):(this.eventService.fireEvent(Y.CheckSessionReceived,t.data),this.loggerService.logDebug(e,`CheckSession - ${t.data} from check session messageHandler`)))}bindMessageEventToIframe(e){let t=this.document.defaultView;this.iframeMessageEventListener&&t&&t.removeEventListener("message",this.iframeMessageEventListener,!1),this.iframeMessageEventListener=this.messageHandler.bind(this,e),t&&t.addEventListener("message",this.iframeMessageEventListener,!1)}getOrCreateIframe(e){return this.getExistingIframe()||this.iFrameService.addIFrameToWindowBody(Ys,e)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),lr=(()=>{let r=class r{constructor(){this.popUp=null,this.handle=-1,this.loggerService=c(T),this.storagePersistenceService=c(L),this.document=c(F),this.STORAGE_IDENTIFIER="popupauth",this.resultInternal$=new z}get result$(){return this.resultInternal$.asObservable()}get windowInternal(){return this.document.defaultView}isCurrentlyInPopup(e){if(this.canAccessSessionStorage()){let t=this.storagePersistenceService.read(this.STORAGE_IDENTIFIER,e),n=this.windowInternal;return n?!!n.opener&&n.opener!==n&&!!t:!1}return!1}openPopUp(e,t,n){let o=this.getOptions(t);this.storagePersistenceService.write(this.STORAGE_IDENTIFIER,"true",n);let a=this.windowInternal;if(!a)return;if(!e){this.loggerService.logError(n,"Could not open popup, url is empty");return}if(this.popUp=a.open(e,"_blank",o),!this.popUp){this.storagePersistenceService.remove(this.STORAGE_IDENTIFIER,n),this.loggerService.logError(n,"Could not open popup");return}this.loggerService.logDebug(n,"Opened popup with url "+e);let l=d=>{if(!d?.data||typeof d.data!="string"){if(n.disableCleaningPopupOnInvalidMessage)return;this.cleanUp(l,n);return}this.loggerService.logDebug(n,"Received message from popup with url "+d.data),this.resultInternal$.next({userClosed:!1,receivedUrl:d.data}),this.cleanUp(l,n)};a.addEventListener("message",l,!1),this.handle=a.setInterval(()=>{this.popUp?.closed&&(this.resultInternal$.next({userClosed:!0,receivedUrl:""}),this.cleanUp(l,n))},200)}sendMessageToMainWindow(e,t){let n=this.windowInternal;if(n&&n.opener){let o=n.location.href;this.sendMessage(e,o,t)}}cleanUp(e,t){let n=this.windowInternal;n&&(n.removeEventListener("message",e,!1),n.clearInterval(this.handle),this.popUp&&(this.storagePersistenceService.remove(this.STORAGE_IDENTIFIER,t),this.popUp.close(),this.popUp=null))}sendMessage(e,t,n){let o=this.windowInternal;if(o){if(!e){this.loggerService.logDebug(n,`Can not send message to parent, no url: '${e}'`);return}o.opener.postMessage(e,t)}}getOptions(e){let t={width:500,height:500,left:50,top:50},n=u(u({},t),e||{}),o=this.windowInternal;if(!o)return"";let a=n.width||t.width,l=n.height||t.height,d=o.screenLeft+(o.outerWidth-a)/2,h=o.screenTop+(o.outerHeight-l)/2;return n.left=d,n.top=h,Object.entries(n).map(([f,_])=>`${encodeURIComponent(f)}=${encodeURIComponent(_)}`).join(",")}canAccessSessionStorage(){return typeof navigator<"u"&&navigator.cookieEnabled&&typeof Storage<"u"}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),sl=(()=>{let r=class r{constructor(){this.document=c(F)}getStateParamFromCurrentUrl(e){let t=e||this.getCurrentUrl();if(!t)return null;let n=new URL(t);return new URLSearchParams(n.search).get("state")}getCurrentUrl(){return this.document?.defaultView?.location.toString()??null}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),gi=(()=>{let r=class r{constructor(){this.checkSessionService=c(pi),this.currentUrlService=c(sl),this.silentRenewService=c(fi),this.userService=c(et),this.loggerService=c(T),this.authStateService=c(ae),this.callbackService=c(tn),this.refreshSessionService=c(an),this.periodicallyTokenCheckService=c(rl),this.popupService=c(lr),this.autoLoginService=c(ba),this.storagePersistenceService=c(L),this.publicEventsService=c(Oe)}checkAuth(e,t,n){if(!e)return b(()=>new Error("Please provide a configuration before setting up the module"));this.publicEventsService.fireEvent(Y.CheckingAuth);let o=this.currentUrlService.getStateParamFromCurrentUrl(n);return this.getConfig(e,n)?this.checkAuthWithConfig(e,t,n):b(()=>new Error(`could not find matching config for state ${o}`))}checkAuthMultiple(e,t){let n=this.currentUrlService.getStateParamFromCurrentUrl(t);if(n){let l=this.getConfigurationWithUrlState(e,n);return l?this.composeMultipleLoginResults(e,l,t):b(()=>new Error(`could not find matching config for state ${n}`))}let o=e,a=o.map(l=>this.checkAuthWithConfig(l,o,t));return Ue(a)}checkAuthIncludingServer(e,t){return e?this.checkAuthWithConfig(e,t).pipe(U(n=>{let{isAuthenticated:o}=n;return o?y(n):this.refreshSessionService.forceRefreshSession(e,t).pipe(X(a=>{a?.isAuthenticated&&this.startCheckSessionAndValidation(e,t)}))})):b(()=>new Error("Please provide a configuration before setting up the module"))}getConfig(e,t){let n=this.currentUrlService.getStateParamFromCurrentUrl(t);return n?this.getConfigurationWithUrlState([e],n):e}checkAuthWithConfig(e,t,n){if(!e){let f="Please provide at least one configuration before setting up the module";return this.loggerService.logError(e,f),y({isAuthenticated:!1,errorMessage:f,userData:null,idToken:"",accessToken:"",configId:""})}let o=n||this.currentUrlService.getCurrentUrl();if(!o){let f="No URL found!";return this.loggerService.logError(e,f),y({isAuthenticated:!1,errorMessage:f,userData:null,idToken:"",accessToken:"",configId:""})}let{configId:a,authority:l}=e;if(this.loggerService.logDebug(e,`Working with config '${a}' using '${l}'`),this.popupService.isCurrentlyInPopup(e))return this.popupService.sendMessageToMainWindow(o,e),y({isAuthenticated:!1,errorMessage:"",userData:null,idToken:"",accessToken:"",configId:""});let d=this.callbackService.isCallback(o,e);return this.loggerService.logDebug(e,`currentUrl to check auth with: '${o}'`),(d?this.callbackService.handleCallbackAndFireEvents(o,e,t):y({})).pipe(P(()=>{let f=this.authStateService.areAuthStorageTokensValid(e);return this.loggerService.logDebug(e,`checkAuth completed. Firing events now. isAuthenticated: ${f}`),f&&(this.startCheckSessionAndValidation(e,t),d||(this.authStateService.setAuthenticatedAndFireEvent(t),this.userService.publishUserDataIfExists(e,t))),this.publicEventsService.fireEvent(Y.CheckingAuthFinished),{isAuthenticated:f,userData:this.userService.getUserDataFromStore(e),accessToken:this.authStateService.getAccessToken(e),idToken:this.authStateService.getIdToken(e),configId:a}}),X(({isAuthenticated:f})=>{f&&this.autoLoginService.checkSavedRedirectRouteAndNavigate(e)}),j(({message:f})=>(this.loggerService.logError(e,f),this.publicEventsService.fireEvent(Y.CheckingAuthFinishedWithError,f),y({isAuthenticated:!1,errorMessage:f,userData:null,idToken:"",accessToken:"",configId:a}))))}startCheckSessionAndValidation(e,t){this.checkSessionService.isCheckSessionConfigured(e)&&this.checkSessionService.start(e),this.periodicallyTokenCheckService.startTokenValidationPeriodically(t,e),this.silentRenewService.isSilentRenewConfigured(e)&&this.silentRenewService.getOrCreateIframe(e)}getConfigurationWithUrlState(e,t){if(!t)return null;for(let n of e)if(this.storagePersistenceService.read("authStateControl",n)===t)return n;return null}composeMultipleLoginResults(e,t,n){let o=e.filter(d=>d.configId!==t.configId),a=this.checkAuthWithConfig(t,e,n),l=o.map(d=>{let{redirectUrl:h}=d;return this.checkAuthWithConfig(d,e,h)});return Ue([a,...l])}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),mi=(()=>{let r=class r{constructor(){this.document=c(F)}redirectTo(e){this.document.location.href=e}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),vi=(()=>{let r=class r{constructor(){this.loggerService=c(T),this.flowHelper=c(be)}hasConfigValidResponseType(e){return this.flowHelper.isCurrentFlowAnyImplicitFlow(e)||this.flowHelper.isCurrentFlowCodeFlow(e)?!0:(this.loggerService.logWarning(e,"module configured incorrectly, invalid response_type. Check the responseType in the config"),!1)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),nl=(()=>{let r=class r{constructor(){this.loggerService=c(T),this.urlService=c(he),this.dataService=c(Me),this.storagePersistenceService=c(L)}postParRequest(e,t){let n=new He;n=n.set("Content-Type","application/x-www-form-urlencoded");let o=this.storagePersistenceService.read("authWellKnownEndPoints",e);if(!o)return b(()=>new Error("Could not read PAR endpoint because authWellKnownEndPoints are not given"));let a=o.parEndpoint;return a?this.urlService.createBodyForParCodeFlowRequest(e,t).pipe(U(l=>this.dataService.post(a,l,e,n).pipe(Le(2),P(d=>(this.loggerService.logDebug(e,"par response: ",d),{expiresIn:d.expires_in,requestUri:d.request_uri})),j(d=>{let h="There was an error on ParService postParRequest";return this.loggerService.logError(e,h,d),b(()=>new Error(h))})))):b(()=>new Error("Could not read PAR endpoint from authWellKnownEndpoints"))}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),ol=(()=>{let r=class r{constructor(){this.loggerService=c(T),this.responseTypeValidationService=c(vi),this.urlService=c(he),this.redirectService=c(mi),this.authWellKnownService=c(tt),this.popupService=c(lr),this.checkAuthService=c(gi),this.parService=c(nl)}loginPar(e,t){if(!this.responseTypeValidationService.hasConfigValidResponseType(e)){this.loggerService.logError(e,"Invalid response type!");return}this.loggerService.logDebug(e,"BEGIN Authorize OIDC Flow, no auth data"),this.authWellKnownService.queryAndStoreAuthWellKnownEndPoints(e).pipe(U(()=>this.parService.postParRequest(e,t))).subscribe(n=>{this.loggerService.logDebug(e,"par response: ",n);let o=this.urlService.getAuthorizeParUrl(n.requestUri,e);if(this.loggerService.logDebug(e,"par request url: ",o),!o){this.loggerService.logError(e,`Could not create URL with param ${n.requestUri}: '${o}'`);return}t?.urlHandler?t.urlHandler(o):this.redirectService.redirectTo(o)})}loginWithPopUpPar(e,t,n,o){let{configId:a}=e;if(!this.responseTypeValidationService.hasConfigValidResponseType(e)){let l="Invalid response type!";return this.loggerService.logError(e,l),b(()=>new Error(l))}return this.loggerService.logDebug(e,"BEGIN Authorize OIDC Flow with popup, no auth data"),this.authWellKnownService.queryAndStoreAuthWellKnownEndPoints(e).pipe(U(()=>this.parService.postParRequest(e,n)),U(l=>{this.loggerService.logDebug(e,`par response: ${l}`);let d=this.urlService.getAuthorizeParUrl(l.requestUri,e);if(this.loggerService.logDebug(e,"par request url: ",d),!d){let h=`Could not create URL with param ${l.requestUri}: 'url'`;return this.loggerService.logError(e,h),b(()=>new Error(h))}return this.popupService.openPopUp(d,o,e),this.popupService.result$.pipe(at(1),U(h=>{let{userClosed:f,receivedUrl:_}=h;return f?y({isAuthenticated:!1,errorMessage:"User closed popup",userData:null,idToken:"",accessToken:"",configId:a}):this.checkAuthService.checkAuth(e,t,_)}))}))}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),al=(()=>{let r=class r{constructor(){this.loggerService=c(T),this.responseTypeValidationService=c(vi),this.urlService=c(he),this.authWellKnownService=c(tt),this.popupService=c(lr),this.checkAuthService=c(gi)}loginWithPopUpStandard(e,t,n,o){let{configId:a}=e;if(!this.responseTypeValidationService.hasConfigValidResponseType(e)){let l="Invalid response type!";return this.loggerService.logError(e,l),b(()=>new Error(l))}return this.loggerService.logDebug(e,"BEGIN Authorize OIDC Flow with popup, no auth data"),this.authWellKnownService.queryAndStoreAuthWellKnownEndPoints(e).pipe(U(()=>this.urlService.getAuthorizeUrl(e,n)),X(l=>this.popupService.openPopUp(l,o,e)),U(()=>this.popupService.result$.pipe(at(1),U(l=>{let{userClosed:d,receivedUrl:h}=l;return d?y({isAuthenticated:!1,errorMessage:"User closed popup",userData:null,idToken:"",accessToken:"",configId:a}):this.checkAuthService.checkAuth(e,t,h)}))))}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),ll=(()=>{let r=class r{constructor(){this.loggerService=c(T),this.responseTypeValidationService=c(vi),this.urlService=c(he),this.redirectService=c(mi),this.authWellKnownService=c(tt),this.flowsDataService=c(q)}loginStandard(e,t){if(!this.responseTypeValidationService.hasConfigValidResponseType(e)){this.loggerService.logError(e,"Invalid response type!");return}this.loggerService.logDebug(e,"BEGIN Authorize OIDC Flow, no auth data"),this.flowsDataService.setCodeFlowInProgress(e),this.authWellKnownService.queryAndStoreAuthWellKnownEndPoints(e).subscribe(()=>{let{urlHandler:n}=t||{};this.flowsDataService.resetSilentRenewRunning(e),this.urlService.getAuthorizeUrl(e,t).subscribe(o=>{if(!o){this.loggerService.logError(e,"Could not create URL",o);return}n?n(o):this.redirectService.redirectTo(o)})})}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),cl=(()=>{let r=class r{constructor(){this.parLoginService=c(ol),this.popUpLoginService=c(al),this.standardLoginService=c(ll),this.storagePersistenceService=c(L),this.popupService=c(lr)}login(e,t){if(!e)throw new Error("Please provide a configuration before setting up the module");let{usePushedAuthorisationRequests:n}=e;return t?.customParams&&this.storagePersistenceService.write("storageCustomParamsAuthRequest",t.customParams,e),n?this.parLoginService.loginPar(e,t):this.standardLoginService.loginStandard(e,t)}loginWithPopUp(e,t,n,o){if(!e)throw new Error("Please provide a configuration before setting up the module");if(this.popupService.isCurrentlyInPopup(e))return y({errorMessage:"There is already a popup open."});let{usePushedAuthorisationRequests:l}=e;return n?.customParams&&this.storagePersistenceService.write("storageCustomParamsAuthRequest",n.customParams,e),l?this.parLoginService.loginWithPopUpPar(e,t,n,o):this.popUpLoginService.loginWithPopUpStandard(e,t,n,o)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();function dl(s){let r=u({},s);for(let i in s)(s[i]===void 0||s[i]===null)&&delete r[i];return r}var hl=(()=>{let r=class r{constructor(){this.loggerService=c(T),this.dataService=c(Me),this.storagePersistenceService=c(L),this.urlService=c(he),this.checkSessionService=c(pi),this.resetAuthDataService=c(ke),this.redirectService=c(mi)}logoff(e,t,n){if(!e)return b(()=>new Error("Please provide a configuration before setting up the module"));this.loggerService.logDebug(e,"logoff, remove auth",n);let{urlHandler:o,customParams:a}=n||{},l=this.urlService.getEndSessionUrl(e,a);return l?this.checkSessionService.serverStateChanged(e)?(this.loggerService.logDebug(e,"Server State changed. Logoff was only locally. Returning."),y(null)):o?(this.loggerService.logDebug(e,`Custom UrlHandler found. Using this to handle logoff with url '${l}'`),o(l),this.resetAuthDataService.resetAuthorizationData(e,t),y(null)):this.logoffInternal(n,l,e,t):(this.loggerService.logDebug(e,"No endsessionUrl present. Logoff was only locally. Returning."),y(null))}logoffLocal(e,t){this.resetAuthDataService.resetAuthorizationData(e,t),this.checkSessionService.stop()}logoffLocalMultiple(e){e.forEach(t=>this.logoffLocal(t,e))}logoffAndRevokeTokens(e,t,n){if(!e)return b(()=>new Error("Please provide a configuration before setting up the module"));let{revocationEndpoint:o}=this.storagePersistenceService.read("authWellKnownEndPoints",e)||{};return o?this.storagePersistenceService.getRefreshToken(e)?this.revokeRefreshToken(e).pipe(U(a=>this.revokeAccessToken(e)),j(a=>{let l="revoke token failed";return this.loggerService.logError(e,l,a),b(()=>new Error(l))}),O(()=>this.logoff(e,t,n))):this.revokeAccessToken(e).pipe(j(a=>{let l="revoke accessToken failed";return this.loggerService.logError(e,l,a),b(()=>new Error(l))}),O(()=>this.logoff(e,t,n))):(this.loggerService.logDebug(e,"revocation endpoint not supported"),this.logoff(e,t,n))}revokeAccessToken(e,t){if(!e)return b(()=>new Error("Please provide a configuration before setting up the module"));let n=t||this.storagePersistenceService.getAccessToken(e),o=this.urlService.createRevocationEndpointBodyAccessToken(n,e);return this.sendRevokeRequest(e,o)}revokeRefreshToken(e,t){if(!e)return b(()=>new Error("Please provide a configuration before setting up the module"));let n=t||this.storagePersistenceService.getRefreshToken(e),o=this.urlService.createRevocationEndpointBodyRefreshToken(n,e);return this.sendRevokeRequest(e,o)}logoffInternal(e,t,n,o){let{logoffMethod:a,customParams:l}=e||{};if(!a||a==="GET")return this.redirectService.redirectTo(t),this.resetAuthDataService.resetAuthorizationData(n,o),y(null);let{state:d,logout_hint:h,ui_locales:f}=l||{},{clientId:_}=n,C=this.storagePersistenceService.getIdToken(n),A=this.urlService.getPostLogoutRedirectUrl(n),I=this.getHeaders(),{url:le}=this.urlService.getEndSessionEndpoint(n),Ce=dl({id_token_hint:C,client_id:_,post_logout_redirect_uri:A,state:d,logout_hint:h,ui_locales:f});return this.resetAuthDataService.resetAuthorizationData(n,o),this.dataService.post(le,Ce,n,I)}sendRevokeRequest(e,t){let n=this.urlService.getRevocationEndpointUrl(e),o=this.getHeaders();return this.dataService.post(n,t,e,o).pipe(Le(2),U(a=>(this.loggerService.logDebug(e,"revocation endpoint post response: ",a),y(a))),j(a=>{let l="Revocation request failed";return this.loggerService.logError(e,l,a),b(()=>new Error(l))}))}getHeaders(){let e=new He;return e=e.set("Content-Type","application/x-www-form-urlencoded"),e}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),ln=(()=>{let r=class r{constructor(){this.checkSessionService=c(pi),this.checkAuthService=c(gi),this.userService=c(et),this.tokenHelperService=c(nr),this.configurationService=c(ui),this.authStateService=c(ae),this.flowsDataService=c(q),this.callbackService=c(tn),this.logoffRevocationService=c(hl),this.loginService=c(cl),this.refreshSessionService=c(an),this.urlService=c(he),this.authWellKnownService=c(tt),this.userData=St(this.userData$,{requireSync:!0}),this.authenticated=St(this.isAuthenticated$,{requireSync:!0})}get userData$(){return this.userService.userData$}get isAuthenticated$(){return this.authStateService.authenticated$}get checkSessionChanged$(){return this.checkSessionService.checkSessionChanged$}get stsCallback$(){return this.callbackService.stsCallback$}preloadAuthWellKnownDocument(e){return this.configurationService.getOpenIDConfiguration(e).pipe(O(t=>this.authWellKnownService.queryAndStoreAuthWellKnownEndPoints(t)))}getConfigurations(){return this.configurationService.getAllConfigurations()}getConfiguration(e){return this.configurationService.getOpenIDConfiguration(e)}getUserData(e){return this.configurationService.getOpenIDConfiguration(e).pipe(P(t=>this.userService.getUserDataFromStore(t)))}checkAuth(e,t){return this.configurationService.getOpenIDConfigurations(t).pipe(O(({allConfigs:n,currentConfig:o})=>this.checkAuthService.checkAuth(o,n,e)))}checkAuthMultiple(e){return this.configurationService.getOpenIDConfigurations().pipe(O(({allConfigs:t})=>this.checkAuthService.checkAuthMultiple(t,e)))}isAuthenticated(e){return this.configurationService.getOpenIDConfiguration(e).pipe(P(t=>this.authStateService.isAuthenticated(t)))}checkAuthIncludingServer(e){return this.configurationService.getOpenIDConfigurations(e).pipe(O(({allConfigs:t,currentConfig:n})=>this.checkAuthService.checkAuthIncludingServer(n,t)))}getAccessToken(e){return this.configurationService.getOpenIDConfiguration(e).pipe(P(t=>this.authStateService.getAccessToken(t)))}getIdToken(e){return this.configurationService.getOpenIDConfiguration(e).pipe(P(t=>this.authStateService.getIdToken(t)))}getRefreshToken(e){return this.configurationService.getOpenIDConfiguration(e).pipe(P(t=>this.authStateService.getRefreshToken(t)))}getAuthenticationResult(e){return this.configurationService.getOpenIDConfiguration(e).pipe(P(t=>this.authStateService.getAuthenticationResult(t)))}getPayloadFromIdToken(e=!1,t){return this.configurationService.getOpenIDConfiguration(t).pipe(P(n=>{let o=this.authStateService.getIdToken(n);return this.tokenHelperService.getPayloadFromToken(o,e,n)}))}getPayloadFromAccessToken(e=!1,t){return this.configurationService.getOpenIDConfiguration(t).pipe(P(n=>{let o=this.authStateService.getAccessToken(n);return this.tokenHelperService.getPayloadFromToken(o,e,n)}))}setState(e,t){return this.configurationService.getOpenIDConfiguration(t).pipe(P(n=>this.flowsDataService.setAuthStateControl(e,n)))}getState(e){return this.configurationService.getOpenIDConfiguration(e).pipe(P(t=>this.flowsDataService.getAuthStateControl(t)))}authorize(e,t){this.configurationService.getOpenIDConfiguration(e).subscribe(n=>this.loginService.login(n,t))}authorizeWithPopUp(e,t,n){return this.configurationService.getOpenIDConfigurations(n).pipe(O(({allConfigs:o,currentConfig:a})=>this.loginService.loginWithPopUp(a,o,e,t)))}forceRefreshSession(e,t){return this.configurationService.getOpenIDConfigurations(t).pipe(O(({allConfigs:n,currentConfig:o})=>this.refreshSessionService.userForceRefreshSession(o,n,e)))}logoffAndRevokeTokens(e,t){return this.configurationService.getOpenIDConfigurations(e).pipe(O(({allConfigs:n,currentConfig:o})=>this.logoffRevocationService.logoffAndRevokeTokens(o,n,t)))}logoff(e,t){return this.configurationService.getOpenIDConfigurations(e).pipe(O(({allConfigs:n,currentConfig:o})=>this.logoffRevocationService.logoff(o,n,t)))}logoffLocal(e){this.configurationService.getOpenIDConfigurations(e).subscribe(({allConfigs:t,currentConfig:n})=>this.logoffRevocationService.logoffLocal(n,t))}logoffLocalMultiple(){this.configurationService.getOpenIDConfigurations().subscribe(({allConfigs:e})=>this.logoffRevocationService.logoffLocalMultiple(e))}revokeAccessToken(e,t){return this.configurationService.getOpenIDConfiguration(t).pipe(O(n=>this.logoffRevocationService.revokeAccessToken(n,e)))}revokeRefreshToken(e,t){return this.configurationService.getOpenIDConfiguration(t).pipe(O(n=>this.logoffRevocationService.revokeRefreshToken(n,e)))}getEndSessionUrl(e,t){return this.configurationService.getOpenIDConfiguration(t).pipe(P(n=>this.urlService.getEndSessionUrl(n,e)))}getAuthorizeUrl(e,t){return this.configurationService.getOpenIDConfiguration(t).pipe(O(n=>this.urlService.getAuthorizeUrl(n,e?{customParams:e}:void 0)))}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})(),ul=(()=>{let r=class r{read(e){return sessionStorage.getItem(e)}write(e,t){sessionStorage.setItem(e,t)}remove(e){sessionStorage.removeItem(e)}clear(){sessionStorage.clear()}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();function cn(s,...r){let i=fl(s);for(let e of r)i.push(...e.\u0275providers);return Mi(i)}function fl(s){return[{provide:$s,useValue:s},s?.loader||{provide:ir,useFactory:ha,deps:[$s]},{provide:Xs,useClass:ul},{provide:qs,useClass:ua}]}function dn(s){return s.reduce((r,i)=>r.concat(Array.isArray(i)?dn(i):i),[])}function pl(s){let r=gl(s);return new RegExp(`^${r}$`)}function gl(s){return s.replace(/[.+?^${}()|[\]\\]/g,"\\$&").replace(/\*/g,".*")}var ml=(()=>{let r=class r{getConfigIdForClosestMatchingRoute(e,t){for(let n of t){let{secureRoutes:o}=n,a=(o??[]).find(l=>this.routeMatches(l,e));if(a)return{matchingRoute:a,matchingConfig:n}}return{matchingRoute:null,matchingConfig:null}}routeMatches(e,t){return t.startsWith(e)||this.matchesRoute(e,t)}matchesRoute(e,t){return pl(e).test(t)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();function hn(){return(s,r)=>vl(s,r,{configurationService:c(ui),authStateService:c(ae),closestMatchingRouteService:c(ml),loggerService:c(T)})}function vl(s,r,i){if(!i.configurationService.hasAtLeastOneConfig())return r(s);let e=i.configurationService.getAllConfigurations(),t=e.map(d=>d.secureRoutes||[]);if(dn(t).length===0)return i.loggerService.logDebug(e[0],"No routes to check configured"),r(s);let{matchingConfig:o,matchingRoute:a}=i.closestMatchingRouteService.getConfigIdForClosestMatchingRoute(s.url,e);if(!o)return i.loggerService.logDebug(e[0],`Did not find any configured route for route ${s.url}`),r(s);i.loggerService.logDebug(o,`'${s.url}' matches configured route '${a}'`);let l=i.authStateService.getAccessToken(o);return l?(i.loggerService.logDebug(o,`'${s.url}' matches configured route '${a}', adding token`),s=s.clone({headers:s.headers.set("Authorization","Bearer "+l)}),r(s)):(i.loggerService.logDebug(o,`Wanted to add token to ${s.url} but found no token: '${l}'`),r(s))}var cr=[];function un(){let s={};for(let r of cr)s[r.name]=r.signal();return s}function yl(){let s="";return{attachState(r,i){let e=i?.name??`signal_${cr.length}`;if(cr.some(n=>n.signal===r))return;cr.push({name:e,signal:r});let t=un();s=JSON.stringify(t),console.log(`${e}/INIT`,t),jt(()=>{let n=un(),o=JSON.stringify(n);o!==s&&(s=o,console.log("STORE_UPDATE",n))})}}}var dr=yl();var _l={isAuthenticated:!1},it=class s{#e=c(ln);#t=St(this.#e.checkAuth(),{initialValue:_l});isAuthenticated=te(()=>this.#t().isAuthenticated);userData=te(()=>this.#t().userData);auth=te(()=>this.#t());token=te(()=>this.#t().accessToken);roles=te(()=>{let r=this.token();return r?JSON.parse(atob(r?.split(".")[1]))?.realm_access?.roles||[]:null});constructor(){dr.attachState(this.auth,{name:"AuthStore"})}login(){this.#e.authorize()}logout(){return Tt(this.#e.logoff())}static \u0275fac=function(i){return new(i||s)};static \u0275prov=g({token:s,factory:s.\u0275fac,providedIn:"root"})};var Sl=()=>H(null,null,function*(){let s=c(er);return yield Tt(s.getBlogPosts())}),wl=()=>H(null,null,function*(){let s=c(it),r=yield s.roles();return console.log("User Roles from Auth Guard",r),s.isAuthenticated()&&r?.includes("ddd")?!0:(s.login(),!1)}),fn=[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"demo",loadComponent:()=>import("./chunk-7PED2X2C.js")},{path:"overview",loadComponent:()=>import("./chunk-SXYID74Z.js"),resolve:{model:Sl},runGuardsAndResolvers:"always"},{path:"detail/:id",loadComponent:()=>import("./chunk-S7CRX26M.js")},{path:"add-blog",loadComponent:()=>import("./chunk-2DGOJC2P.js"),canActivate:[wl]},...js,...zs];var pn=(s,r)=>(console.log("Request",s),r(s).pipe(X(i=>console.log("Response",i))));var bl=[pn],gn=bl;var mn={config:{authority:"https://d-cap-keyclaok.kindbay-711f60b2.westeurope.azurecontainerapps.io/realms/blog",redirectUrl:window.location.origin,postLogoutRedirectUri:window.location.origin,clientId:"spa-blog",scope:"openid profile email offline_access",responseType:"code",silentRenew:!0,silentRenewUrl:window.location.origin+"/silent-renew.html",renewTimeBeforeTokenExpiresInSeconds:10,secureRoutes:[Pe.serviceUrl]}};var vn={providers:[Ni(),$i({eventCoalescing:!0}),as(fn,ls()),Vr(ts(),es([...gn,hn()])),Ls(),cn(mn)]};var kl={isLoading:!1},hr=class s{#e=c($e);#t=je(kl);isLoading=te(()=>this.#t().isLoading);constructor(){dr.attachState(this.#t,{name:"RouterStore"}),this.#e.events.subscribe(r=>{switch(!0){case r instanceof rs:{this.#r(!0);break}case r instanceof is:case r instanceof ss:case r instanceof ns:{this.#r(!1);break}}})}#r(r){this.#t.update(i=>w(u({},i),{isLoading:r}))}static \u0275fac=function(i){return new(i||s)};static \u0275prov=g({token:s,factory:s.\u0275fac,providedIn:"root"})};var Cl=["*",[["mat-toolbar-row"]]],Rl=["*","mat-toolbar-row"],Il=(()=>{class s{static \u0275fac=function(e){return new(e||s)};static \u0275dir=De({type:s,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return s})(),yn=(()=>{class s{_elementRef=c(se);_platform=c(oe);_document=c(F);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=G({type:s,selectors:[["mat-toolbar"]],contentQueries:function(e,t,n){if(e&1&&Wi(n,Il,5),e&2){let o;ut(o=ft())&&(t._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(e,t){e&2&&(zi(t.color?"mat-"+t.color:""),Be("mat-toolbar-multiple-rows",t._toolbarRows.length>0)("mat-toolbar-single-row",t._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:Rl,decls:2,vars:0,template:function(e,t){e&1&&(Or(Cl),Lt(0),Lt(1,1))},styles:[`.mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mat-button-text-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mat-button-outlined-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}
`],encapsulation:2,changeDetection:0})}return s})();var _n=(()=>{class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=ee({type:s});static \u0275inj=Q({imports:[Ze,Ze]})}return s})();var Pl=20,st=(()=>{class s{_ngZone=c(K);_platform=c(oe);_renderer=c(fe).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new z;_scrolledCount=0;scrollContainers=new Map;register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let e=this.scrollContainers.get(i);e&&(e.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=Pl){return this._platform.isBrowser?new Re(e=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let t=i>0?this._scrolled.pipe(Ir(i)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{t.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):y()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((i,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(i,e){let t=this.getAncestorScrollContainers(i);return this.scrolled(e).pipe(Ve(n=>!n||t.indexOf(n)>-1))}getAncestorScrollContainers(i){let e=[];return this.scrollContainers.forEach((t,n)=>{this._scrollableContainsElement(n,i)&&e.push(n)}),e}_scrollableContainsElement(i,e){let t=ds(e),n=i.getElementRef().nativeElement;do if(t==n)return!0;while(t=t.parentElement);return!1}static \u0275fac=function(e){return new(e||s)};static \u0275prov=g({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var Ol=20,nt=(()=>{class s{_platform=c(oe);_listeners;_viewportSize;_change=new z;_document=c(F);constructor(){let i=c(K),e=c(fe).createRenderer(null,null);i.runOutsideAngular(()=>{if(this._platform.isBrowser){let t=n=>this._change.next(n);this._listeners=[e.listen("window","resize",t),e.listen("window","orientationchange",t)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(i=>i()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:e,height:t}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+t,right:i.left+e,height:t,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,e=this._getWindow(),t=i.documentElement,n=t.getBoundingClientRect(),o=-n.top||i.body.scrollTop||e.scrollY||t.scrollTop||0,a=-n.left||i.body.scrollLeft||e.scrollX||t.scrollLeft||0;return{top:o,left:a}}change(i=Ol){return i>0?this._change.pipe(Ir(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}static \u0275fac=function(e){return new(e||s)};static \u0275prov=g({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var kt=(()=>{class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=ee({type:s});static \u0275inj=Q({})}return s})(),yi=(()=>{class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=ee({type:s});static \u0275inj=Q({imports:[pt,kt,pt,kt]})}return s})();var Ct=class{_attachedHost;attach(r){return this._attachedHost=r,r.attach(this)}detach(){let r=this._attachedHost;r!=null&&(this._attachedHost=null,r.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(r){this._attachedHost=r}},Rt=class extends Ct{component;viewContainerRef;injector;projectableNodes;constructor(r,i,e,t){super(),this.component=r,this.viewContainerRef=i,this.injector=e,this.projectableNodes=t}},ur=class extends Ct{templateRef;viewContainerRef;context;injector;constructor(r,i,e,t){super(),this.templateRef=r,this.viewContainerRef=i,this.context=e,this.injector=t}get origin(){return this.templateRef.elementRef}attach(r,i=this.context){return this.context=i,super.attach(r)}detach(){return this.context=void 0,super.detach()}},_i=class extends Ct{element;constructor(r){super(),this.element=r instanceof se?r.nativeElement:r}},Si=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(r){if(r instanceof Rt)return this._attachedPortal=r,this.attachComponentPortal(r);if(r instanceof ur)return this._attachedPortal=r,this.attachTemplatePortal(r);if(this.attachDomPortal&&r instanceof _i)return this._attachedPortal=r,this.attachDomPortal(r)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(r){this._disposeFn=r}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},fr=class extends Si{outletElement;_appRef;_defaultInjector;constructor(r,i,e){super(),this.outletElement=r,this._appRef=i,this._defaultInjector=e}attachComponentPortal(r){let i;if(r.viewContainerRef){let e=r.injector||r.viewContainerRef.injector,t=e.get(ji,null,{optional:!0})||void 0;i=r.viewContainerRef.createComponent(r.component,{index:r.viewContainerRef.length,injector:e,ngModuleRef:t,projectableNodes:r.projectableNodes||void 0}),this.setDisposeFn(()=>i.destroy())}else{let e=this._appRef,t=r.injector||this._defaultInjector||Z.NULL,n=t.get(Ot,e.injector);i=Ki(r.component,{elementInjector:t,environmentInjector:n,projectableNodes:r.projectableNodes||void 0}),e.attachView(i.hostView),this.setDisposeFn(()=>{e.viewCount>0&&e.detachView(i.hostView),i.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=r,i}attachTemplatePortal(r){let i=r.viewContainerRef,e=i.createEmbeddedView(r.templateRef,r.context,{injector:r.injector});return e.rootNodes.forEach(t=>this.outletElement.appendChild(t)),e.detectChanges(),this.setDisposeFn(()=>{let t=i.indexOf(e);t!==-1&&i.remove(t)}),this._attachedPortal=r,e}attachDomPortal=r=>{let i=r.element;i.parentNode;let e=this.outletElement.ownerDocument.createComment("dom-portal");i.parentNode.insertBefore(e,i),this.outletElement.appendChild(i),this._attachedPortal=r,super.setDisposeFn(()=>{e.parentNode&&e.parentNode.replaceChild(i,e)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(r){return r.hostView.rootNodes[0]}};var wn=(()=>{class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=ee({type:s});static \u0275inj=Q({})}return s})();var bn=vs();function xn(s){return new pr(s.get(nt),s.get(F))}var pr=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(r,i){this._viewportRuler=r,this._document=i}attach(){}enable(){if(this._canBeEnabled()){let r=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=r.style.left||"",this._previousHTMLStyles.top=r.style.top||"",r.style.left=V(-this._previousScrollPosition.left),r.style.top=V(-this._previousScrollPosition.top),r.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let r=this._document.documentElement,i=this._document.body,e=r.style,t=i.style,n=e.scrollBehavior||"",o=t.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,r.classList.remove("cdk-global-scrollblock"),bn&&(e.scrollBehavior=t.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),bn&&(e.scrollBehavior=n,t.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let i=this._document.documentElement,e=this._viewportRuler.getViewportSize();return i.scrollHeight>e.height||i.scrollWidth>e.width}};function Tn(s,r){return new gr(s.get(st),s.get(K),s.get(nt),r)}var gr=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(r,i,e,t){this._scrollDispatcher=r,this._ngZone=i,this._viewportRuler=e,this._config=t}attach(r){this._overlayRef,this._overlayRef=r}enable(){if(this._scrollSubscription)return;let r=this._scrollDispatcher.scrolled(0).pipe(Ve(i=>!i||!this._overlayRef.overlayElement.contains(i.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=r.subscribe(()=>{let i=this._viewportRuler.getViewportScrollPosition().top;Math.abs(i-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=r.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var It=class{enable(){}disable(){}attach(){}};function wi(s,r){return r.some(i=>{let e=s.bottom<i.top,t=s.top>i.bottom,n=s.right<i.left,o=s.left>i.right;return e||t||n||o})}function kn(s,r){return r.some(i=>{let e=s.top<i.top,t=s.bottom>i.bottom,n=s.left<i.left,o=s.right>i.right;return e||t||n||o})}function Ne(s,r){return new mr(s.get(st),s.get(nt),s.get(K),r)}var mr=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(r,i,e,t){this._scrollDispatcher=r,this._viewportRuler=i,this._ngZone=e,this._config=t}attach(r){this._overlayRef,this._overlayRef=r}enable(){if(!this._scrollSubscription){let r=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(r).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let i=this._overlayRef.overlayElement.getBoundingClientRect(),{width:e,height:t}=this._viewportRuler.getViewportSize();wi(i,[{width:e,height:t,bottom:t,right:e,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},An=(()=>{class s{_injector=c(Z);constructor(){}noop=()=>new It;close=i=>Tn(this._injector,i);block=()=>xn(this._injector);reposition=i=>Ne(this._injector,i);static \u0275fac=function(e){return new(e||s)};static \u0275prov=g({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),vr=class{positionStrategy;scrollStrategy=new It;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(r){if(r){let i=Object.keys(r);for(let e of i)r[e]!==void 0&&(this[e]=r[e])}}};var yr=class{connectionPair;scrollableViewProperties;constructor(r,i){this.connectionPair=r,this.scrollableViewProperties=i}};var Pn=(()=>{class s{_attachedOverlays=[];_document=c(F);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let e=this._attachedOverlays.indexOf(i);e>-1&&this._attachedOverlays.splice(e,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(e){return new(e||s)};static \u0275prov=g({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),On=(()=>{class s extends Pn{_ngZone=c(K);_renderer=c(fe).createRenderer(null,null);_cleanupKeydown;add(i){super.add(i),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=i=>{let e=this._attachedOverlays;for(let t=e.length-1;t>-1;t--)if(e[t]._keydownEvents.observers.length>0){this._ngZone.run(()=>e[t]._keydownEvents.next(i));break}};static \u0275fac=(()=>{let i;return function(t){return(i||(i=Ft(s)))(t||s)}})();static \u0275prov=g({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),Mn=(()=>{class s extends Pn{_platform=c(oe);_ngZone=c(K);_renderer=c(fe).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(i){if(super.add(i),!this._isAttached){let e=this._document.body,t={capture:!0},n=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[n.listen(e,"pointerdown",this._pointerDownListener,t),n.listen(e,"click",this._clickListener,t),n.listen(e,"auxclick",this._clickListener,t),n.listen(e,"contextmenu",this._clickListener,t)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=e.style.cursor,e.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(i=>i()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=i=>{this._pointerDownEventTarget=Wr(i)};_clickListener=i=>{let e=Wr(i),t=i.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:e;this._pointerDownEventTarget=null;let n=this._attachedOverlays.slice();for(let o=n.length-1;o>-1;o--){let a=n[o];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(Cn(a.overlayElement,e)||Cn(a.overlayElement,t))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(i)):l.next(i)}};static \u0275fac=(()=>{let i;return function(t){return(i||(i=Ft(s)))(t||s)}})();static \u0275prov=g({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function Cn(s,r){let i=typeof ShadowRoot<"u"&&ShadowRoot,e=r;for(;e;){if(e===s)return!0;e=i&&e instanceof ShadowRoot?e.host:e.parentNode}return!1}var Fn=(()=>{class s{static \u0275fac=function(e){return new(e||s)};static \u0275cmp=G({type:s,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(e,t){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return s})(),Nn=(()=>{class s{_platform=c(oe);_containerElement;_document=c(F);_styleLoader=c(zr);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||Br()){let t=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let n=0;n<t.length;n++)t[n].remove()}let e=this._document.createElement("div");e.classList.add(i),Br()?e.setAttribute("platform","test"):this._platform.isBrowser||e.setAttribute("platform","server"),this._document.body.appendChild(e),this._containerElement=e}_loadStyles(){this._styleLoader.load(Fn)}static \u0275fac=function(e){return new(e||s)};static \u0275prov=g({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),bi=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(r,i,e,t){this._renderer=i,this._ngZone=e,this.element=r.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=i.listen(this.element,"click",t)}detach(){this._ngZone.runOutsideAngular(()=>{let r=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(r,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),r.style.pointerEvents="none",r.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},_r=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new z;_attachments=new z;_detachments=new z;_positionStrategy;_scrollStrategy;_locationChanges=Et.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new z;_outsidePointerEvents=new z;_afterNextRenderRef;constructor(r,i,e,t,n,o,a,l,d,h=!1,f,_){this._portalOutlet=r,this._host=i,this._pane=e,this._config=t,this._ngZone=n,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=d,this._animationsDisabled=h,this._injector=f,this._renderer=_,t.scrollStrategy&&(this._scrollStrategy=t.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=t.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(r){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let i=this._portalOutlet.attach(r);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=xe(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof i?.onDestroy=="function"&&i.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),i}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let r=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),r}dispose(){let r=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,r&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(r){r!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=r,this.hasAttached()&&(r.attach(this),this.updatePosition()))}updateSize(r){this._config=u(u({},this._config),r),this._updateElementSize()}setDirection(r){this._config=w(u({},this._config),{direction:r}),this._updateElementDirection()}addPanelClass(r){this._pane&&this._toggleClasses(this._pane,r,!0)}removePanelClass(r){this._pane&&this._toggleClasses(this._pane,r,!1)}getDirection(){let r=this._config.direction;return r?typeof r=="string"?r:r.value:"ltr"}updateScrollStrategy(r){r!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=r,this.hasAttached()&&(r.attach(this),r.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let r=this._pane.style;r.width=V(this._config.width),r.height=V(this._config.height),r.minWidth=V(this._config.minWidth),r.minHeight=V(this._config.minHeight),r.maxWidth=V(this._config.maxWidth),r.maxHeight=V(this._config.maxHeight)}_togglePointerEvents(r){this._pane.style.pointerEvents=r?"":"none"}_attachBackdrop(){let r="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new bi(this._document,this._renderer,this._ngZone,i=>{this._backdropClick.next(i)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(r))}):this._backdropRef.element.classList.add(r)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(r,i,e){let t=Lr(i||[]).filter(n=>!!n);t.length&&(e?r.classList.add(...t):r.classList.remove(...t))}_detachContentWhenEmpty(){let r=!1;try{this._detachContentAfterRenderRef=xe(()=>{r=!0,this._detachContent()},{injector:this._injector})}catch(i){if(r)throw i;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let r=this._scrollStrategy;r?.disable(),r?.detach?.()}},Rn="cdk-overlay-connected-position-bounding-box",Fl=/([A-Za-z%]+)$/;function br(s,r){return new Sr(r,s.get(nt),s.get(F),s.get(oe),s.get(Nn))}var Sr=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new z;_resizeSubscription=Et.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(r,i,e,t,n){this._viewportRuler=i,this._document=e,this._platform=t,this._overlayContainer=n,this.setOrigin(r)}attach(r){this._overlayRef&&this._overlayRef,this._validatePositions(),r.hostElement.classList.add(Rn),this._overlayRef=r,this._boundingBox=r.hostElement,this._pane=r.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let r=this._originRect,i=this._overlayRect,e=this._viewportRect,t=this._containerRect,n=[],o;for(let a of this._preferredPositions){let l=this._getOriginPoint(r,t,a),d=this._getOverlayPoint(l,i,a),h=this._getOverlayFit(d,i,e,a);if(h.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(h,d,e)){n.push({position:a,origin:l,overlayRect:i,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!o||o.overlayFit.visibleArea<h.visibleArea)&&(o={overlayFit:h,overlayPoint:d,originPoint:l,position:a,overlayRect:i})}if(n.length){let a=null,l=-1;for(let d of n){let h=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);h>l&&(l=h,a=d)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Fe(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Rn),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let r=this._lastPosition;if(r){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let i=this._getOriginPoint(this._originRect,this._containerRect,r);this._applyPosition(r,i)}else this.apply()}withScrollableContainers(r){return this._scrollables=r,this}withPositions(r){return this._preferredPositions=r,r.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(r){return this._viewportMargin=r,this}withFlexibleDimensions(r=!0){return this._hasFlexibleDimensions=r,this}withGrowAfterOpen(r=!0){return this._growAfterOpen=r,this}withPush(r=!0){return this._canPush=r,this}withLockedPosition(r=!0){return this._positionLocked=r,this}setOrigin(r){return this._origin=r,this}withDefaultOffsetX(r){return this._offsetX=r,this}withDefaultOffsetY(r){return this._offsetY=r,this}withTransformOriginOn(r){return this._transformOriginSelector=r,this}_getOriginPoint(r,i,e){let t;if(e.originX=="center")t=r.left+r.width/2;else{let o=this._isRtl()?r.right:r.left,a=this._isRtl()?r.left:r.right;t=e.originX=="start"?o:a}i.left<0&&(t-=i.left);let n;return e.originY=="center"?n=r.top+r.height/2:n=e.originY=="top"?r.top:r.bottom,i.top<0&&(n-=i.top),{x:t,y:n}}_getOverlayPoint(r,i,e){let t;e.overlayX=="center"?t=-i.width/2:e.overlayX==="start"?t=this._isRtl()?-i.width:0:t=this._isRtl()?0:-i.width;let n;return e.overlayY=="center"?n=-i.height/2:n=e.overlayY=="top"?0:-i.height,{x:r.x+t,y:r.y+n}}_getOverlayFit(r,i,e,t){let n=En(i),{x:o,y:a}=r,l=this._getOffset(t,"x"),d=this._getOffset(t,"y");l&&(o+=l),d&&(a+=d);let h=0-o,f=o+n.width-e.width,_=0-a,C=a+n.height-e.height,A=this._subtractOverflows(n.width,h,f),I=this._subtractOverflows(n.height,_,C),le=A*I;return{visibleArea:le,isCompletelyWithinViewport:n.width*n.height===le,fitsInViewportVertically:I===n.height,fitsInViewportHorizontally:A==n.width}}_canFitWithFlexibleDimensions(r,i,e){if(this._hasFlexibleDimensions){let t=e.bottom-i.y,n=e.right-i.x,o=In(this._overlayRef.getConfig().minHeight),a=In(this._overlayRef.getConfig().minWidth),l=r.fitsInViewportVertically||o!=null&&o<=t,d=r.fitsInViewportHorizontally||a!=null&&a<=n;return l&&d}return!1}_pushOverlayOnScreen(r,i,e){if(this._previousPushAmount&&this._positionLocked)return{x:r.x+this._previousPushAmount.x,y:r.y+this._previousPushAmount.y};let t=En(i),n=this._viewportRect,o=Math.max(r.x+t.width-n.width,0),a=Math.max(r.y+t.height-n.height,0),l=Math.max(n.top-e.top-r.y,0),d=Math.max(n.left-e.left-r.x,0),h=0,f=0;return t.width<=n.width?h=d||-o:h=r.x<this._viewportMargin?n.left-e.left-r.x:0,t.height<=n.height?f=l||-a:f=r.y<this._viewportMargin?n.top-e.top-r.y:0,this._previousPushAmount={x:h,y:f},{x:r.x+h,y:r.y+f}}_applyPosition(r,i){if(this._setTransformOrigin(r),this._setOverlayElementStyles(i,r),this._setBoundingBoxStyles(i,r),r.panelClass&&this._addPanelClasses(r.panelClass),this._positionChanges.observers.length){let e=this._getScrollVisibility();if(r!==this._lastPosition||!this._lastScrollVisibility||!Nl(this._lastScrollVisibility,e)){let t=new yr(r,e);this._positionChanges.next(t)}this._lastScrollVisibility=e}this._lastPosition=r,this._isInitialRender=!1}_setTransformOrigin(r){if(!this._transformOriginSelector)return;let i=this._boundingBox.querySelectorAll(this._transformOriginSelector),e,t=r.overlayY;r.overlayX==="center"?e="center":this._isRtl()?e=r.overlayX==="start"?"right":"left":e=r.overlayX==="start"?"left":"right";for(let n=0;n<i.length;n++)i[n].style.transformOrigin=`${e} ${t}`}_calculateBoundingBoxRect(r,i){let e=this._viewportRect,t=this._isRtl(),n,o,a;if(i.overlayY==="top")o=r.y,n=e.height-o+this._viewportMargin;else if(i.overlayY==="bottom")a=e.height-r.y+this._viewportMargin*2,n=e.height-a+this._viewportMargin;else{let C=Math.min(e.bottom-r.y+e.top,r.y),A=this._lastBoundingBoxSize.height;n=C*2,o=r.y-C,n>A&&!this._isInitialRender&&!this._growAfterOpen&&(o=r.y-A/2)}let l=i.overlayX==="start"&&!t||i.overlayX==="end"&&t,d=i.overlayX==="end"&&!t||i.overlayX==="start"&&t,h,f,_;if(d)_=e.width-r.x+this._viewportMargin*2,h=r.x-this._viewportMargin;else if(l)f=r.x,h=e.right-r.x;else{let C=Math.min(e.right-r.x+e.left,r.x),A=this._lastBoundingBoxSize.width;h=C*2,f=r.x-C,h>A&&!this._isInitialRender&&!this._growAfterOpen&&(f=r.x-A/2)}return{top:o,left:f,bottom:a,right:_,width:h,height:n}}_setBoundingBoxStyles(r,i){let e=this._calculateBoundingBoxRect(r,i);!this._isInitialRender&&!this._growAfterOpen&&(e.height=Math.min(e.height,this._lastBoundingBoxSize.height),e.width=Math.min(e.width,this._lastBoundingBoxSize.width));let t={};if(this._hasExactPosition())t.top=t.left="0",t.bottom=t.right=t.maxHeight=t.maxWidth="",t.width=t.height="100%";else{let n=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;t.height=V(e.height),t.top=V(e.top),t.bottom=V(e.bottom),t.width=V(e.width),t.left=V(e.left),t.right=V(e.right),i.overlayX==="center"?t.alignItems="center":t.alignItems=i.overlayX==="end"?"flex-end":"flex-start",i.overlayY==="center"?t.justifyContent="center":t.justifyContent=i.overlayY==="bottom"?"flex-end":"flex-start",n&&(t.maxHeight=V(n)),o&&(t.maxWidth=V(o))}this._lastBoundingBoxSize=e,Fe(this._boundingBox.style,t)}_resetBoundingBoxStyles(){Fe(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Fe(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(r,i){let e={},t=this._hasExactPosition(),n=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(t){let h=this._viewportRuler.getViewportScrollPosition();Fe(e,this._getExactOverlayY(i,r,h)),Fe(e,this._getExactOverlayX(i,r,h))}else e.position="static";let a="",l=this._getOffset(i,"x"),d=this._getOffset(i,"y");l&&(a+=`translateX(${l}px) `),d&&(a+=`translateY(${d}px)`),e.transform=a.trim(),o.maxHeight&&(t?e.maxHeight=V(o.maxHeight):n&&(e.maxHeight="")),o.maxWidth&&(t?e.maxWidth=V(o.maxWidth):n&&(e.maxWidth="")),Fe(this._pane.style,e)}_getExactOverlayY(r,i,e){let t={top:"",bottom:""},n=this._getOverlayPoint(i,this._overlayRect,r);if(this._isPushed&&(n=this._pushOverlayOnScreen(n,this._overlayRect,e)),r.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;t.bottom=`${o-(n.y+this._overlayRect.height)}px`}else t.top=V(n.y);return t}_getExactOverlayX(r,i,e){let t={left:"",right:""},n=this._getOverlayPoint(i,this._overlayRect,r);this._isPushed&&(n=this._pushOverlayOnScreen(n,this._overlayRect,e));let o;if(this._isRtl()?o=r.overlayX==="end"?"left":"right":o=r.overlayX==="end"?"right":"left",o==="right"){let a=this._document.documentElement.clientWidth;t.right=`${a-(n.x+this._overlayRect.width)}px`}else t.left=V(n.x);return t}_getScrollVisibility(){let r=this._getOriginRect(),i=this._pane.getBoundingClientRect(),e=this._scrollables.map(t=>t.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:kn(r,e),isOriginOutsideView:wi(r,e),isOverlayClipped:kn(i,e),isOverlayOutsideView:wi(i,e)}}_subtractOverflows(r,...i){return i.reduce((e,t)=>e-Math.max(t,0),r)}_getNarrowedViewportRect(){let r=this._document.documentElement.clientWidth,i=this._document.documentElement.clientHeight,e=this._viewportRuler.getViewportScrollPosition();return{top:e.top+this._viewportMargin,left:e.left+this._viewportMargin,right:e.left+r-this._viewportMargin,bottom:e.top+i-this._viewportMargin,width:r-2*this._viewportMargin,height:i-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(r,i){return i==="x"?r.offsetX==null?this._offsetX:r.offsetX:r.offsetY==null?this._offsetY:r.offsetY}_validatePositions(){}_addPanelClasses(r){this._pane&&Lr(r).forEach(i=>{i!==""&&this._appliedPanelClasses.indexOf(i)===-1&&(this._appliedPanelClasses.push(i),this._pane.classList.add(i))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(r=>{this._pane.classList.remove(r)}),this._appliedPanelClasses=[])}_getOriginRect(){let r=this._origin;if(r instanceof se)return r.nativeElement.getBoundingClientRect();if(r instanceof Element)return r.getBoundingClientRect();let i=r.width||0,e=r.height||0;return{top:r.y,bottom:r.y+e,left:r.x,right:r.x+i,height:e,width:i}}};function Fe(s,r){for(let i in r)r.hasOwnProperty(i)&&(s[i]=r[i]);return s}function In(s){if(typeof s!="number"&&s!=null){let[r,i]=s.split(Fl);return!i||i==="px"?parseFloat(r):null}return s||null}function En(s){return{top:Math.floor(s.top),right:Math.floor(s.right),bottom:Math.floor(s.bottom),left:Math.floor(s.left),width:Math.floor(s.width),height:Math.floor(s.height)}}function Nl(s,r){return s===r?!0:s.isOriginClipped===r.isOriginClipped&&s.isOriginOutsideView===r.isOriginOutsideView&&s.isOverlayClipped===r.isOverlayClipped&&s.isOverlayOutsideView===r.isOverlayOutsideView}var Dn="cdk-global-overlay-wrapper";function Un(s){return new wr}var wr=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(r){let i=r.getConfig();this._overlayRef=r,this._width&&!i.width&&r.updateSize({width:this._width}),this._height&&!i.height&&r.updateSize({height:this._height}),r.hostElement.classList.add(Dn),this._isDisposed=!1}top(r=""){return this._bottomOffset="",this._topOffset=r,this._alignItems="flex-start",this}left(r=""){return this._xOffset=r,this._xPosition="left",this}bottom(r=""){return this._topOffset="",this._bottomOffset=r,this._alignItems="flex-end",this}right(r=""){return this._xOffset=r,this._xPosition="right",this}start(r=""){return this._xOffset=r,this._xPosition="start",this}end(r=""){return this._xOffset=r,this._xPosition="end",this}width(r=""){return this._overlayRef?this._overlayRef.updateSize({width:r}):this._width=r,this}height(r=""){return this._overlayRef?this._overlayRef.updateSize({height:r}):this._height=r,this}centerHorizontally(r=""){return this.left(r),this._xPosition="center",this}centerVertically(r=""){return this.top(r),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let r=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement.style,e=this._overlayRef.getConfig(),{width:t,height:n,maxWidth:o,maxHeight:a}=e,l=(t==="100%"||t==="100vw")&&(!o||o==="100%"||o==="100vw"),d=(n==="100%"||n==="100vh")&&(!a||a==="100%"||a==="100vh"),h=this._xPosition,f=this._xOffset,_=this._overlayRef.getConfig().direction==="rtl",C="",A="",I="";l?I="flex-start":h==="center"?(I="center",_?A=f:C=f):_?h==="left"||h==="end"?(I="flex-end",C=f):(h==="right"||h==="start")&&(I="flex-start",A=f):h==="left"||h==="start"?(I="flex-start",C=f):(h==="right"||h==="end")&&(I="flex-end",A=f),r.position=this._cssPosition,r.marginLeft=l?"0":C,r.marginTop=d?"0":this._topOffset,r.marginBottom=this._bottomOffset,r.marginRight=l?"0":A,i.justifyContent=I,i.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let r=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement,e=i.style;i.classList.remove(Dn),e.justifyContent=e.alignItems=r.marginTop=r.marginBottom=r.marginLeft=r.marginRight=r.position="",this._overlayRef=null,this._isDisposed=!0}},Vn=(()=>{class s{_injector=c(Z);constructor(){}global(){return Un()}flexibleConnectedTo(i){return br(this._injector,i)}static \u0275fac=function(e){return new(e||s)};static \u0275prov=g({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function kr(s,r){s.get(zr).load(Fn);let i=s.get(Nn),e=s.get(F),t=s.get(fs),n=s.get(Tr),o=s.get(Ht),a=e.createElement("div"),l=e.createElement("div");l.id=t.getId("cdk-overlay-"),l.classList.add("cdk-overlay-pane"),a.appendChild(l),i.getContainerElement().appendChild(a);let d=new fr(l,n,s),h=new vr(r),f=s.get(xr,null,{optional:!0})||s.get(fe).createRenderer(null,null);return h.direction=h.direction||o.value,new _r(d,a,l,h,s.get(K),s.get(On),e,s.get(Yi),s.get(Mn),r?.disableAnimations??s.get(Vi,null,{optional:!0})==="NoopAnimations",s.get(Ot),f)}var Ln=(()=>{class s{scrollStrategies=c(An);_positionBuilder=c(Vn);_injector=c(Z);constructor(){}create(i){return kr(this._injector,i)}position(){return this._positionBuilder}static \u0275fac=function(e){return new(e||s)};static \u0275prov=g({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var Ul=new ve("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let s=c(Z);return()=>Ne(s)}});function Vl(s){let r=c(Z);return()=>Ne(r)}var Ll={provide:Ul,useFactory:Vl},ki=(()=>{class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=ee({type:s});static \u0275inj=Q({providers:[Ln,Ll],imports:[pt,wn,yi,yi]})}return s})();var Wl=["tooltip"],Ci=20;var Ri=new ve("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let s=c(Z);return()=>Ne(s,{scrollThrottle:Ci})}});function zn(s){let r=c(Z);return()=>Ne(r,{scrollThrottle:Ci})}var Ii={provide:Ri,deps:[],useFactory:zn};function Bn(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var Hn=new ve("mat-tooltip-default-options",{providedIn:"root",factory:Bn});var jn="tooltip-panel",Wn=cs({passive:!0}),zl=8,Bl=8,Hl=24,$l=200,Ei=(()=>{class s{_elementRef=c(se);_ngZone=c(K);_platform=c(oe);_ariaDescriber=c(gs);_focusMonitor=c(hs);_dir=c(Ht);_injector=c(Z);_viewContainerRef=c(dt);_animationsDisabled=jr();_defaultOptions=c(Hn,{optional:!0});_overlayRef;_tooltipInstance;_overlayPanelClass;_portal;_position="below";_positionAtOrigin=!1;_disabled=!1;_tooltipClass;_viewInitialized=!1;_pointerExitEventsInitialized=!1;_tooltipComponent=$n;_viewportMargin=8;_currentPosition;_cssClassPrefix="mat-mdc";_ariaDescriptionPending;_dirSubscribed=!1;get position(){return this._position}set position(i){i!==this._position&&(this._position=i,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(i){this._positionAtOrigin=Hr(i),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(i){let e=Hr(i);this._disabled!==e&&(this._disabled=e,e?this.hide(0):this._setupPointerEnterEventsIfNeeded(),this._syncAriaDescription(this.message))}get showDelay(){return this._showDelay}set showDelay(i){this._showDelay=Bt(i)}_showDelay;get hideDelay(){return this._hideDelay}set hideDelay(i){this._hideDelay=Bt(i),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}_hideDelay;touchGestures="auto";get message(){return this._message}set message(i){let e=this._message;this._message=i!=null?String(i).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage()),this._syncAriaDescription(e)}_message="";get tooltipClass(){return this._tooltipClass}set tooltipClass(i){this._tooltipClass=i,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}_passiveListeners=[];_touchstartTimeout=null;_destroyed=new z;_isDestroyed=!1;constructor(){let i=this._defaultOptions;i&&(this._showDelay=i.showDelay,this._hideDelay=i.hideDelay,i.position&&(this.position=i.position),i.positionAtOrigin&&(this.positionAtOrigin=i.positionAtOrigin),i.touchGestures&&(this.touchGestures=i.touchGestures),i.tooltipClass&&(this.tooltipClass=i.tooltipClass)),this._viewportMargin=zl}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(ue(this._destroyed)).subscribe(i=>{i?i==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let i=this._elementRef.nativeElement;this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([e,t])=>{i.removeEventListener(e,t,Wn)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._isDestroyed=!0,this._ariaDescriber.removeDescription(i,this.message,"tooltip"),this._focusMonitor.stopMonitoring(i)}show(i=this.showDelay,e){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let t=this._createOverlay(e);this._detach(),this._portal=this._portal||new Rt(this._tooltipComponent,this._viewContainerRef);let n=this._tooltipInstance=t.attach(this._portal).instance;n._triggerElement=this._elementRef.nativeElement,n._mouseLeaveHideDelay=this._hideDelay,n.afterHidden().pipe(ue(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),n.show(i)}hide(i=this.hideDelay){let e=this._tooltipInstance;e&&(e.isVisible()?e.hide(i):(e._cancelPendingAnimations(),this._detach()))}toggle(i){this._isTooltipVisible()?this.hide():this.show(void 0,i)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(i){if(this._overlayRef){let o=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!i)&&o._origin instanceof se)return this._overlayRef;this._detach()}let e=this._injector.get(st).getAncestorScrollContainers(this._elementRef),t=`${this._cssClassPrefix}-${jn}`,n=br(this._injector,this.positionAtOrigin?i||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(e);return n.positionChanges.pipe(ue(this._destroyed)).subscribe(o=>{this._updateCurrentPositionClass(o.connectionPair),this._tooltipInstance&&o.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=kr(this._injector,{direction:this._dir,positionStrategy:n,panelClass:this._overlayPanelClass?[...this._overlayPanelClass,t]:t,scrollStrategy:this._injector.get(Ri)(),disableAnimations:this._animationsDisabled}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(ue(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(ue(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(ue(this._destroyed)).subscribe(o=>{this._isTooltipVisible()&&o.keyCode===27&&!ps(o)&&(o.preventDefault(),o.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._dirSubscribed||(this._dirSubscribed=!0,this._dir.change.pipe(ue(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(i){let e=i.getConfig().positionStrategy,t=this._getOrigin(),n=this._getOverlayPosition();e.withPositions([this._addOffset(u(u({},t.main),n.main)),this._addOffset(u(u({},t.fallback),n.fallback))])}_addOffset(i){let e=Bl,t=!this._dir||this._dir.value=="ltr";return i.originY==="top"?i.offsetY=-e:i.originY==="bottom"?i.offsetY=e:i.originX==="start"?i.offsetX=t?-e:e:i.originX==="end"&&(i.offsetX=t?e:-e),i}_getOrigin(){let i=!this._dir||this._dir.value=="ltr",e=this.position,t;e=="above"||e=="below"?t={originX:"center",originY:e=="above"?"top":"bottom"}:e=="before"||e=="left"&&i||e=="right"&&!i?t={originX:"start",originY:"center"}:(e=="after"||e=="right"&&i||e=="left"&&!i)&&(t={originX:"end",originY:"center"});let{x:n,y:o}=this._invertPosition(t.originX,t.originY);return{main:t,fallback:{originX:n,originY:o}}}_getOverlayPosition(){let i=!this._dir||this._dir.value=="ltr",e=this.position,t;e=="above"?t={overlayX:"center",overlayY:"bottom"}:e=="below"?t={overlayX:"center",overlayY:"top"}:e=="before"||e=="left"&&i||e=="right"&&!i?t={overlayX:"end",overlayY:"center"}:(e=="after"||e=="right"&&i||e=="left"&&!i)&&(t={overlayX:"start",overlayY:"center"});let{x:n,y:o}=this._invertPosition(t.overlayX,t.overlayY);return{main:t,fallback:{overlayX:n,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),xe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(i){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=i,this._tooltipInstance._markForCheck())}_invertPosition(i,e){return this.position==="above"||this.position==="below"?e==="top"?e="bottom":e==="bottom"&&(e="top"):i==="end"?i="start":i==="start"&&(i="end"),{x:i,y:e}}_updateCurrentPositionClass(i){let{overlayY:e,originX:t,originY:n}=i,o;if(e==="center"?this._dir&&this._dir.value==="rtl"?o=t==="end"?"left":"right":o=t==="start"?"left":"right":o=e==="bottom"&&n==="top"?"above":"below",o!==this._currentPosition){let a=this._overlayRef;if(a){let l=`${this._cssClassPrefix}-${jn}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",i=>{this._setupPointerExitEventsIfNeeded();let e;i.x!==void 0&&i.y!==void 0&&(e=i),this.show(void 0,e)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",i=>{let e=i.targetTouches?.[0],t=e?{x:e.clientX,y:e.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),this._touchstartTimeout&&clearTimeout(this._touchstartTimeout);let n=500;this._touchstartTimeout=setTimeout(()=>{this._touchstartTimeout=null,this.show(void 0,t)},this._defaultOptions?.touchLongPressShowDelay??n)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let i=[];if(this._platformSupportsMouseEvents())i.push(["mouseleave",e=>{let t=e.relatedTarget;(!t||!this._overlayRef?.overlayElement.contains(t))&&this.hide()}],["wheel",e=>this._wheelListener(e)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let e=()=>{this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions?.touchendHideDelay)};i.push(["touchend",e],["touchcancel",e])}this._addListeners(i),this._passiveListeners.push(...i)}_addListeners(i){i.forEach(([e,t])=>{this._elementRef.nativeElement.addEventListener(e,t,Wn)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(i){if(this._isTooltipVisible()){let e=this._injector.get(F).elementFromPoint(i.clientX,i.clientY),t=this._elementRef.nativeElement;e!==t&&!t.contains(e)&&this.hide()}}_disableNativeGesturesIfNecessary(){let i=this.touchGestures;if(i!=="off"){let e=this._elementRef.nativeElement,t=e.style;(i==="on"||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA")&&(t.userSelect=t.msUserSelect=t.webkitUserSelect=t.MozUserSelect="none"),(i==="on"||!e.draggable)&&(t.webkitUserDrag="none"),t.touchAction="none",t.webkitTapHighlightColor="transparent"}}_syncAriaDescription(i){this._ariaDescriptionPending||(this._ariaDescriptionPending=!0,this._ariaDescriber.removeDescription(this._elementRef.nativeElement,i,"tooltip"),this._isDestroyed||xe({write:()=>{this._ariaDescriptionPending=!1,this.message&&!this.disabled&&this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")}},{injector:this._injector}))}static \u0275fac=function(e){return new(e||s)};static \u0275dir=De({type:s,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(e,t){e&2&&Be("mat-mdc-tooltip-disabled",t.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"]})}return s})(),$n=(()=>{class s{_changeDetectorRef=c(Ur);_elementRef=c(se);_isMultiline=!1;message;tooltipClass;_showTimeoutId;_hideTimeoutId;_triggerElement;_mouseLeaveHideDelay;_animationsDisabled=jr();_tooltip;_closeOnInteraction=!1;_isVisible=!1;_onHide=new z;_showAnimation="mat-mdc-tooltip-show";_hideAnimation="mat-mdc-tooltip-hide";constructor(){}show(i){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},i)}hide(i){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},i)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:i}){(!i||!this._triggerElement.contains(i))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let i=this._elementRef.nativeElement.getBoundingClientRect();return i.height>Hl&&i.width>=$l}_handleAnimationEnd({animationName:i}){(i===this._showAnimation||i===this._hideAnimation)&&this._finalizeAnimation(i===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(i){i?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(i){let e=this._tooltip.nativeElement,t=this._showAnimation,n=this._hideAnimation;if(e.classList.remove(i?n:t),e.classList.add(i?t:n),this._isVisible!==i&&(this._isVisible=i,this._changeDetectorRef.markForCheck()),i&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let o=getComputedStyle(e);(o.getPropertyValue("animation-duration")==="0s"||o.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}i&&this._onShow(),this._animationsDisabled&&(e.classList.add("_mat-animation-noopable"),this._finalizeAnimation(i))}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=G({type:s,selectors:[["mat-tooltip-component"]],viewQuery:function(e,t){if(e&1&&Mr(Wl,7),e&2){let n;ut(n=ft())&&(t._tooltip=n.first)}},hostAttrs:["aria-hidden","true"],hostBindings:function(e,t){e&1&&ye("mouseleave",function(o){return t._handleMouseLeave(o)})},decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(e,t){if(e&1){let n=ht();ne(0,"div",1,0),ye("animationend",function(a){return lt(n),ct(t._handleAnimationEnd(a))}),ne(2,"div",2),_e(3),pe()()}e&2&&(Be("mdc-tooltip--multiline",t._isMultiline),We("ngClass",t.tooltipClass),Ee(3),Bi(t.message))},dependencies:[qi],styles:[`.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mat-tooltip-container-color, var(--mat-sys-inverse-surface));color:var(--mat-tooltip-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mat-tooltip-container-shape, var(--mat-sys-corner-extra-small));font-family:var(--mat-tooltip-supporting-text-font, var(--mat-sys-body-small-font));font-size:var(--mat-tooltip-supporting-text-size, var(--mat-sys-body-small-size));font-weight:var(--mat-tooltip-supporting-text-weight, var(--mat-sys-body-small-weight));line-height:var(--mat-tooltip-supporting-text-line-height, var(--mat-sys-body-small-line-height));letter-spacing:var(--mat-tooltip-supporting-text-tracking, var(--mat-sys-body-small-tracking))}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel{line-height:normal}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}
`],encapsulation:2,changeDetection:0})}return s})();var Di=(()=>{class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=ee({type:s});static \u0275inj=Q({providers:[Ii],imports:[us,ki,Ze,Ze,kt]})}return s})();function Kl(s,r){if(s&1){let i=ht();ze(0,"div",3),ne(1,"button",4),ye("click",function(){lt(i);let t=Vt();return ct(t.logout.emit())}),ne(2,"mat-icon"),_e(3,"logout"),pe()()}if(s&2){let i,e=Vt();We("matTooltip",Hi((i=e.userData())==null?null:i.preferred_username))("innerHTML",e.initials(),Li)}}function Yl(s,r){if(s&1){let i=ht();ne(0,"button",5),ye("click",function(){lt(i);let t=Vt();return ct(t.login.emit())}),ne(1,"mat-icon"),_e(2,"login"),pe()()}}var Cr=class s{isAuthenticated=Nr.required();userData=Nr.required();login=Fr();logout=Fr();initials=te(()=>this.userData()?.preferred_username.split(/[._-]/).map(r=>r.charAt(0)).join(""));static \u0275fac=function(i){return new(i||s)};static \u0275cmp=G({type:s,selectors:[["BlogHeader"]],inputs:{isAuthenticated:[1,"isAuthenticated"],userData:[1,"userData"]},outputs:{login:"login",logout:"logout"},decls:6,vars:1,consts:[["color","primary",1,"header-toolbar"],[1,"spacer"],["data-testid","login-button","mat-icon-button","","matTooltip","Login","aria-label","Login button",1,"example-icon","favorite-icon"],["id","profileImage",3,"matTooltip","innerHTML"],["data-testid","logout-button","mat-icon-button","","matTooltip","Logout","aria-label","Logout button",1,"example-icon","favorite-icon",3,"click"],["data-testid","login-button","mat-icon-button","","matTooltip","Login","aria-label","Login button",1,"example-icon","favorite-icon",3,"click"]],template:function(i,e){i&1&&(ne(0,"mat-toolbar",0)(1,"span"),_e(2,"Blog App"),pe(),ze(3,"span",1),Nt(4,Kl,4,3)(5,Yl,3,0,"button",2),pe()),i&2&&(Ee(4),Ut(e.isAuthenticated()?4:5))},dependencies:[_n,yn,ws,Ss,_s,ys,Di,Ei],styles:["[_nghost-%COMP%]{height:4rem;display:block}[_nghost-%COMP%]   .header-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0 1rem;position:fixed;z-index:1000}[_nghost-%COMP%]   #profileImage[_ngcontent-%COMP%]{width:2.1875rem;height:2.1875rem;border-radius:20px;background:#0c2354;font-size:.9rem;color:#fff;text-align:center;line-height:2.1875rem;text-transform:uppercase;cursor:pointer}[_nghost-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}"],changeDetection:0})};function ql(s,r){s&1&&ze(0,"mat-progress-bar",1)}function Xl(s,r){s&1&&ze(0,"router-outlet")}var Rr=class s{isLoading=c(hr).isLoading;#e=c(it);onModeChange(r){console.log(`event fired ${r}`)}title="blogapp-20";isAuthenticated=this.#e.isAuthenticated;userData=this.#e.userData;login(){this.#e.login()}logout(){this.#e.logout()}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=G({type:s,selectors:[["App"]],decls:3,vars:3,consts:[[3,"login","logout","isAuthenticated","userData"],["mode","indeterminate"]],template:function(i,e){i&1&&(ne(0,"BlogHeader",0),ye("login",function(){return e.login()})("logout",function(){return e.logout()}),pe(),Nt(1,ql,1,0,"mat-progress-bar",1)(2,Xl,1,0,"router-outlet")),i&2&&(We("isAuthenticated",e.isAuthenticated())("userData",e.userData()),Ee(),Ut(e.isLoading()?1:2))},dependencies:[os,Cr,ms],encapsulation:2})};Gi(Rr,vn).catch(s=>console.error(s));
